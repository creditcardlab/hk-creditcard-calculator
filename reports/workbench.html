<!doctype html>
<html lang="zh-HK">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Workbench Report</title>
  <style>
    :root {
      --bg: #f7fafc;
      --panel: #ffffff;
      --ink: #1f2937;
      --muted: #6b7280;
      --line: #e5e7eb;
      --accent: #0f766e;
      --pill: #e6fffa;
      --shadow: 0 1px 2px rgba(0,0,0,0.06);
    }
    * { box-sizing: border-box; }
    body { margin: 0; background: var(--bg); color: var(--ink); font-family: "SF Pro Text", "PingFang TC", "Helvetica Neue", Arial, sans-serif; }
    .wrap { max-width: 1400px; margin: 24px auto; padding: 0 16px 32px; }
    .head { display: flex; flex-wrap: wrap; justify-content: space-between; gap: 12px; align-items: center; margin-bottom: 16px; }
    .title { margin: 0; font-size: 28px; font-weight: 700; letter-spacing: 0.2px; }
    .sub { color: var(--muted); font-size: 13px; }
    .cards { display: grid; grid-template-columns: repeat(auto-fit, minmax(170px, 1fr)); gap: 10px; margin-bottom: 16px; }
    .card { background: var(--panel); border: 1px solid var(--line); box-shadow: var(--shadow); border-radius: 12px; padding: 10px 12px; }
    .k { color: var(--muted); font-size: 12px; margin-bottom: 6px; }
    .v { font-size: 22px; font-weight: 700; }
    .issues { background: var(--panel); border: 1px solid var(--line); border-radius: 12px; padding: 12px; box-shadow: var(--shadow); margin-bottom: 16px; }
    .issues h2 { margin: 0 0 8px; font-size: 16px; }
    .issues ul { margin: 0; padding-left: 18px; }
    .issues li { margin: 4px 0; font-size: 13px; }
    .grid { display: grid; grid-template-columns: 1fr; gap: 14px; }
    .panel { background: var(--panel); border: 1px solid var(--line); border-radius: 12px; padding: 12px; box-shadow: var(--shadow); }
    .panel h3 { margin: 0 0 10px; font-size: 16px; }
    .toolbar { display: flex; align-items: center; gap: 8px; margin-bottom: 8px; }
    .toolbar input { width: 100%; max-width: 340px; border: 1px solid var(--line); border-radius: 8px; padding: 8px 10px; font-size: 13px; }
    .toolbar .count { color: var(--muted); font-size: 12px; }
    .toolbar button { border: 1px solid var(--line); background: #fff; border-radius: 8px; padding: 6px 10px; font-size: 12px; cursor: pointer; }
    .table-wrap { overflow: auto; border: 1px solid var(--line); border-radius: 10px; }
    table { width: 100%; border-collapse: collapse; min-width: 840px; background: #fff; }
    th, td { border-bottom: 1px solid var(--line); text-align: left; vertical-align: top; padding: 8px 10px; font-size: 12px; }
    th { position: sticky; top: 0; background: #f9fafb; z-index: 1; font-size: 11px; text-transform: uppercase; letter-spacing: .3px; color: #4b5563; }
    .mono { font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, monospace; }
    .pill { display: inline-block; background: var(--pill); color: var(--accent); border: 1px solid #99f6e4; border-radius: 999px; font-size: 11px; padding: 2px 8px; margin: 0 4px 4px 0; white-space: nowrap; }
    .small { color: var(--muted); font-size: 11px; }
    .edit-btn { border: 1px solid #cbd5e1; background: #f8fafc; border-radius: 6px; padding: 4px 8px; font-size: 11px; cursor: pointer; }
    .edit-btn:hover { background: #e2e8f0; }
    .editor-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: 8px; margin-bottom: 10px; }
    .editor-grid > div { display: flex; flex-direction: column; gap: 4px; }
    .editor-grid label { color: var(--muted); font-size: 11px; font-weight: 600; text-transform: uppercase; letter-spacing: .2px; }
    .editor-grid select, .editor-grid textarea, .editor-grid input[type="text"] {
      border: 1px solid var(--line);
      border-radius: 8px;
      font-size: 12px;
      padding: 8px;
      background: #fff;
      width: 100%;
    }
    .editor-grid textarea { min-height: 110px; font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, monospace; }
    .editor-actions { display: flex; flex-wrap: wrap; gap: 8px; margin-bottom: 8px; }
    .editor-actions button, .editor-actions label {
      border: 1px solid var(--line);
      background: #fff;
      border-radius: 8px;
      padding: 6px 10px;
      font-size: 12px;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }
    .editor-actions button.primary { background: #0f766e; color: white; border-color: #0f766e; }
    .editor-actions button.warn { background: #fff1f2; border-color: #fecdd3; color: #9f1239; }
    .editor-actions button.ghost { background: #f8fafc; }
    .editor-actions input[type="file"] { display: none; }
    .editor-hint { font-size: 12px; color: var(--muted); margin-bottom: 8px; }
    .editor-steps { margin: 0 0 8px; padding-left: 18px; color: #374151; font-size: 12px; }
    .editor-steps li { margin: 3px 0; }
    .editor-advanced { margin-bottom: 8px; }
    .editor-advanced summary { cursor: pointer; font-size: 12px; color: var(--muted); }
    .editor-advanced .editor-actions { margin-top: 8px; margin-bottom: 0; }
    .quick-box { margin-bottom: 10px; }
    #editor-quick-table { min-width: 0; }
    #editor-quick-table th, #editor-quick-table td { font-size: 11px; padding: 6px 8px; }
    #editor-quick-table .q-actions { white-space: nowrap; }
    #editor-entry-patch { min-height: 90px; font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, monospace; }
    .editor-split { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 10px; }
    .editor-split pre {
      margin: 0;
      border: 1px solid var(--line);
      border-radius: 8px;
      background: #f8fafc;
      padding: 10px;
      font-size: 11px;
      line-height: 1.35;
      overflow: auto;
      max-height: 260px;
    }
    .status { font-size: 12px; margin-bottom: 8px; }
    .status.ok { color: #065f46; }
    .status.err { color: #9f1239; }
    .review-meta { font-size: 12px; color: var(--muted); margin-bottom: 8px; }
    .review-meta .mono { color: var(--ink); }
    .review-block { border: 1px solid var(--line); border-radius: 10px; padding: 10px; background: #fff; margin-bottom: 10px; }
    .review-block h4 { margin: 0 0 8px; font-size: 13px; }
    .review-list { margin: 0; padding: 0; list-style: none; display: grid; gap: 6px; }
    .review-item { border: 1px solid var(--line); border-radius: 8px; padding: 8px; display: grid; gap: 4px; background: #f9fafb; }
    .review-item-top { display: flex; justify-content: space-between; gap: 8px; align-items: center; }
    .review-item-title { font-size: 12px; font-weight: 600; color: var(--ink); }
    .review-item-sub { font-size: 11px; color: var(--muted); }
    .review-empty { font-size: 12px; color: var(--muted); }
    .review-group-title { margin: 0 0 8px; font-size: 12px; color: #374151; text-transform: uppercase; letter-spacing: .2px; }
    .review-entity { border: 1px solid var(--line); border-radius: 8px; background: #f9fafb; margin-bottom: 8px; }
    .review-entity summary { cursor: pointer; padding: 8px; list-style: none; }
    .review-entity summary::-webkit-details-marker { display: none; }
    .review-entity-body { padding: 0 8px 8px; }
    .review-entity-body .table-wrap { border-radius: 8px; }
    .review-table { min-width: 0; }
    .review-table th, .review-table td { font-size: 11px; padding: 6px 8px; }
    .review-actions { white-space: nowrap; }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="head">
      <h1 class="title">Credit Card Workbench</h1>
      <div class="sub" id="generatedAt"></div>
    </div>
    <div class="cards" id="summaryCards"></div>
    <div class="issues">
      <h2>Audit Alerts</h2>
      <ul id="alerts"></ul>
    </div>
    <div class="grid">
      <section class="panel panel-editor" id="panel-editor">
        <h3>Core Overrides Editor</h3>
        <div class="editor-hint">
          å»ºè­°ç”± Card Review ç›´æ¥ç·¨è¼¯ï¼Œå®Œæˆå¾ŒæŒ‰ Saveã€‚
        </div>
        <ol class="editor-steps">
          <li>æ€ Bucketã€Entity IDã€Fieldã€‚</li>
          <li>Value æœƒè‡ªå‹•è¼‰å…¥ç›®å‰å€¼ï¼Œç›´æ¥æ”¹ã€‚</li>
          <li>æŒ‰ã€ŒSave Fieldã€ï¼Œå®Œæˆå¾ŒæŒ‰ã€ŒSave + Run Goldenã€ã€‚</li>
        </ol>
        <div id="editorStatus" class="status ok">Ready.</div>
        <div class="editor-grid">
          <div>
            <label for="editor-bucket">Bucket</label>
            <select id="editor-bucket"></select>
          </div>
          <div>
            <label for="editor-id">Entity ID</label>
            <select id="editor-id"></select>
          </div>
          <div>
            <label for="editor-field">Field</label>
            <select id="editor-field"></select>
          </div>
          <div>
            <label>Current Selection</label>
            <div class="small">Use Save/Delete buttons below.</div>
          </div>
          <div style="grid-column: 1 / -1;">
            <label for="editor-value">Value (plain text or JSON)</label>
            <textarea id="editor-value" placeholder='Example: 0.06, "æ–°æè¿°", {"type":"month","startDay":1}'></textarea>
          </div>
        </div>
        <input type="checkbox" id="editor-delete-field" hidden>
        <div class="editor-actions">
          <button id="editor-load" class="ghost" type="button">Reload Current Value</button>
          <button id="editor-set" class="primary" type="button">Save Field</button>
          <button id="editor-delete-field-btn" class="warn" type="button">Delete Field</button>
          <button id="editor-clear-entry" class="ghost" type="button">Clear This Entry Patch</button>
        </div>
        <div class="editor-actions">
          <button id="editor-save-repo" class="primary" type="button">Save To Repo</button>
          <button id="editor-save-repo-golden" class="ghost" type="button">Save + Run Golden</button>
          <button id="editor-reset" class="warn" type="button">Reset Pending</button>
        </div>
        <div class="quick-box">
          <div class="small" style="margin-bottom:4px;">Quick Edit Fields (one column at a time)</div>
          <div class="table-wrap"><table id="editor-quick-table"></table></div>
        </div>
        <div class="quick-box">
          <div class="small" style="margin-bottom:4px;">Bulk Patch For Selected Entry (edit multiple fields at once)</div>
          <textarea id="editor-entry-patch" placeholder='{"rate":0.06,"cap_limit":500,"desc":"æ–°æè¿°"}'></textarea>
          <div class="editor-actions" style="margin-top:8px;">
            <button id="editor-load-entry" class="ghost" type="button">Load Pending Entry Patch</button>
            <button id="editor-merge-entry" class="primary" type="button">Queue Entry Patch (Merge)</button>
          </div>
        </div>
        <div class="editor-split">
          <div>
            <div class="small" style="margin-bottom:4px;">Selected Entity Snapshot</div>
            <pre id="editor-current"></pre>
          </div>
          <div>
            <div class="small" style="margin-bottom:4px;">Pending Edits JSON (<span id="editor-patch-count" class="mono">0</span>)</div>
            <pre id="editor-pending"></pre>
          </div>
        </div>
      </section>
      <section class="panel">
        <h3>Card Review</h3>
        <div class="toolbar">
          <select id="card-review-select"></select>
          <button id="card-review-prev" type="button">Prev</button>
          <button id="card-review-next" type="button">Next</button>
          <button id="card-review-edit-card" type="button">Edit Card</button>
        </div>
        <div id="card-review-meta" class="review-meta"></div>
        <div id="card-review-content"></div>
      </section>
      <section class="panel">
        <h3>Unified Offers</h3>
        <div class="toolbar">
          <input id="q-offers" placeholder="Search offer id / title / source / type / card / module ...">
          <span class="count" id="count-offers"></span>
        </div>
        <div class="table-wrap"><table id="table-offers"></table></div>
      </section>
      <section class="panel">
        <h3>Cards</h3>
        <div class="toolbar">
          <input id="q-cards" placeholder="Search card / module / tracker ...">
          <span class="count" id="count-cards"></span>
        </div>
        <div class="table-wrap"><table id="table-cards"></table></div>
      </section>
      <section class="panel">
        <h3>Categories</h3>
        <div class="toolbar">
          <input id="q-categories" placeholder="Search category id / label / parent ...">
          <span class="count" id="count-categories"></span>
        </div>
        <div class="table-wrap"><table id="table-categories"></table></div>
      </section>
      <section class="panel">
        <h3>Trackers</h3>
        <div class="toolbar">
          <input id="q-trackers" placeholder="Search tracker / mission / card ...">
          <span class="count" id="count-trackers"></span>
        </div>
        <div class="table-wrap"><table id="table-trackers"></table></div>
      </section>
    </div>
  </div>
<script>
const WB = {"cards":[{"bank":"","currency":"CASH_Direct","id":"ae_blue_cash","name":"AE Blue Cash","rewardModules":["ae_blue_cash_base"],"trackers":[]},{"bank":"","currency":"AE_MR","id":"ae_explorer","name":"AE Explorer","rewardModules":["ae_explorer_base","ae_explorer_overseas","ae_explorer_selected"],"trackers":[]},{"bank":"","currency":"AE_MR","id":"ae_platinum","name":"AE Platinum (ç´°é ­)","rewardModules":["ae_plat_base","ae_plat_overseas","ae_plat_travel","ae_plat_daily"],"trackers":[]},{"bank":"","currency":"AE_MR","id":"ae_platinum_credit","name":"AE Platinum Credit (å¤§é ­)","rewardModules":["ae_pcc_base","ae_pcc_special"],"trackers":[]},{"bank":"","currency":"CASH_Direct","id":"aeon_wakuwaku","name":"AEON WAKUWAKU","rewardModules":["aeon_waku_base","aeon_waku_online","aeon_waku_japan"],"trackers":[]},{"bank":"","currency":"CASH_Direct","id":"bea_goal","name":"BEA GOAL","rewardModules":["bea_goal_base","bea_goal_travel_transport","bea_goal_entertainment","bea_goal_online_mobile"],"trackers":["bea_goal_mission"]},{"bank":"","currency":"BEA_iDollar","id":"bea_ititanium","name":"BEA i-Titanium","rewardModules":["bea_ititanium_base","bea_ititanium_online_mobile"],"trackers":["bea_ititanium_mission"]},{"bank":"","currency":"BEA_Points","id":"bea_unionpay_diamond","name":"BEA éŠ€è¯é›™å¹£é‘½çŸ³","rewardModules":["bea_unionpay_base","bea_unionpay_rmb","bea_unionpay_fx","bea_unionpay_dining","bea_unionpay_local"],"trackers":[]},{"bank":"","currency":"BEA_Points","id":"bea_world","name":"BEA World Mastercard","rewardModules":["bea_world_base","bea_world_bonus"],"trackers":["bea_world_mission"]},{"bank":"","currency":"BEA_Points","id":"bea_world_privilege","name":"BEA é¡¯å“ç†è²¡ World Mastercard","rewardModules":["bea_world_base","bea_world_bonus"],"trackers":["bea_world_mission"]},{"bank":"","currency":"BOC_Points","id":"boc_cheers_vi","name":"ä¸­éŠ€ Cheers Visa Infinite","rewardModules":["boc_cheers_base","boc_cheers_dining","boc_cheers_travel","boc_amazing_fly_cn","boc_amazing_fly_other","boc_cheers_overseas","boc_amazing_weekday","boc_amazing_holiday","boc_amazing_online_weekday","boc_amazing_online_holiday"],"trackers":[]},{"bank":"","currency":"BOC_Points","id":"boc_cheers_vs","name":"ä¸­éŠ€ Cheers Visa Signature","rewardModules":["boc_cheers_base","boc_cheers_dining_vs","boc_cheers_travel_vs","boc_amazing_fly_cn_vs","boc_amazing_fly_other_vs","boc_cheers_overseas_vs","boc_amazing_weekday_vs","boc_amazing_holiday_vs","boc_amazing_online_weekday_vs","boc_amazing_online_holiday_vs"],"trackers":[]},{"bank":"","currency":"BOC_Points","id":"boc_chill","name":"ä¸­éŠ€ Chill Card","rewardModules":["boc_chill_base","boc_chill_merchant","boc_chill_online_overseas"],"trackers":[]},{"bank":"","currency":"BOC_Points","id":"boc_go_diamond","name":"ä¸­éŠ€ Go UnionPay Diamond","rewardModules":["boc_go_base","boc_go_mobile","boc_go_merchant"],"trackers":[]},{"bank":"","currency":"CASH_Direct","id":"boc_sogo","name":"ä¸­éŠ€ Sogo Visa Signature","rewardModules":["boc_sogo_mobile_pay"],"trackers":[]},{"bank":"","currency":"CASH_Direct","id":"citi_cashback","name":"Citi Cash Back","rewardModules":["citi_cb_base","citi_cb_special"],"trackers":[]},{"bank":"","currency":"CLUB_PTS","id":"citi_club","name":"Citi The Club","rewardModules":["citi_club_base","citi_club_designated"],"trackers":[]},{"bank":"","currency":"CASH_Direct","id":"citi_octopus","name":"Citi Octopus ç™½é‡‘","rewardModules":["citi_octopus_base","citi_octopus_transport","citi_octopus_tunnel"],"trackers":[]},{"bank":"","currency":"CITI_PM_PTS","id":"citi_pm","name":"Citi PremierMiles","rewardModules":["citi_pm_base","citi_pm_overseas"],"trackers":[]},{"bank":"","currency":"CITI_PM_PTS","id":"citi_prestige","name":"Citi Prestige","rewardModules":["citi_prestige_base","citi_prestige_overseas"],"trackers":[]},{"bank":"","currency":"CITI_R_PTS","id":"citi_rewards","name":"Citi Rewards","rewardModules":["citi_rewards_base","citi_rewards_mobile","citi_rewards_shopping"],"trackers":[]},{"bank":"","currency":"DBS_Dollar","id":"dbs_black","name":"DBS Black World","rewardModules":["dbs_black_overseas_promo","dbs_black_overseas_std","dbs_black_base"],"trackers":[]},{"bank":"","currency":"COMPASS_Dollar","id":"dbs_compass","name":"DBS COMPASS VISA","rewardModules":["dbs_compass_grocery_wed","dbs_compass_ewallet","dbs_compass_base"],"trackers":[]},{"bank":"","currency":"DBS_Dollar_Others","id":"dbs_eminent","name":"DBS Eminent Visa","rewardModules":["dbs_eminent_bonus","dbs_eminent_base"],"trackers":[]},{"bank":"","currency":"DBS_Dollar_Others","id":"dbs_live_fresh","name":"DBS Live Fresh","rewardModules":["dbs_live_fresh_selected","dbs_live_fresh_online_foreign","dbs_live_fresh_base"],"trackers":[]},{"bank":"","currency":"CASH_Direct","id":"earnmore","name":"EarnMORE éŠ€è¯","rewardModules":["earnmore_base"],"trackers":[]},{"bank":"","currency":"Fubon_Points","id":"fubon_in_platinum","name":"Fubon iN Visa Platinum","rewardModules":["fubon_in_base","fubon_in_online"],"trackers":[]},{"bank":"","currency":"Fubon_Points","id":"fubon_travel","name":"Fubon Platinum/Titanium","rewardModules":["fubon_travel_base","fubon_travel_tw","fubon_travel_jpkr","fubon_travel_euro"],"trackers":[]},{"bank":"","currency":"YUU_Points","id":"hangseng_enjoy","name":"Hang Seng enJoy","rewardModules":["enjoy_base","enjoy_dining","enjoy_retail"],"trackers":[]},{"bank":"","currency":"Fun_Dollars","id":"hangseng_mmpower","name":"Hang Seng MMPower","rewardModules":["hangseng_base","mmpower_overseas_bonus","mmpower_online_bonus","mmpower_selected_bonus"],"trackers":[]},{"bank":"","currency":"Fun_Dollars","id":"hangseng_travel_plus","name":"Hang Seng Travel+","rewardModules":["hangseng_base","travel_plus_tier1_bonus","travel_plus_tier2_bonus","travel_plus_dining_bonus"],"trackers":[]},{"bank":"","currency":"Fun_Dollars","id":"hangseng_university","name":"Hang Seng University","rewardModules":["hangseng_base","university_tuition"],"trackers":[]},{"bank":"","currency":"HSBC_RC","id":"hsbc_easy","name":"HSBC Easy Card / ç™½é‡‘å¡","rewardModules":["hsbc_std_base","red_hot_variable","easy_moneyback_pns_watsons_6x","easy_moneyback_fortress_6x","easy_moneyback_bonus","travel_guru_v2"],"trackers":["winter_tracker"]},{"bank":"","currency":"HSBC_RC_EM","id":"hsbc_everymile","name":"HSBC EveryMile","rewardModules":["em_base","em_designated","em_grocery_low","em_overseas_bonus","travel_guru_v2"],"trackers":["em_overseas_mission"]},{"bank":"","currency":"HSBC_RC","id":"hsbc_gold","name":"HSBC æ»™è²¡é‡‘å¡","rewardModules":["hsbc_std_base","red_hot_variable","travel_guru_v2"],"trackers":["winter_tracker"]},{"bank":"","currency":"HSBC_RC","id":"hsbc_gold_student","name":"HSBC æ»™è²¡é‡‘å¡ (å­¸ç”Ÿå¡)","rewardModules":["hsbc_std_base","red_hot_variable","student_tuition_bonus","travel_guru_v2"],"trackers":["winter_tracker"]},{"bank":"","currency":"HSBC_RC","id":"hsbc_premier","name":"HSBC Premier (å“è¶Šç†è²¡)","rewardModules":["hsbc_std_base","red_hot_variable","travel_guru_v2"],"trackers":["winter_tracker"]},{"bank":"","currency":"HSBC_RC","id":"hsbc_pulse","name":"HSBC Pulse éŠ€è¯é‘½çŸ³","rewardModules":["hsbc_std_base","red_hot_variable","pulse_china_bonus","travel_guru_v2"],"trackers":["winter_tracker"]},{"bank":"","currency":"HSBC_RC","id":"hsbc_red","name":"HSBC Red Card","rewardModules":["red_base","red_online","red_designated_bonus","travel_guru_v2"],"trackers":["winter_tracker"]},{"bank":"","currency":"HSBC_RC","id":"hsbc_unionpay_std","name":"HSBC éŠ€è¯é›™å¹£","rewardModules":["hsbc_std_base","red_hot_variable","travel_guru_v2"],"trackers":["winter_tracker"]},{"bank":"","currency":"HSBC_RC","id":"hsbc_vs","name":"HSBC Visa Signature","rewardModules":["vs_base","vs_red_hot_bonus","red_hot_variable","travel_guru_v2"],"trackers":["winter_tracker"]},{"bank":"","currency":"CASH_Direct","id":"mox_credit","name":"Mox Credit","rewardModules":["mox_base","mox_task_bonus","mox_supermarket"],"trackers":[]},{"bank":"","currency":"AM_Direct","id":"sc_cathay_priority","name":"æ¸£æ‰“åœ‹æ³° Mastercard (å„ªå…ˆç†è²¡)","rewardModules":["sc_cathay_base","sc_cathay_dining_hotel","sc_cathay_overseas_priority","sc_cathay_airlines"],"trackers":["sc_cathay_cxuo_tracker"]},{"bank":"","currency":"AM_Direct","id":"sc_cathay_private","name":"æ¸£æ‰“åœ‹æ³° Mastercard (å„ªå…ˆç§äºº)","rewardModules":["sc_cathay_base","sc_cathay_dining_hotel","sc_cathay_overseas_private","sc_cathay_airlines"],"trackers":["sc_cathay_cxuo_tracker"]},{"bank":"","currency":"AM_Direct","id":"sc_cathay_std","name":"æ¸£æ‰“åœ‹æ³° Mastercard","rewardModules":["sc_cathay_base","sc_cathay_dining_hotel","sc_cathay_overseas_std","sc_cathay_airlines"],"trackers":["sc_cathay_cxuo_tracker"]},{"bank":"","currency":"CASH_Direct","id":"sc_simply_cash","name":"SC Simply Cash Visa","rewardModules":["sc_simply_cash_base","sc_simply_cash_foreign"],"trackers":[]},{"bank":"","currency":"CASH_Direct","id":"sc_smart","name":"SC Smart Card","rewardModules":["sc_smart_base","sc_smart_designated"],"trackers":[]},{"bank":"","currency":"CASH_Direct","id":"sim_credit","name":"sim Credit Card","rewardModules":["sim_base","sim_online"],"trackers":["sim_non_online_tracker"]},{"bank":"","currency":"CASH_Direct","id":"wewa","name":"å®‰ä¿¡ WeWa UnionPay","rewardModules":["wewa_base","wewa_bonus","wewa_mobile_pay"],"trackers":["wewa_mobile_mission"]}],"categories":[{"hidden":true,"id":"airline","label":"âœˆï¸ èˆªç©ºå…¬å¸","parent":""},{"hidden":false,"id":"alipay","label":"ğŸ“± Alipay / WeChat Pay","parent":""},{"hidden":false,"id":"apparel","label":"ğŸ‘— æœé£¾/ç™¾è²¨ (Apparel/Dept)","parent":""},{"hidden":false,"id":"cathay_hkexpress","label":"âœˆï¸ CX/UO (HK Express)","parent":""},{"hidden":true,"id":"charity","label":"â¤ï¸ æ…ˆå–„","parent":""},{"hidden":false,"id":"chill_merchant","label":"ğŸŸï¸ Chill æŒ‡å®šå•†æˆ¶","parent":""},{"hidden":true,"id":"china_consumption","label":"ğŸ‡¨ğŸ‡³ ä¸­åœ‹/æ¾³é–€æ¶ˆè²»","parent":"overseas"},{"hidden":false,"id":"citi_club_merchant","label":"ğŸ›ï¸ The Club æŒ‡å®šå•†æˆ¶ (4%)","parent":""},{"hidden":true,"id":"department_store","label":"ğŸ¬ ç™¾è²¨å…¬å¸","parent":""},{"hidden":false,"id":"dining","label":"ğŸ½ï¸ é¤é£² (Dining)","parent":""},{"hidden":true,"id":"dining_enjoy","label":"ğŸ½ï¸ enJoy æŒ‡å®šé¤é£²","parent":""},{"hidden":false,"id":"electronics","label":"ğŸ”Œ é›»å™¨/é›»å­ç”¢å“","parent":""},{"hidden":false,"id":"em_designated_spend","label":"ğŸŒ EveryMile æŒ‡å®š ($2/é‡Œ)","parent":""},{"hidden":false,"id":"entertainment","label":"ğŸŸï¸ å¨›æ¨‚ (Entertainment)","parent":""},{"hidden":true,"id":"gas","label":"â›½ æ²¹ç«™","parent":""},{"hidden":false,"id":"general","label":"ä¸€èˆ¬ æœ¬åœ°é›¶å”® (Local Retail)","parent":""},{"hidden":false,"id":"go_merchant","label":"ğŸ›ï¸ Go æŒ‡å®šå•†æˆ¶","parent":""},{"hidden":false,"id":"grocery","label":"ğŸ§º è¶…å¸‚ (Grocery)","parent":""},{"hidden":false,"id":"gym","label":"ğŸ‹ï¸â€â™‚ï¸ å¥èº«/é‹å‹•","parent":""},{"hidden":false,"id":"health_beauty","label":"ğŸ’„ ç¾å®¹/è—¥å¦ (Beauty/Watsons)","parent":""},{"hidden":true,"id":"hotel","label":"ğŸ¨ é…’åº—","parent":""},{"hidden":true,"id":"live_fresh_selected","label":"DBS Live Fresh Selected","parent":""},{"hidden":false,"id":"medical","label":"ğŸ¥ é†«ç™‚/ä¿å¥","parent":""},{"hidden":false,"id":"moneyback_fortress","label":"ğŸ  æ˜“è³éŒ¢ï¼šè±æ¾¤","parent":""},{"hidden":true,"id":"moneyback_merchant","label":"ğŸ  æ˜“è³éŒ¢æŒ‡å®šå•†æˆ¶ï¼ˆèˆŠï¼‰","parent":""},{"hidden":false,"id":"moneyback_pns_watsons","label":"ğŸ  æ˜“è³éŒ¢ï¼šç™¾ä½³/å±ˆè‡£æ°","parent":""},{"hidden":true,"id":"nfc_payment","label":"ğŸ“³ NFC/æ‰‹æ©Ÿæ”¯ä»˜","parent":""},{"hidden":true,"id":"oepay","label":"ğŸ’¬ O!Pay","parent":""},{"hidden":true,"id":"online","label":"ğŸ’» ç¶²ä¸Šè³¼ç‰© (Online)","parent":""},{"hidden":true,"id":"online_foreign","label":"ğŸŒ ç¶²ä¸Šå¤–å¹£","parent":"overseas"},{"hidden":true,"id":"other","label":"â“ å…¶ä»–","parent":""},{"hidden":true,"id":"overseas","label":"ğŸŒ æµ·å¤– (æ¯é¡)","parent":""},{"hidden":false,"id":"overseas_cn","label":"ğŸ‡¨ğŸ‡³ æµ·å¤– (ä¸­åœ‹)","parent":"overseas"},{"hidden":false,"id":"overseas_jkt","label":"ğŸ‡¯ğŸ‡µğŸ‡°ğŸ‡·ğŸ‡¹ğŸ‡­ æµ·å¤– (æ—¥éŸ“æ³°)","parent":"overseas"},{"hidden":true,"id":"overseas_jktt","label":"ğŸ‡¯ğŸ‡µ æµ·å¤– (æ—¥æœ¬-èˆŠ)","parent":"overseas"},{"hidden":false,"id":"overseas_mo","label":"ğŸ‡²ğŸ‡´ æµ·å¤– (æ¾³é–€)","parent":"overseas"},{"hidden":false,"id":"overseas_other","label":"ğŸŒ æµ·å¤– (å…¶ä»–)","parent":"overseas"},{"hidden":false,"id":"overseas_tw","label":"ğŸ‡¹ğŸ‡¼ æµ·å¤– (å°ç£)","parent":"overseas"},{"hidden":true,"id":"payme","label":"ğŸ’¬ PayMe","parent":""},{"hidden":false,"id":"red_designated","label":"ğŸŸ¥ Red æŒ‡å®šå•†æˆ¶ (8%)","parent":""},{"hidden":true,"id":"retail_enjoy","label":"ğŸ›ï¸ enJoy æŒ‡å®šé›¶å”®","parent":""},{"hidden":false,"id":"smart_designated","label":"ğŸ’³ Smart æŒ‡å®šå•†æˆ¶ (5%)","parent":""},{"hidden":true,"id":"sportswear","label":"ğŸ‘Ÿ é‹å‹•æœé£¾","parent":""},{"hidden":true,"id":"streaming","label":"ğŸ¬ ä¸²æµ/è¨‚é–±","parent":""},{"hidden":true,"id":"supermarket","label":"ğŸ›’ è¶…ç´šå¸‚å ´","parent":""},{"hidden":false,"id":"telecom","label":"ğŸ“ é›»è¨Šç¹³è²»","parent":""},{"hidden":false,"id":"transport","label":"ğŸš‡ äº¤é€š (Transport)","parent":""},{"hidden":false,"id":"travel","label":"âœˆï¸ æ—…éŠ (Travel)","parent":""},{"hidden":true,"id":"travel_plus_tier1","label":"âœˆï¸ Travel+ Tier1","parent":""},{"hidden":false,"id":"tuition","label":"ğŸ“ å­¸è²»","parent":""},{"hidden":true,"id":"wechat","label":"ğŸ’¬ WeChat Pay","parent":""}],"editor":{"allowedFields":{"campaigns":["name","period_policy","promo_type"],"cards":["bank","currency","fcf","hidden","name","redemption","reward_modules_add","status","trackers_add","type"],"categories":["hidden","label","parent"],"modules":["cap_key","cap_limit","cap_mode","desc","match","min_single_spend","min_spend","mode","multiplier","promo_end","rate","rate_per_x","req_mission_key","req_mission_spend","retroactive","secondary_cap_key","secondary_cap_limit","valid_from","valid_to"],"trackers":["counter","desc","effects_on_eligible","effects_on_match","match","mission_id","promo_end","req_mission_key","retroactive","setting_key","type","valid_from","valid_to"]},"entities":{"campaigns":{"boc_amazing":{"capKeys":["boc_amazing_local_weekday_cap","boc_amazing_local_holiday_cap","boc_amazing_online_weekday_cap","boc_amazing_online_holiday_cap"],"cards":["boc_cheers_vi","boc_cheers_vs"],"icon":"fas fa-fire","id":"boc_amazing","name":"ç‹‚è³æ´¾","period_policy":{"mode":"recurring","period":{"startDay":1,"type":"month"}},"promo_type":"mission_multi_cap","sections":[{"label":"ğŸ¯ ç°½è³¬ä»»å‹™é€²åº¦","target":6000,"type":"mission","usageKeys":["spend_boc_cheers_vi","spend_boc_cheers_vs"]},{"capModule":"boc_amazing_weekday","label":"ğŸ’° å›è´ˆé€²åº¦ (å¹³æ—¥)","type":"cap","unit":"å…ƒ"},{"capModule":"boc_amazing_holiday","label":"ğŸ’° å›è´ˆé€²åº¦ (ç´…æ—¥)","type":"cap","unit":"å…ƒ"},{"capModule":"boc_amazing_online_weekday","label":"ğŸ’° ç¶²è³¼å›è´ˆé€²åº¦ (å¹³æ—¥)","type":"cap","unit":"å…ƒ"},{"capModule":"boc_amazing_online_holiday","label":"ğŸ’° ç¶²è³¼å›è´ˆé€²åº¦ (ç´…æ—¥)","type":"cap","unit":"å…ƒ"}],"theme":"blue"},"boc_amazing_fly":{"capKeys":["boc_amazing_fly_cn_cap","boc_amazing_fly_other_cap"],"cards":["boc_cheers_vi","boc_cheers_vs"],"icon":"fas fa-plane","id":"boc_amazing_fly","name":"ç‹‚è³é£› (å¤–å¹£) å­£åº¦ä»»å‹™","period_policy":{"mode":"recurring","period":{"startDay":1,"startMonth":1,"type":"quarter"}},"promo_type":"mission_multi_cap","sections":[{"label":"ğŸ¯ ç°½è³¬ä»»å‹™é€²åº¦","missionModules":["boc_amazing_fly_cn","boc_amazing_fly_cn_vs"],"type":"mission"},{"capModule":"boc_amazing_fly_cn","label":"ğŸ’° å›è´ˆé€²åº¦ (ä¸­æ¾³)","type":"cap","unit":"åˆ†"},{"capModule":"boc_amazing_fly_other","label":"ğŸ’° å›è´ˆé€²åº¦ (å…¶ä»–)","type":"cap","unit":"åˆ†"}],"theme":"blue"},"dbs_black_promo":{"cards":["dbs_black"],"icon":"fas fa-gem","id":"dbs_black_promo","name":"DBS Black $2/é‡Œæ¨å»£","period_policy":{"mode":"recurring","period":{"startDay":1,"type":"month"}},"promo_type":"mission_uncapped","sections":[{"label":"ğŸ¯ ç°½è³¬ä»»å‹™é€²åº¦","missionModule":"dbs_black_overseas_promo","type":"mission"},{"capModule":"dbs_black_overseas_promo","label":"ğŸ’° å›è´ˆé€²åº¦","type":"cap","unit":"é‡Œ","unlockModule":"dbs_black_overseas_promo"}],"theme":"gray"},"em_promo":{"capKeys":["em_promo_cap"],"cards":["hsbc_everymile"],"icon":"fas fa-plane","id":"em_promo","name":"EveryMile å¤–å¹£ç°½å¸³å„ªæƒ ","period_policy":{"mode":"composite","windows":[{"endDate":"2026-06-30","id":"window_2","period":{"endDate":"2026-06-30","startDate":"2026-04-01","startDay":1,"type":"promo"},"startDate":"2026-04-01"},{"endDate":"2026-03-31","id":"window_1","period":{"endDate":"2026-03-31","startDate":"2026-01-01","type":"promo"},"priority":1,"startDate":"2026-01-01"}]},"promo_type":"mission_cap_rate","sections":[{"label":"ğŸ¯ ç°½è³¬ä»»å‹™é€²åº¦","missionModule":"em_overseas_bonus","type":"mission"},{"capModule":"em_overseas_bonus","label":"ğŸ’° å›è´ˆé€²åº¦","rateModule":"em_overseas_bonus","type":"cap_rate","unit":"RC","unlockModule":"em_overseas_bonus","usageKey":"em_q1_eligible"}],"theme":"purple"},"fubon_in_promo":{"capKeys":["fubon_in_bonus_cap"],"cards":["fubon_in_platinum"],"icon":"fas fa-bolt","id":"fubon_in_promo","name":"Fubon iN ç¶²è³¼20X","period_policy":{"mode":"recurring","period":{"startDay":1,"type":"month"}},"promo_type":"mission_cap","sections":[{"label":"ğŸ¯ ç°½è³¬ä»»å‹™é€²åº¦","missionModule":"fubon_in_online","type":"mission"},{"capModule":"fubon_in_online","label":"ğŸ’° å›è´ˆé€²åº¦","type":"cap","unit":"åˆ†","unlockModule":"fubon_in_online"}],"theme":"purple"},"mmpower_promo":{"capKeys":["mmpower_reward_cap"],"cards":["hangseng_mmpower"],"icon":"fas fa-bolt","id":"mmpower_promo","name":"MMPower +FUN Dollars","period_policy":{"mode":"recurring","period":{"startDay":1,"type":"month"}},"promo_type":"mission_cap","sections":[{"label":"ğŸ¯ ç°½è³¬ä»»å‹™é€²åº¦","missionModule":"mmpower_overseas_bonus","type":"mission"},{"capModule":"mmpower_overseas_bonus","label":"ğŸ’° å›è´ˆé€²åº¦","type":"cap","unit":"å…ƒ","unlockModule":"mmpower_overseas_bonus"}],"theme":"yellow"},"sim_promo":{"capKeys":["sim_online_cap"],"cards":["sim_credit"],"icon":"fas fa-percent","id":"sim_promo","name":"sim 8% ç¶²è³¼æ¨å»£","period_policy":{"mode":"recurring","period":{"startDay":1,"type":"month"}},"promo_type":"mission_cap","sections":[{"label":"ğŸ¯ ç°½è³¬ä»»å‹™é€²åº¦","missionModule":"sim_online","type":"mission"},{"capModule":"sim_online","label":"ğŸ’° å›è´ˆé€²åº¦","type":"cap","unit":"å…ƒ","unlockModule":"sim_online"}],"theme":"green"},"travel_plus_promo":{"capKeys":["travel_plus_reward_cap"],"cards":["hangseng_travel_plus"],"icon":"fas fa-plane","id":"travel_plus_promo","name":"Travel+ å¤–å¹£å›è´ˆ","period_policy":{"mode":"recurring","period":{"startDay":1,"type":"month"}},"promo_type":"mission_cap","sections":[{"label":"ğŸ¯ ç°½è³¬ä»»å‹™é€²åº¦","missionModule":"travel_plus_tier1_bonus","type":"mission"},{"capModule":"travel_plus_tier1_bonus","label":"ğŸ’° å›è´ˆé€²åº¦","type":"cap","unit":"å…ƒ","unlockModule":"travel_plus_tier1_bonus"}],"theme":"purple"},"winter_promo":{"cards":["hsbc_vs","hsbc_red","hsbc_pulse","hsbc_unionpay_std","hsbc_easy","hsbc_gold_student","hsbc_gold","hsbc_premier"],"icon":"fas fa-gift","id":"winter_promo","name":"HSBC æœ€ç´…å†¬æ—¥è³","period_policy":{"mode":"fixed","windows":[{"endDate":"2026-02-28","id":"window_1","period":{"endDate":"2026-02-28","startDate":"2025-12-01","type":"promo"},"priority":1,"startDate":"2025-12-01"}]},"promo_type":"tiered_cap","sections":[{"label":"ğŸ¯ ç°½è³¬ä»»å‹™é€²åº¦","markers":[20000,40000],"target":40000,"type":"mission","usageKey":"winter_total"},{"eligibleKey":"winter_eligible","label":"ğŸ’° å›è´ˆé€²åº¦","tiers":[{"cap":250,"rate":0.03,"threshold":20000},{"cap":800,"rate":0.06,"threshold":40000}],"totalKey":"winter_total","type":"tier_cap","unit":""}],"theme":"red"}},"cards":{"ae_blue_cash":{"currency":"CASH_Direct","fcf":0.02,"id":"ae_blue_cash","name":"AE Blue Cash","redemption":{"fee":"å…è²»","min":0,"ratio":"1.2% å›è´ˆ","unit":"ç¾é‡‘"},"rewardModules":["ae_blue_cash_base"],"trackers":[],"type":"ae"},"ae_explorer":{"currency":"AE_MR","fcf":0.02,"id":"ae_explorer","name":"AE Explorer","redemption":{"fee":"å…è²»","min":0,"ratio":"18åˆ† = 1é‡Œ | æµ·å¤–: 10.75X | æŒ‡å®šæ—…éŠ: 12X","unit":"ç©åˆ†"},"rewardModules":["ae_explorer_base","ae_explorer_overseas","ae_explorer_selected"],"trackers":[],"type":"ae"},"ae_platinum":{"currency":"AE_MR","fcf":0.02,"id":"ae_platinum","name":"AE Platinum (ç´°é ­)","redemption":{"fee":"å…è²»","min":0,"ratio":"18åˆ† = 1é‡Œ | Turbo: 2X | Accelerator: +5X/7X","unit":"ç©åˆ†"},"rewardModules":["ae_plat_base","ae_plat_overseas","ae_plat_travel","ae_plat_daily"],"trackers":[],"type":"ae"},"ae_platinum_credit":{"currency":"AE_MR","fcf":0.02,"id":"ae_platinum_credit","name":"AE Platinum Credit (å¤§é ­)","redemption":{"fee":"å…è²»","min":0,"ratio":"18åˆ† = 1é‡Œ | è¶…å¸‚/æ²¹ç«™: 6X (Double Points)","unit":"ç©åˆ†"},"rewardModules":["ae_pcc_base","ae_pcc_special"],"trackers":[],"type":"ae"},"aeon_wakuwaku":{"currency":"CASH_Direct","fcf":0.0195,"id":"aeon_wakuwaku","name":"AEON WAKUWAKU","redemption":{"fee":"å…è²»","min":0,"ratio":"ç¶²è³¼ 6% | æ—¥æœ¬ 3%","unit":"ç¾é‡‘"},"rewardModules":["aeon_waku_base","aeon_waku_online","aeon_waku_japan"],"trackers":[],"type":"master"},"bea_goal":{"currency":"CASH_Direct","fcf":0.0195,"id":"bea_goal","name":"BEA GOAL","rewardModules":["bea_goal_base","bea_goal_travel_transport","bea_goal_entertainment","bea_goal_online_mobile"],"trackers":["bea_goal_mission"],"type":"master"},"bea_ititanium":{"currency":"BEA_iDollar","fcf":0.0195,"id":"bea_ititanium","name":"BEA i-Titanium","redemption":{"fee":"ç„¡","min":0,"ratio":"1 i-Dollar = $1","unit":"i-Dollar"},"rewardModules":["bea_ititanium_base","bea_ititanium_online_mobile"],"trackers":["bea_ititanium_mission"],"type":"visa"},"bea_unionpay_diamond":{"currency":"BEA_Points","fcf":0,"id":"bea_unionpay_diamond","name":"BEA éŠ€è¯é›™å¹£é‘½çŸ³","redemption":{"fee":"ç„¡","min":0,"ratio":"250åˆ† = $1","unit":"BEAåˆ†"},"rewardModules":["bea_unionpay_base","bea_unionpay_rmb","bea_unionpay_fx","bea_unionpay_dining","bea_unionpay_local"],"trackers":[],"type":"unionpay"},"bea_world":{"currency":"BEA_Points","fcf":0.0195,"id":"bea_world","name":"BEA World Mastercard","redemption":{"fee":"ç„¡","min":0,"ratio":"250åˆ† = $1","unit":"BEAåˆ†"},"rewardModules":["bea_world_base","bea_world_bonus"],"trackers":["bea_world_mission"],"type":"master"},"bea_world_privilege":{"currency":"BEA_Points","fcf":0.0195,"id":"bea_world_privilege","name":"BEA é¡¯å“ç†è²¡ World Mastercard","redemption":{"fee":"ç„¡","min":0,"ratio":"250åˆ† = $1","unit":"BEAåˆ†"},"rewardModules":["bea_world_base","bea_world_bonus"],"trackers":["bea_world_mission"],"type":"master"},"boc_cheers_vi":{"currency":"BOC_Points","fcf":0.0195,"id":"boc_cheers_vi","name":"ä¸­éŠ€ Cheers Visa Infinite","redemption":{"fee":"å…æ‰‹çºŒè²» âœ…","min":0,"ratio":"15åˆ† = 1é‡Œ | é¤é£²: 10X (Cap 100k) | æ—…éŠ/å¤–å¹£: 10X (Cap 250k)","unit":"ç©åˆ†"},"rewardModules":["boc_cheers_base","boc_cheers_dining","boc_cheers_travel","boc_amazing_fly_cn","boc_amazing_fly_other","boc_cheers_overseas","boc_amazing_weekday","boc_amazing_holiday","boc_amazing_online_weekday","boc_amazing_online_holiday"],"trackers":[],"type":"visa"},"boc_cheers_vs":{"currency":"BOC_Points","fcf":0.0195,"id":"boc_cheers_vs","name":"ä¸­éŠ€ Cheers Visa Signature","redemption":{"fee":"å…æ‰‹çºŒè²» âœ…","min":0,"ratio":"15åˆ† = 1é‡Œ | é¤é£²: 8X (Cap 60k) | æ—…éŠ/å¤–å¹£: 8X (Cap 150k)","unit":"ç©åˆ†"},"rewardModules":["boc_cheers_base","boc_cheers_dining_vs","boc_cheers_travel_vs","boc_amazing_fly_cn_vs","boc_amazing_fly_other_vs","boc_cheers_overseas_vs","boc_amazing_weekday_vs","boc_amazing_holiday_vs","boc_amazing_online_weekday_vs","boc_amazing_online_holiday_vs"],"trackers":[],"type":"visa"},"boc_chill":{"currency":"BOC_Points","fcf":0.0195,"id":"boc_chill","name":"ä¸­éŠ€ Chill Card","redemption":{"fee":"$50/5Ké‡Œï¼ˆæœ€ä½$100ï¼Œæœ€é«˜$300ï¼‰","min":0,"ratio":"15åˆ† = 1é‡Œ | Chillå•†æˆ¶: 10X | ç¶²è³¼/æµ·å¤–: 5X | å…±ç”¨ 15kåˆ†/æœˆä¸Šé™","unit":"ç©åˆ†"},"rewardModules":["boc_chill_base","boc_chill_merchant","boc_chill_online_overseas"],"trackers":[],"type":"master"},"boc_go_diamond":{"currency":"BOC_Points","fcf":0,"id":"boc_go_diamond","name":"ä¸­éŠ€ Go UnionPay Diamond","redemption":{"fee":"$50/5Ké‡Œï¼ˆæœ€ä½$100ï¼Œæœ€é«˜$300ï¼‰","min":0,"ratio":"15åˆ† = 1é‡Œ | æ‰‹æ©Ÿæ”¯ä»˜: 4X (ä¸Šé™10kåˆ†/æœˆ) | Goå•†æˆ¶: 5X (ä¸Šé™10kåˆ†/æœˆ)","unit":"ç©åˆ†"},"rewardModules":["boc_go_base","boc_go_mobile","boc_go_merchant"],"trackers":[],"type":"unionpay"},"boc_sogo":{"currency":"CASH_Direct","fcf":0.0195,"id":"boc_sogo","name":"ä¸­éŠ€ Sogo Visa Signature","rewardModules":["boc_sogo_mobile_pay"],"trackers":[],"type":"visa"},"citi_cashback":{"currency":"CASH_Direct","fcf":0.0195,"id":"citi_cashback","name":"Citi Cash Back","rewardModules":["citi_cb_base","citi_cb_special"],"trackers":[],"type":"visa"},"citi_club":{"currency":"CLUB_PTS","fcf":0.0195,"id":"citi_club","name":"Citi The Club","rewardModules":["citi_club_base","citi_club_designated"],"trackers":[],"type":"master"},"citi_octopus":{"currency":"CASH_Direct","fcf":0.0195,"id":"citi_octopus","name":"Citi Octopus ç™½é‡‘","rewardModules":["citi_octopus_base","citi_octopus_transport","citi_octopus_tunnel"],"trackers":[],"type":"visa"},"citi_pm":{"currency":"CITI_PM_PTS","fcf":0.0195,"id":"citi_pm","name":"Citi PremierMiles","redemption":{"fee":"å…è²»","min":12000,"ratio":"12åˆ† = 1é‡Œ","unit":"ç©åˆ†"},"rewardModules":["citi_pm_base","citi_pm_overseas"],"trackers":[],"type":"master"},"citi_prestige":{"currency":"CITI_PM_PTS","fcf":0.0195,"id":"citi_prestige","name":"Citi Prestige","redemption":{"fee":"å…è²»","min":12000,"ratio":"12åˆ† = 1é‡Œ","unit":"ç©åˆ†"},"rewardModules":["citi_prestige_base","citi_prestige_overseas"],"trackers":[],"type":"master"},"citi_rewards":{"currency":"CITI_R_PTS","fcf":0.0195,"id":"citi_rewards","name":"Citi Rewards","redemption":{"fee":"HK$200/å…Œæ›","min":18000,"ratio":"15åˆ† = 1é‡Œ","unit":"ç©åˆ†"},"rewardModules":["citi_rewards_base","citi_rewards_mobile","citi_rewards_shopping"],"trackers":[],"type":"master"},"dbs_black":{"currency":"DBS_Dollar","fcf":0.0195,"id":"dbs_black","name":"DBS Black World","redemption":{"fee":"å…è²» (Blackå°ˆäº«)","min":0,"ratio":"DBS$48 = 1,000é‡Œ","unit":"DBS$"},"rewardModules":["dbs_black_overseas_promo","dbs_black_overseas_std","dbs_black_base"],"trackers":[],"type":"master"},"dbs_compass":{"currency":"COMPASS_Dollar","fcf":0.0195,"id":"dbs_compass","name":"DBS COMPASS VISA","redemption":{"fee":"HK$100/5,000é‡Œ","min":0,"ratio":"$100 CD = 1,000é‡Œ æˆ– $1 CD = $1","unit":"CD"},"rewardModules":["dbs_compass_grocery_wed","dbs_compass_ewallet","dbs_compass_base"],"trackers":[],"type":"visa"},"dbs_eminent":{"currency":"DBS_Dollar_Others","fcf":0.0195,"id":"dbs_eminent","name":"DBS Eminent Visa","redemption":{"fee":"HK$100/5,000é‡Œ","min":0,"ratio":"DBS$72 = 1,000é‡Œ æˆ– DBS$1 = $1","unit":"DBS$"},"rewardModules":["dbs_eminent_bonus","dbs_eminent_base"],"trackers":[],"type":"visa"},"dbs_live_fresh":{"currency":"DBS_Dollar_Others","fcf":0.0195,"id":"dbs_live_fresh","name":"DBS Live Fresh","redemption":{"fee":"HK$100/5,000é‡Œ","min":0,"ratio":"DBS$72 = 1,000é‡Œ æˆ– DBS$1 = $1","unit":"DBS$"},"rewardModules":["dbs_live_fresh_selected","dbs_live_fresh_online_foreign","dbs_live_fresh_base"],"trackers":[],"type":"master"},"earnmore":{"currency":"CASH_Direct","fcf":0,"id":"earnmore","name":"EarnMORE éŠ€è¯","rewardModules":["earnmore_base"],"trackers":[],"type":"unionpay"},"fubon_in_platinum":{"currency":"Fubon_Points","fcf":0.0195,"id":"fubon_in_platinum","name":"Fubon iN Visa Platinum","redemption":{"fee":"HK$50/5000é‡Œ","min":0,"ratio":"15åˆ† = 1é‡Œ | 250åˆ† = $1","unit":"ç©åˆ†"},"rewardModules":["fubon_in_base","fubon_in_online"],"trackers":[],"type":"visa"},"fubon_travel":{"currency":"Fubon_Points","fcf":0.0195,"id":"fubon_travel","name":"Fubon Platinum/Titanium","redemption":{"fee":"HK$50/5000é‡Œ","min":0,"ratio":"15åˆ† = 1é‡Œ | 20X = $1.33/é‡Œ","unit":"ç©åˆ†"},"rewardModules":["fubon_travel_base","fubon_travel_tw","fubon_travel_jpkr","fubon_travel_euro"],"trackers":[],"type":"master"},"hangseng_enjoy":{"currency":"YUU_Points","fcf":0.0195,"id":"hangseng_enjoy","name":"Hang Seng enJoy","redemption":{"fee":"å…è²»","min":0,"ratio":"200åˆ† = $1","unit":"YUU"},"rewardModules":["enjoy_base","enjoy_dining","enjoy_retail"],"trackers":[],"type":"visa"},"hangseng_mmpower":{"currency":"Fun_Dollars","fcf":0.0195,"id":"hangseng_mmpower","name":"Hang Seng MMPower","redemption":{"fee":"å…è²»","min":0,"ratio":"$1 +FUN = $1","unit":"+FUN Dollar"},"rewardModules":["hangseng_base","mmpower_overseas_bonus","mmpower_online_bonus","mmpower_selected_bonus"],"trackers":[],"type":"master"},"hangseng_travel_plus":{"currency":"Fun_Dollars","fcf":0.0195,"id":"hangseng_travel_plus","name":"Hang Seng Travel+","redemption":{"fee":"å…è²»","min":0,"ratio":"$1 +FUN = $1","unit":"+FUN Dollar"},"rewardModules":["hangseng_base","travel_plus_tier1_bonus","travel_plus_tier2_bonus","travel_plus_dining_bonus"],"trackers":[],"type":"visa"},"hangseng_university":{"currency":"Fun_Dollars","fcf":0.0195,"id":"hangseng_university","name":"Hang Seng University","redemption":{"fee":"å…è²»","min":0,"ratio":"$1 +FUN = $1","unit":"+FUN Dollar"},"rewardModules":["hangseng_base","university_tuition"],"trackers":[],"type":"visa"},"hsbc_easy":{"currency":"HSBC_RC","fcf":0.0195,"id":"hsbc_easy","last_verified_at":"2026-02-06","name":"HSBC Easy Card / ç™½é‡‘å¡","rewardModules":["hsbc_std_base","red_hot_variable","easy_moneyback_pns_watsons_6x","easy_moneyback_fortress_6x","easy_moneyback_bonus","travel_guru_v2"],"source_url":"https://www.hsbc.com.hk/content/dam/hsbc/hk/tc/docs/credit-cards/visa-platinum-card-exclusive-offers.pdf","trackers":["winter_tracker"],"type":"visa"},"hsbc_everymile":{"currency":"HSBC_RC_EM","fcf":0.0195,"id":"hsbc_everymile","last_verified_at":"2026-02-05","name":"HSBC EveryMile","redemption":{"fee":"å…è²»","min":40,"ratio":"1 RC = 20 é‡Œ","unit":"RC"},"rewardModules":["em_base","em_designated","em_grocery_low","em_overseas_bonus","travel_guru_v2"],"source_url":"https://www.hsbc.com.hk/content/dam/hsbc/hk/tc/docs/credit-cards/everymile/everymile-rewards-scheme-travel-benefits.pdf","trackers":["em_overseas_mission"],"type":"master"},"hsbc_gold":{"currency":"HSBC_RC","fcf":0.0195,"id":"hsbc_gold","name":"HSBC æ»™è²¡é‡‘å¡","rewardModules":["hsbc_std_base","red_hot_variable","travel_guru_v2"],"trackers":["winter_tracker"],"type":"visa"},"hsbc_gold_student":{"currency":"HSBC_RC","fcf":0.0195,"id":"hsbc_gold_student","last_verified_at":"2026-02-06","name":"HSBC æ»™è²¡é‡‘å¡ (å­¸ç”Ÿå¡)","rewardModules":["hsbc_std_base","red_hot_variable","student_tuition_bonus","travel_guru_v2"],"trackers":["winter_tracker"],"type":"visa"},"hsbc_premier":{"currency":"HSBC_RC","fcf":0.0195,"id":"hsbc_premier","name":"HSBC Premier (å“è¶Šç†è²¡)","rewardModules":["hsbc_std_base","red_hot_variable","travel_guru_v2"],"trackers":["winter_tracker"],"type":"master"},"hsbc_pulse":{"currency":"HSBC_RC","fcf":0,"fcf_exempt_categories":["overseas_cn","overseas_mo","china_consumption"],"id":"hsbc_pulse","last_verified_at":"2026-02-06","name":"HSBC Pulse éŠ€è¯é‘½çŸ³","note_zhhk":"ä¸­åœ‹å…§åœ°åŠæ¾³é–€å¤–å¹£æ‰‹çºŒè²»ç‚º0","rewardModules":["hsbc_std_base","red_hot_variable","pulse_china_bonus","travel_guru_v2"],"source_url":"https://www.hsbc.com.hk/content/dam/hsbc/hk/tc/docs/credit-cards/unionpay-dual-currency/diamond-card-terms-and-conditions.pdf","trackers":["winter_tracker"],"type":"unionpay"},"hsbc_red":{"currency":"HSBC_RC","fcf":0.0195,"id":"hsbc_red","last_verified_at":"2026-02-06","name":"HSBC Red Card","rewardModules":["red_base","red_online","red_designated_bonus","travel_guru_v2"],"source_url":"https://www.hsbc.com.hk/content/dam/hsbc/hk/tc/docs/credit-cards/reward-scheme-terms-and-conditions.pdf","trackers":["winter_tracker"],"type":"master"},"hsbc_unionpay_std":{"currency":"HSBC_RC","fcf":0,"fcf_exempt_categories":["overseas_cn","overseas_mo","china_consumption"],"id":"hsbc_unionpay_std","last_verified_at":"2026-02-06","name":"HSBC éŠ€è¯é›™å¹£","note_zhhk":"ä¸­åœ‹å…§åœ°åŠæ¾³é–€å¤–å¹£æ‰‹çºŒè²»ç‚º0","rewardModules":["hsbc_std_base","red_hot_variable","travel_guru_v2"],"trackers":["winter_tracker"],"type":"unionpay"},"hsbc_vs":{"currency":"HSBC_RC","fcf":0.0195,"id":"hsbc_vs","last_verified_at":"2026-02-05","name":"HSBC Visa Signature","redemption":{"fee":"å…è²»","min":40,"ratio":"1 RC = 10 é‡Œ","unit":"RC"},"rewardModules":["vs_base","vs_red_hot_bonus","red_hot_variable","travel_guru_v2"],"source_url":"https://www.hsbc.com.hk/content/dam/hsbc/hk/docs/credit-cards/visa-signature/special-reward-tnc.pdf","trackers":["winter_tracker"],"type":"visa"},"mox_credit":{"currency":"CASH_Direct","fcf":0.0195,"id":"mox_credit","name":"Mox Credit","rewardModules":["mox_base","mox_task_bonus","mox_supermarket"],"trackers":[],"type":"master"},"sc_cathay_priority":{"currency":"AM_Direct","fcf":0.0195,"id":"sc_cathay_priority","name":"æ¸£æ‰“åœ‹æ³° Mastercard (å„ªå…ˆç†è²¡)","rewardModules":["sc_cathay_base","sc_cathay_dining_hotel","sc_cathay_overseas_priority","sc_cathay_airlines"],"trackers":["sc_cathay_cxuo_tracker"],"type":"master"},"sc_cathay_private":{"currency":"AM_Direct","fcf":0.0195,"id":"sc_cathay_private","name":"æ¸£æ‰“åœ‹æ³° Mastercard (å„ªå…ˆç§äºº)","rewardModules":["sc_cathay_base","sc_cathay_dining_hotel","sc_cathay_overseas_private","sc_cathay_airlines"],"trackers":["sc_cathay_cxuo_tracker"],"type":"master"},"sc_cathay_std":{"currency":"AM_Direct","fcf":0.0195,"id":"sc_cathay_std","name":"æ¸£æ‰“åœ‹æ³° Mastercard","rewardModules":["sc_cathay_base","sc_cathay_dining_hotel","sc_cathay_overseas_std","sc_cathay_airlines"],"trackers":["sc_cathay_cxuo_tracker"],"type":"master"},"sc_simply_cash":{"currency":"CASH_Direct","fcf":0.0195,"id":"sc_simply_cash","name":"SC Simply Cash Visa","rewardModules":["sc_simply_cash_base","sc_simply_cash_foreign"],"trackers":[],"type":"visa"},"sc_smart":{"currency":"CASH_Direct","fcf":0,"id":"sc_smart","name":"SC Smart Card","rewardModules":["sc_smart_base","sc_smart_designated"],"trackers":[],"type":"visa"},"sim_credit":{"currency":"CASH_Direct","fcf":0.0195,"id":"sim_credit","name":"sim Credit Card","redemption":{"fee":"å…è²»","min":0,"ratio":"ç¶²è³¼ 8% (éœ€éç¶²è³¼$500)","unit":"ç¾é‡‘"},"rewardModules":["sim_base","sim_online"],"trackers":["sim_non_online_tracker"],"type":"master"},"wewa":{"currency":"CASH_Direct","fcf":0,"id":"wewa","name":"å®‰ä¿¡ WeWa UnionPay","redemption":{"fee":"å…è²»","min":0,"ratio":"æ—…éŠ/ä¸»é¡Œå…¬åœ’ 4%","unit":"ç¾é‡‘"},"rewardModules":["wewa_base","wewa_bonus","wewa_mobile_pay"],"trackers":["wewa_mobile_mission"],"type":"unionpay"}},"categories":{"airline":{"hidden":true,"label":"âœˆï¸ èˆªç©ºå…¬å¸"},"alipay":{"label":"ğŸ“± Alipay / WeChat Pay","order":9},"apparel":{"label":"ğŸ‘— æœé£¾/ç™¾è²¨ (Apparel/Dept)","order":16,"red_hot":"style"},"cathay_hkexpress":{"label":"âœˆï¸ CX/UO (HK Express)","order":106,"req":"[Function]"},"charity":{"hidden":true,"label":"â¤ï¸ æ…ˆå–„"},"chill_merchant":{"label":"ğŸŸï¸ Chill æŒ‡å®šå•†æˆ¶","order":108,"req":"boc_chill"},"china_consumption":{"hidden":true,"label":"ğŸ‡¨ğŸ‡³ ä¸­åœ‹/æ¾³é–€æ¶ˆè²»","parent":"overseas","red_hot":"world"},"citi_club_merchant":{"label":"ğŸ›ï¸ The Club æŒ‡å®šå•†æˆ¶ (4%)","order":107,"req":"citi_club"},"department_store":{"hidden":true,"label":"ğŸ¬ ç™¾è²¨å…¬å¸","red_hot":"style"},"dining":{"label":"ğŸ½ï¸ é¤é£² (Dining)","order":2,"red_hot":"dining"},"dining_enjoy":{"hidden":true,"label":"ğŸ½ï¸ enJoy æŒ‡å®šé¤é£²"},"electronics":{"label":"ğŸ”Œ é›»å™¨/é›»å­ç”¢å“","order":18,"red_hot":"home"},"em_designated_spend":{"label":"ğŸŒ EveryMile æŒ‡å®š ($2/é‡Œ)","order":104,"req":"hsbc_everymile"},"entertainment":{"label":"ğŸŸï¸ å¨›æ¨‚ (Entertainment)","order":15,"red_hot":"enjoyment"},"gas":{"hidden":true,"label":"â›½ æ²¹ç«™"},"general":{"label":"ä¸€èˆ¬ æœ¬åœ°é›¶å”® (Local Retail)","order":1},"go_merchant":{"label":"ğŸ›ï¸ Go æŒ‡å®šå•†æˆ¶","order":109,"req":"boc_go_diamond"},"grocery":{"label":"ğŸ§º è¶…å¸‚ (Grocery)","order":13,"red_hot":"home"},"gym":{"label":"ğŸ‹ï¸â€â™‚ï¸ å¥èº«/é‹å‹•","order":10},"health_beauty":{"label":"ğŸ’„ ç¾å®¹/è—¥å¦ (Beauty/Watsons)","order":17,"red_hot":"style"},"hotel":{"hidden":true,"label":"ğŸ¨ é…’åº—"},"live_fresh_selected":{"hidden":true,"label":"DBS Live Fresh Selected"},"medical":{"label":"ğŸ¥ é†«ç™‚/ä¿å¥","order":11},"moneyback_fortress":{"label":"ğŸ  æ˜“è³éŒ¢ï¼šè±æ¾¤","order":101,"red_hot":"home","req":"hsbc_easy"},"moneyback_merchant":{"hidden":true,"label":"ğŸ  æ˜“è³éŒ¢æŒ‡å®šå•†æˆ¶ï¼ˆèˆŠï¼‰","order":100,"red_hot":"home","req":"hsbc_easy"},"moneyback_pns_watsons":{"label":"ğŸ  æ˜“è³éŒ¢ï¼šç™¾ä½³/å±ˆè‡£æ°","order":100,"red_hot":"home","req":"hsbc_easy"},"nfc_payment":{"hidden":true,"label":"ğŸ“³ NFC/æ‰‹æ©Ÿæ”¯ä»˜"},"oepay":{"hidden":true,"label":"ğŸ’¬ O!Pay"},"online":{"hidden":true,"label":"ğŸ’» ç¶²ä¸Šè³¼ç‰© (Online)","order":3},"online_foreign":{"hidden":true,"label":"ğŸŒ ç¶²ä¸Šå¤–å¹£","parent":"overseas"},"other":{"hidden":true,"label":"â“ å…¶ä»–"},"overseas":{"hidden":true,"label":"ğŸŒ æµ·å¤– (æ¯é¡)","red_hot":"world"},"overseas_cn":{"label":"ğŸ‡¨ğŸ‡³ æµ·å¤– (ä¸­åœ‹)","order":6,"parent":"overseas","red_hot":"world"},"overseas_jkt":{"label":"ğŸ‡¯ğŸ‡µğŸ‡°ğŸ‡·ğŸ‡¹ğŸ‡­ æµ·å¤– (æ—¥éŸ“æ³°)","order":4,"parent":"overseas","red_hot":"world"},"overseas_jktt":{"hidden":true,"label":"ğŸ‡¯ğŸ‡µ æµ·å¤– (æ—¥æœ¬-èˆŠ)","parent":"overseas"},"overseas_mo":{"label":"ğŸ‡²ğŸ‡´ æµ·å¤– (æ¾³é–€)","order":7,"parent":"overseas","red_hot":"world"},"overseas_other":{"label":"ğŸŒ æµ·å¤– (å…¶ä»–)","order":8,"parent":"overseas","red_hot":"world"},"overseas_tw":{"label":"ğŸ‡¹ğŸ‡¼ æµ·å¤– (å°ç£)","order":5,"parent":"overseas","red_hot":"world"},"payme":{"hidden":true,"label":"ğŸ’¬ PayMe"},"red_designated":{"label":"ğŸŸ¥ Red æŒ‡å®šå•†æˆ¶ (8%)","order":103,"req":"hsbc_red"},"retail_enjoy":{"hidden":true,"label":"ğŸ›ï¸ enJoy æŒ‡å®šé›¶å”®"},"smart_designated":{"label":"ğŸ’³ Smart æŒ‡å®šå•†æˆ¶ (5%)","order":105,"req":"sc_smart"},"sportswear":{"hidden":true,"label":"ğŸ‘Ÿ é‹å‹•æœé£¾"},"streaming":{"hidden":true,"label":"ğŸ¬ ä¸²æµ/è¨‚é–±"},"supermarket":{"hidden":true,"label":"ğŸ›’ è¶…ç´šå¸‚å ´","red_hot":"home"},"telecom":{"label":"ğŸ“ é›»è¨Šç¹³è²»","order":19,"red_hot":"home"},"transport":{"label":"ğŸš‡ äº¤é€š (Transport)","order":12,"red_hot":"enjoyment"},"travel":{"label":"âœˆï¸ æ—…éŠ (Travel)","order":14,"red_hot":"enjoyment"},"travel_plus_tier1":{"hidden":true,"label":"âœˆï¸ Travel+ Tier1"},"tuition":{"label":"ğŸ“ å­¸è²»","order":102,"req":"hsbc_gold_student"},"wechat":{"hidden":true,"label":"ğŸ’¬ WeChat Pay"}},"modules":{"ae_blue_cash_base":{"desc":"å›è´ˆ 1.2%","rate":0.012,"type":"always"},"ae_explorer_base":{"desc":"åŸºæœ¬ 3X","rate":3,"type":"always"},"ae_explorer_overseas":{"desc":"æµ·å¤–/ç¶²ä¸Š/æ—…éŠ ($3.6/é‡Œ)","match":["overseas","online","travel","airline"],"mode":"replace","rate":0.272,"type":"category"},"ae_explorer_selected":{"cap_key":"ae_explorer_q_selected_cap","cap_limit":10000,"cap_mode":"spending","desc":"æŒ‡å®š +9X","match":["travel","cathay_hkexpress","online","entertainment","electronics"],"rate":9,"type":"category"},"ae_pcc_base":{"desc":"åŸºæœ¬ 1X","rate":1,"type":"always"},"ae_pcc_special":{"cap_key":"ae_pcc_double_cap","cap_limit":30000,"cap_mode":"reward","desc":"è¶…å¸‚/æ²¹ç«™ +5X","match":["grocery","gas"],"rate":5,"type":"category"},"ae_plat_base":{"desc":"Turbo 2X","rate":2,"type":"always"},"ae_plat_daily":{"cap_key":"ae_plat_daily_cap","cap_limit":15000,"cap_mode":"spending","desc":"æ—¥å¸¸ +7X","match":["grocery","department_store"],"rate":7,"type":"category"},"ae_plat_overseas":{"cap_key":"ae_plat_overseas_cap","cap_limit":15000,"cap_mode":"spending","desc":"æµ·å¤– +6X","match":["overseas"],"rate":6,"type":"category"},"ae_plat_travel":{"cap_key":"ae_plat_travel_cap","cap_limit":15000,"cap_mode":"spending","desc":"æ—…éŠ +7X","match":["travel","cathay_hkexpress"],"rate":7,"type":"category"},"aeon_waku_base":{"desc":"åŸºæœ¬ 0.5%","rate":0.005,"type":"always"},"aeon_waku_japan":{"cap_key":"aeon_waku_cap","cap_limit":300,"cap_mode":"reward","desc":"æ—¥æœ¬ +2.5% (3%)","match":["overseas_jktt"],"mode":"add","rate":0.025,"type":"category"},"aeon_waku_online":{"cap_key":"aeon_waku_cap","cap_limit":300,"cap_mode":"reward","desc":"ç¶²è³¼ +5.5% (6%)","match":["online"],"mode":"add","rate":0.055,"type":"category"},"bea_goal_base":{"desc":"åŸºæœ¬ 0.4%","rate":0.004,"type":"always"},"bea_goal_entertainment":{"cap":{"key":"bea_goal_cap","period":"month"},"cap_key":"bea_goal_cap","cap_limit":200,"cap_mode":"reward","desc":"å¨›æ¨‚ 5%","match":["entertainment"],"mode":"replace","rate":0.05,"req_mission_key":"bea_goal_mission","req_mission_spend":2000,"type":"category"},"bea_goal_online_mobile":{"cap":{"key":"bea_goal_mobile_cap","period":"month"},"cap_key":"bea_goal_mobile_cap","cap_limit":5000,"cap_mode":"spending","desc":"æ‰‹æ©Ÿæ”¯ä»˜ 4.4%","eligible_check":"[Function]","mode":"replace","rate":0.044,"req_mission_key":"bea_goal_mission","req_mission_spend":2000,"type":"category"},"bea_goal_travel_transport":{"cap":{"key":"bea_goal_cap","period":"month"},"cap_key":"bea_goal_cap","cap_limit":200,"cap_mode":"reward","desc":"æ—…éŠ/äº¤é€š 6%","match":["travel","transport"],"mode":"replace","rate":0.06,"req_mission_key":"bea_goal_mission","req_mission_spend":2000,"type":"category"},"bea_ititanium_base":{"desc":"åŸºæœ¬ 0.4%","rate":0.004,"type":"always"},"bea_ititanium_online_mobile":{"cap":{"key":"bea_ititanium_cap","period":"month"},"cap_key":"bea_ititanium_cap","cap_limit":300,"cap_mode":"reward","desc":"ç¶²è³¼/æ‰‹æ©Ÿæ”¯ä»˜ 3.6%","eligible_check":"[Function]","mode":"replace","rate":0.036,"req_mission_key":"bea_ititanium_mission","req_mission_spend":2000,"type":"category"},"bea_unionpay_base":{"desc":"åŸºæœ¬ 1X","rate":1,"type":"always"},"bea_unionpay_dining":{"cap":{"key":"bea_unionpay_cap","period":"month"},"cap_key":"bea_unionpay_cap","cap_limit":100000,"cap_mode":"reward","desc":"æœ¬åœ°é£Ÿè‚† 3X","match":["dining"],"mode":"replace","rate":3,"type":"category"},"bea_unionpay_fx":{"cap":{"key":"bea_unionpay_cap","period":"month"},"cap_key":"bea_unionpay_cap","cap_limit":100000,"cap_mode":"reward","desc":"å¤–å¹£ç°½è³¬ 10X","match":["overseas"],"mode":"replace","rate":10,"type":"category"},"bea_unionpay_local":{"cap":{"key":"bea_unionpay_cap","period":"month"},"cap_key":"bea_unionpay_cap","cap_limit":100000,"cap_mode":"reward","desc":"æœ¬åœ°é›¶å”® 2X","match":["general"],"mode":"replace","rate":2,"type":"category"},"bea_unionpay_rmb":{"cap":{"key":"bea_unionpay_cap","period":"month"},"cap_key":"bea_unionpay_cap","cap_limit":100000,"cap_mode":"reward","desc":"äººæ°‘å¹£ç°½è³¬ 12X","match":["overseas_cn"],"mode":"replace","rate":12,"type":"category"},"bea_world_base":{"desc":"åŸºæœ¬ 1X","rate":1,"type":"always"},"bea_world_bonus":{"cap":{"key":"bea_world_cap","period":"month"},"cap_key":"bea_world_cap","cap_limit":115000,"cap_mode":"reward","desc":"æŒ‡å®šé¡åˆ¥ 12.5X","match":["dining","overseas","online","electronics","apparel","gym","medical"],"mode":"replace","rate":12.5,"req_mission_key":"bea_world_mission","req_mission_spend":4000,"type":"category"},"boc_amazing_fly_cn":{"cap_key":"boc_amazing_fly_cn_cap","cap_limit":60000,"cap_mode":"reward","desc":"âœˆï¸ ç‹‚è³é£› - ä¸­æ¾³ (+12Xç©åˆ†)","match":["overseas_cn"],"rate":12,"req_mission_key":"spend_boc_cheers_vi","req_mission_spend":5000,"setting_key":"boc_amazing_enabled","type":"category"},"boc_amazing_fly_cn_vs":{"cap_key":"boc_amazing_fly_cn_cap","cap_limit":60000,"cap_mode":"reward","desc":"âœˆï¸ ç‹‚è³é£› - ä¸­æ¾³ (+12Xç©åˆ†)","match":["overseas_cn"],"rate":12,"req_mission_key":"spend_boc_cheers_vs","req_mission_spend":5000,"setting_key":"boc_amazing_enabled","type":"category"},"boc_amazing_fly_other":{"cap_key":"boc_amazing_fly_other_cap","cap_limit":60000,"cap_mode":"reward","desc":"âœˆï¸ ç‹‚è³é£› - å…¶ä»– (+6Xç©åˆ†)","match":["overseas_jkt","overseas_tw","overseas_other"],"rate":6,"req_mission_key":"spend_boc_cheers_vi","req_mission_spend":5000,"setting_key":"boc_amazing_enabled","type":"category"},"boc_amazing_fly_other_vs":{"cap_key":"boc_amazing_fly_other_cap","cap_limit":60000,"cap_mode":"reward","desc":"âœˆï¸ ç‹‚è³é£› - å…¶ä»– (+6Xç©åˆ†)","match":["overseas_jkt","overseas_tw","overseas_other"],"rate":6,"req_mission_key":"spend_boc_cheers_vs","req_mission_spend":5000,"setting_key":"boc_amazing_enabled","type":"category"},"boc_amazing_holiday":{"cap_key":"boc_amazing_local_holiday_cap","cap_limit":300,"cap_mode":"reward","desc":"ğŸ”¥ ç‹‚è³æ´¾ (ç´…æ—¥/æ˜ŸæœŸæ—¥ 5%)","match":["dining","travel","entertainment","telecom","medical","apparel","hotel"],"min_single_spend":500,"rate":0.05,"req_mission_key":"spend_boc_cheers_vi","req_mission_spend":5000,"setting_key":"boc_amazing_enabled","type":"category","valid_on_red_day":true},"boc_amazing_holiday_vs":{"cap_key":"boc_amazing_local_holiday_cap","cap_limit":300,"cap_mode":"reward","desc":"ğŸ”¥ ç‹‚è³æ´¾ (ç´…æ—¥/æ˜ŸæœŸæ—¥ 5%)","match":["dining","travel","entertainment","telecom","medical","apparel","hotel"],"min_single_spend":500,"rate":0.05,"req_mission_key":"spend_boc_cheers_vs","req_mission_spend":5000,"setting_key":"boc_amazing_enabled","type":"category","valid_on_red_day":true},"boc_amazing_online_holiday":{"cap_key":"boc_amazing_online_holiday_cap","cap_limit":200,"cap_mode":"reward","desc":"ğŸ”¥ ç‹‚è³æ´¾ç¶²è³¼ (ç´…æ—¥/æ˜ŸæœŸæ—¥ 5%)","match":["online"],"rate":0.05,"req_mission_key":"spend_boc_cheers_vi","req_mission_spend":5000,"setting_key":"boc_amazing_enabled","type":"category","valid_on_red_day":true},"boc_amazing_online_holiday_vs":{"cap_key":"boc_amazing_online_holiday_cap","cap_limit":200,"cap_mode":"reward","desc":"ğŸ”¥ ç‹‚è³æ´¾ç¶²è³¼ (ç´…æ—¥/æ˜ŸæœŸæ—¥ 5%)","match":["online"],"rate":0.05,"req_mission_key":"spend_boc_cheers_vs","req_mission_spend":5000,"setting_key":"boc_amazing_enabled","type":"category","valid_on_red_day":true},"boc_amazing_online_weekday":{"cap_key":"boc_amazing_online_weekday_cap","cap_limit":60,"cap_mode":"reward","desc":"ğŸ”¥ ç‹‚è³æ´¾ç¶²è³¼ (å¹³æ—¥ 2%)","match":["online"],"rate":0.02,"req_mission_key":"spend_boc_cheers_vi","req_mission_spend":5000,"setting_key":"boc_amazing_enabled","type":"category","valid_on_red_day":false},"boc_amazing_online_weekday_vs":{"cap_key":"boc_amazing_online_weekday_cap","cap_limit":60,"cap_mode":"reward","desc":"ğŸ”¥ ç‹‚è³æ´¾ç¶²è³¼ (å¹³æ—¥ 2%)","match":["online"],"rate":0.02,"req_mission_key":"spend_boc_cheers_vs","req_mission_spend":5000,"setting_key":"boc_amazing_enabled","type":"category","valid_on_red_day":false},"boc_amazing_weekday":{"cap_key":"boc_amazing_local_weekday_cap","cap_limit":120,"cap_mode":"reward","desc":"ğŸ”¥ ç‹‚è³æ´¾ (å¹³æ—¥ 2%)","match":["dining","travel","entertainment","telecom","medical","apparel","hotel"],"min_single_spend":500,"rate":0.02,"req_mission_key":"spend_boc_cheers_vi","req_mission_spend":5000,"setting_key":"boc_amazing_enabled","type":"category","valid_on_red_day":false},"boc_amazing_weekday_vs":{"cap_key":"boc_amazing_local_weekday_cap","cap_limit":120,"cap_mode":"reward","desc":"ğŸ”¥ ç‹‚è³æ´¾ (å¹³æ—¥ 2%)","match":["dining","travel","entertainment","telecom","medical","apparel","hotel"],"min_single_spend":500,"rate":0.02,"req_mission_key":"spend_boc_cheers_vs","req_mission_spend":5000,"setting_key":"boc_amazing_enabled","type":"category","valid_on_red_day":false},"boc_cheers_base":{"desc":"åŸºæœ¬ (1Xç©åˆ†)","rate":1,"type":"always"},"boc_cheers_dining":{"cap_key":"boc_cheers_dining_cap","cap_limit":100000,"cap_mode":"reward","desc":"é¤é£² 10Xç©åˆ†","match":["dining"],"mode":"replace","rate":10,"req_mission_key":"spend_boc_cheers_vi","req_mission_spend":5000,"secondary_cap_key":"boc_cheers_total_cap_vi","secondary_cap_limit":300000,"setting_key":"boc_amazing_enabled","type":"category"},"boc_cheers_dining_vs":{"cap_key":"boc_cheers_dining_cap_vs","cap_limit":60000,"cap_mode":"reward","desc":"é¤é£² 8Xç©åˆ†","match":["dining"],"mode":"replace","rate":8,"req_mission_key":"spend_boc_cheers_vs","req_mission_spend":5000,"secondary_cap_key":"boc_cheers_total_cap_vs","secondary_cap_limit":180000,"setting_key":"boc_amazing_enabled","type":"category"},"boc_cheers_overseas":{"cap_key":"boc_cheers_travel_cap","cap_limit":250000,"cap_mode":"reward","desc":"å¤–å¹£ +9Xç©åˆ†","match":["overseas"],"rate":9,"secondary_cap_key":"boc_cheers_total_cap_vi","secondary_cap_limit":300000,"type":"category"},"boc_cheers_overseas_vs":{"cap_key":"boc_cheers_travel_cap_vs","cap_limit":150000,"cap_mode":"reward","desc":"å¤–å¹£ +9Xç©åˆ†","match":["overseas"],"rate":9,"secondary_cap_key":"boc_cheers_total_cap_vs","secondary_cap_limit":180000,"type":"category"},"boc_cheers_travel":{"cap_key":"boc_cheers_travel_cap","cap_limit":250000,"cap_mode":"reward","desc":"æ—…éŠ 10Xç©åˆ†","match":["travel","cathay_hkexpress"],"mode":"replace","rate":10,"req_mission_key":"spend_boc_cheers_vi","req_mission_spend":5000,"secondary_cap_key":"boc_cheers_total_cap_vi","secondary_cap_limit":300000,"setting_key":"boc_amazing_enabled","type":"category"},"boc_cheers_travel_vs":{"cap_key":"boc_cheers_travel_cap_vs","cap_limit":150000,"cap_mode":"reward","desc":"æ—…éŠ 8Xç©åˆ†","match":["travel","cathay_hkexpress"],"mode":"replace","rate":8,"req_mission_key":"spend_boc_cheers_vs","req_mission_spend":5000,"secondary_cap_key":"boc_cheers_total_cap_vs","secondary_cap_limit":180000,"setting_key":"boc_amazing_enabled","type":"category"},"boc_chill_base":{"desc":"åŸºæœ¬ (0.5Xç©åˆ†)","rate":0.5,"type":"always"},"boc_chill_merchant":{"cap_key":"boc_chill_cap","cap_limit":15000,"cap_mode":"reward","desc":"Chillå•†æˆ¶ 10Xç©åˆ† (10%) âš ï¸ éœ€å¯¦é«”é›¶å”®$1,500","match":["chill_merchant"],"mode":"replace","rate":10,"req_mission_key":"spend_boc_chill","req_mission_spend":1500,"setting_key":"boc_amazing_enabled","type":"category"},"boc_chill_online_overseas":{"cap_key":"boc_chill_cap","cap_limit":15000,"cap_mode":"reward","desc":"ç¶²è³¼/æµ·å¤– 5Xç©åˆ† (5%)","match":["online","overseas"],"mode":"replace","rate":5,"type":"category"},"boc_go_base":{"desc":"åŸºæœ¬ (0.5Xç©åˆ†)","rate":0.5,"type":"always"},"boc_go_merchant":{"cap_key":"boc_go_merchant_cap","cap_limit":10000,"cap_mode":"reward","desc":"Goå•†æˆ¶ 5Xç©åˆ† (5%)","match":["go_merchant"],"mode":"replace","rate":5,"type":"category"},"boc_go_mobile":{"cap_key":"boc_go_mobile_cap","cap_limit":10000,"cap_mode":"reward","desc":"æ‰‹æ©Ÿæ”¯ä»˜ 4Xç©åˆ† (4%)","match":["alipay","wechat"],"mode":"replace","rate":4,"type":"category"},"boc_sogo_mobile_pay":{"cap":{"key":"boc_sogo_mobile_cap","period":"month"},"cap_key":"boc_sogo_mobile_cap","cap_limit":2000,"cap_mode":"reward","desc":"æ‰‹æ©Ÿæ”¯ä»˜ 5.4%","eligible_check":"[Function]","mode":"replace","rate":0.054,"type":"category"},"citi_cb_base":{"desc":"åŸºæœ¬ (1%)","rate":0.01,"type":"always"},"citi_cb_special":{"desc":"ç‰¹é¸é¡åˆ¥ (2%)","match":["dining","hotel","overseas"],"mode":"replace","rate":0.02,"type":"category"},"citi_club_base":{"desc":"åŸºæœ¬ 1%","rate":0.05,"type":"always"},"citi_club_designated":{"desc":"Clubå•†æˆ¶ 4%","match":["citi_club_merchant"],"mode":"replace","rate":0.2,"type":"category"},"citi_octopus_base":{"desc":"åŸºæœ¬ 0.5%","rate":0.005,"type":"always"},"citi_octopus_transport":{"cap_key":"citi_oct_transport_cap","cap_limit":2000,"desc":"äº¤é€š 15% (éœ€æœˆç°½$4k*)","match":["transport"],"mode":"replace","rate":0.15,"type":"category"},"citi_octopus_tunnel":{"desc":"éš§é“/æ³Šè»Š 5% (éœ€æœˆç°½$10k)","match":["transport"],"mode":"replace","rate":0.05,"type":"category"},"citi_pm_base":{"desc":"åŸºæœ¬ 1.5X ($8/é‡Œ)","rate":1.5,"type":"always"},"citi_pm_overseas":{"desc":"æµ·å¤– 3X ($4/é‡Œ)","match":["overseas"],"mode":"replace","rate":3,"type":"category"},"citi_prestige_base":{"desc":"åŸºæœ¬ 2X ($6/é‡Œ)","rate":2,"type":"always"},"citi_prestige_overseas":{"desc":"æµ·å¤– 3X ($4/é‡Œ)","match":["overseas"],"mode":"replace","rate":3,"type":"category"},"citi_rewards_base":{"desc":"åŸºæœ¬ 1Xç©åˆ†","rate":1,"type":"always"},"citi_rewards_mobile":{"desc":"æ‰‹æ©Ÿæ”¯ä»˜ 2.7X (HK$5.5/é‡Œ)","match":["dining","grocery","transport","telecom","general","moneyback_merchant","moneyback_pns_watsons","moneyback_fortress","smart_designated","citi_club_merchant"],"mode":"replace","rate":2.7,"type":"category"},"citi_rewards_shopping":{"desc":"è³¼ç‰©/å¨›æ¨‚ 8.1X (HK$1.85/é‡Œ!)","match":["department_store","apparel","entertainment"],"mode":"replace","rate":8.1,"type":"category"},"dbs_black_base":{"desc":"æœ¬åœ° ($6/é‡Œ)","rate":0.008,"type":"always"},"dbs_black_overseas_promo":{"desc":"æµ·å¤– ($2/é‡Œ)","match":["overseas"],"mode":"replace","rate":0.024,"req_mission_key":"spend_dbs_black","req_mission_spend":20000,"setting_key":"dbs_black_promo_enabled","type":"category"},"dbs_black_overseas_std":{"desc":"æµ·å¤– ($4/é‡Œ)","match":["overseas"],"mode":"replace","rate":0.012,"type":"category"},"dbs_compass_base":{"desc":"åŸºæœ¬ (0.4%)","rate":0.004,"type":"always"},"dbs_compass_ewallet":{"desc":"é›»å­éŒ¢åŒ… (3%)","match":["alipay","wechat"],"min_spend":300,"mode":"replace","rate":0.03,"type":"category"},"dbs_compass_grocery_wed":{"desc":"è¶…å¸‚ (8% åªé™é€±ä¸‰)","match":["grocery"],"min_spend":300,"mode":"replace","rate":0.08,"type":"category"},"dbs_eminent_base":{"cap_key":"dbs_eminent_base_cap","cap_limit":20000,"desc":"å…¶ä»–é›¶å”® (1%)","rate":0.01,"type":"always"},"dbs_eminent_bonus":{"cap_key":"dbs_eminent_bonus_cap","cap_limit":8000,"desc":"æŒ‡å®šé¡åˆ¥ (5%)","match":["dining","gym","sportswear","medical"],"min_spend":300,"mode":"replace","rate":0.05,"type":"category"},"dbs_live_fresh_base":{"desc":"åŸºæœ¬ (0.4%)","rate":0.004,"type":"always"},"dbs_live_fresh_online_foreign":{"desc":"ç¶²ä¸Šå¤–å¹£ (1%)","match":["overseas"],"mode":"replace","rate":0.01,"type":"category"},"dbs_live_fresh_selected":{"cap_key":"dbs_live_fresh_cap","cap_limit":150,"cap_mode":"reward","desc":"è‡ªé¸é¡åˆ¥ (5%) âš ï¸ åªé™ç¶²ä¸Š","match":["live_fresh_selected"],"min_spend":300,"mode":"replace","rate":0.05,"type":"category"},"earnmore_base":{"cap_key":"earnmore_annual_spend","cap_limit":150000,"cap_mode":"spending","desc":"å…¨ç·š 2%","rate":0.02,"type":"always"},"easy_moneyback_bonus":{"desc":"Easy Card æ˜“è³éŒ¢6å€ (2.4%)","last_verified_at":"2026-02-06","match":["moneyback_merchant"],"mode":"replace","note_zhhk":"åŸºæœ¬ã€Œæ˜“è³éŒ¢ã€çè³ç©åˆ†å³æ–¼ç™¾ä½³åŠå±ˆè‡£æ°ä½œæ¯æ¸¯å¹£ 5 å…ƒç°½è³¬ç›¸ç­‰æ–¼ 1ã€Œæ˜“è³éŒ¢ã€ç©åˆ†æˆ–æ–¼è±æ¾¤ä½œ\næ¯æ¸¯å¹£ 10 å…ƒç°½è³¬ç›¸ç­‰æ–¼ 1ã€Œæ˜“è³éŒ¢ã€ç©åˆ†;6 å€ã€Œæ˜“è³éŒ¢ã€çè³ç©åˆ†å³æ–¼ç™¾ä½³åŠå±ˆè‡£æ°ä½œæ¯æ¸¯å¹£ 5 å…ƒ\nç°½è³¬ç›¸ç­‰æ–¼ 6ã€Œæ˜“è³éŒ¢ã€ ç©åˆ†æˆ–æ–¼è±æ¾¤ä½œæ¯æ¸¯å¹£ 10 å…ƒç°½è³¬ç›¸ç­‰æ–¼ 6ã€Œæ˜“è³éŒ¢ã€ç©åˆ†;è€Œ 4 å€ã€Œæ˜“è³éŒ¢\nã€çè³ç©åˆ†å³æ–¼ç™¾ä½³åŠå±ˆè‡£æ°ä½œæ¯æ¸¯å¹£ 5 å…ƒç°½è³¬ç›¸ç­‰æ–¼ 4ã€Œæ˜“è³éŒ¢ã€ç©åˆ†æˆ–æ–¼è±æ¾¤ä½œæ¯æ¸¯å¹£ 10 å…ƒç°½\nè³¬ç›¸ç­‰æ–¼ 4ã€Œæ˜“è³éŒ¢ã€ç©åˆ†ã€‚æœ‰é—œã€Œæ˜“è³éŒ¢ã€ç©åˆ†çš„æ¢æ¬¾åŠç´°å‰‡è«‹åƒé–±ã€Œæ˜“è³éŒ¢ã€ç¶²é ","promo_end":"2026-12-31","rate":0.024,"type":"category","valid_from":"2025-05-19","valid_to":"2026-12-31"},"easy_moneyback_fortress_6x":{"desc":"æ˜“è³éŒ¢ï¼šè±æ¾¤ 6å€ (1.2%)","match":["moneyback_fortress"],"mode":"replace","rate":0.012,"type":"category"},"easy_moneyback_pns_watsons_6x":{"desc":"æ˜“è³éŒ¢ï¼šç™¾ä½³/å±ˆè‡£æ° 6å€ (2.4%)","match":["moneyback_pns_watsons"],"mode":"replace","rate":0.024,"type":"category"},"em_base":{"desc":"åŸºæœ¬ (1%)","last_verified_at":"2026-02-05","rate":0.01,"type":"always"},"em_designated":{"desc":"EveryMile æŒ‡å®šå•†æˆ¶ (2.5%)","last_verified_at":"2026-02-05","match":["streaming","em_designated_spend"],"mode":"replace","rate":0.025,"source_url":"https://www.hsbc.com.hk/content/dam/hsbc/hk/docs/credit-cards/everymile/everymile-everyday-spend.pdf","type":"category"},"em_grocery_low":{"desc":"EveryMile è¶…å¸‚ (0.4%)","last_verified_at":"2026-02-05","match":["grocery"],"mode":"replace","rate":0.004,"type":"category"},"em_overseas_bonus":{"cap_key":"em_promo_cap","cap_limit":225,"cap_mode":"reward","desc":"EveryMile å¤–å¹£ç°½å¸³å„ªæƒ  (1.5%)","last_verified_at":"2026-02-05","match":["overseas"],"mode":"add","progress_mission_key":"em_q1_eligible","rate":0.015,"req_mission_key":"em_q1_total","req_mission_spend":12000,"setting_key":"em_promo_enabled","type":"category"},"enjoy_base":{"desc":"åŸºæœ¬ (0.5%)","rate":0.005,"type":"always"},"enjoy_dining":{"desc":"æŒ‡å®šé£Ÿè‚† (+1.5%)","match":["dining_enjoy"],"rate":0.015,"type":"category"},"enjoy_retail":{"desc":"æŒ‡å®šé›¶å”® (+1%)","match":["retail_enjoy"],"rate":0.01,"type":"category"},"fubon_in_base":{"desc":"åŸºæœ¬ 1X (0.4%)","rate":1,"type":"always"},"fubon_in_online":{"cap_key":"fubon_in_bonus_cap","cap_limit":62500,"cap_mode":"reward","desc":"ç¶²è³¼ +19X (8%)","match":["online"],"mode":"add","rate":19,"req_mission_key":"spend_fubon_in_platinum","req_mission_spend":1000,"setting_key":"fubon_in_promo_enabled","type":"category"},"fubon_travel_base":{"desc":"åŸºæœ¬ 1X","rate":1,"type":"always"},"fubon_travel_euro":{"desc":"æ­ç¾ +4X (5X)","match":["overseas_other"],"mode":"add","rate":4,"type":"category"},"fubon_travel_jpkr":{"desc":"æ—¥éŸ“æ³° +9X (10X)","match":["overseas_jkt"],"mode":"add","rate":9,"type":"category"},"fubon_travel_tw":{"desc":"å°ç£ +19X (20X)","match":["overseas_tw"],"mode":"add","rate":19,"type":"category"},"hangseng_base":{"desc":"åŸºæœ¬ (0.4%)","rate":0.004,"type":"always"},"hsbc_std_base":{"desc":"åŸºæœ¬ (0.4%)","last_verified_at":"2026-02-06","rate":0.004,"type":"always"},"mmpower_online_bonus":{"cap_key":"mmpower_reward_cap","cap_limit":500,"cap_mode":"reward","desc":"MMP+ç¶²è³¼ (4.6%)","match":["online"],"mode":"add","rate":0.046,"req_mission_key":"spend_hangseng_mmpower","req_mission_spend":5000,"setting_key":"mmpower_promo_enabled","type":"category"},"mmpower_overseas_bonus":{"cap_key":"mmpower_reward_cap","cap_limit":500,"cap_mode":"reward","desc":"MMP+æµ·å¤– (5.6%)","match":["overseas"],"mode":"add","rate":0.056,"req_mission_key":"spend_hangseng_mmpower","req_mission_spend":5000,"setting_key":"mmpower_promo_enabled","type":"category"},"mmpower_selected_bonus":{"cap_key":"mmpower_reward_cap","cap_limit":500,"cap_mode":"reward","desc":"MMP+è‡ªé¸ (0.6%)","match":["dining","electronics","entertainment"],"mode":"add","rate":0.006,"req_mission_key":"spend_hangseng_mmpower","req_mission_spend":5000,"setting_key":"mmpower_promo_enabled","type":"category"},"mox_base":{"desc":"åŸºæœ¬ 1%","rate":0.01,"type":"always"},"mox_supermarket":{"desc":"è¶…å¸‚ 3%","match":["grocery","supermarket"],"mode":"replace","rate":0.03,"type":"category"},"mox_task_bonus":{"desc":"+1% (æ´»æœŸä»»å‹™)","mode":"add","rate":0.01,"setting_key":"mox_deposit_task_enabled","type":"always"},"pulse_china_bonus":{"cap_key":"pulse_china_bonus_cap","cap_limit":80000,"cap_mode":"spending","desc":"ä¸­åœ‹å…§åœ°/æ¾³é–€æµå‹•æ”¯ä»˜ (2%)","eligible_check":"[Function]","last_verified_at":"2026-02-06","match":["china_consumption"],"mode":"add","note_zhhk":"è¦æ‰‹æ©Ÿæ”¯ä»˜!!!","promo_end":"2026-06-30","rate":0.02,"type":"category","valid_from":"2026-01-01","valid_to":"2026-06-30"},"red_base":{"desc":"åŸºæœ¬ (0.4%)","last_verified_at":"2026-02-05","rate":0.004,"type":"always"},"red_designated_bonus":{"cap":{"key":"red_designated_cap","period":"month"},"cap_key":"red_designated_cap","cap_limit":100,"cap_mode":"reward","desc":"Red Card æŒ‡å®šå•†æˆ¶ (7.6%)","last_verified_at":"2026-02-05","match":["red_designated"],"promo_end":"2026-03-31","rate":0.076,"type":"category","valid_from":"2025-09-01","valid_to":"2026-03-31"},"red_hot_variable":{"cap":{"period":{"startDay":1,"startMonth":1,"type":"year"}},"cap_key":"red_hot_variable_cap","cap_limit":2000,"cap_mode":"reward","desc":"HSBC æœ€ç´…è‡ªä¸»çè³","last_verified_at":"2026-02-05","promo_end":"2026-12-31","rate_per_x":0.004,"setting_key":"red_hot_rewards_enabled","source_url":"https://www.hsbc.com.hk/content/dam/hsbc/hk/tc/docs/credit-cards/rewards/2026-red-hot-rewards-of-your-choice-terms-and-conditions.pdf, https://www.hsbc.com.hk/zh-hk/credit-cards/rewards/your-choice/#3","type":"red_hot_allocation","valid_from":"2026-01-01","valid_to":"2026-12-31"},"red_online":{"cap":{"key":"red_online_cap","period":"month"},"cap_key":"red_online_cap","cap_limit":400,"cap_mode":"reward","desc":"Red Card ç¶²ä¸Šè³¼ç‰© (3.6%)","last_verified_at":"2026-02-05","match":["online"],"mode":"replace","promo_end":"2026-03-31","rate":0.04,"type":"category","valid_from":"2025-09-01","valid_to":"2026-03-31"},"sc_cathay_airlines":{"cap":{"key":"sc_cathay_cxuo_bonus_cap","period":{"startDay":1,"startMonth":1,"type":"quarter"}},"cap_key":"sc_cathay_cxuo_bonus_cap","cap_limit":2667,"cap_mode":"reward","desc":"æ¸£æ‰“åœ‹æ³°Mastercard åœ‹æ³°/é¦™æ¸¯å¿«é‹é¡å¤–é‡Œæ•¸","match":["cathay_hkexpress"],"mode":"add","promo_end":"2026-06-30","rate":0.333375,"req_mission_key":"sc_cathay_cxuo_spend","req_mission_spend":8000,"type":"category","valid_from":"2026-01-01","valid_to":"2026-06-30"},"sc_cathay_base":{"desc":"åŸºæœ¬ $6/é‡Œ","rate":0.16666666666666666,"type":"always"},"sc_cathay_dining_hotel":{"desc":"é£Ÿè‚†/é…’åº— $4/é‡Œ","match":["dining","hotel"],"mode":"replace","rate":0.25,"type":"category"},"sc_cathay_overseas_priority":{"desc":"å„ªå…ˆç†è²¡: æµ·å¤– $3/é‡Œ","match":["overseas"],"mode":"replace","rate":0.3333333333333333,"type":"category"},"sc_cathay_overseas_private":{"desc":"Private: Overseas $2/mi","match":["overseas"],"mode":"replace","rate":0.5,"type":"category"},"sc_cathay_overseas_std":{"desc":"æµ·å¤– $4/é‡Œ","match":["overseas"],"mode":"replace","rate":0.25,"type":"category"},"sc_cathay_private":{"desc":"å„ªå…ˆç§äºº: æµ·å¤– $2/é‡Œ","match":["overseas"],"mode":"replace","rate":0.5,"type":"category"},"sc_simply_cash_base":{"desc":"æœ¬åœ° 1.5%","rate":0.015,"type":"always"},"sc_simply_cash_foreign":{"desc":"å¤–å¹£ 2%","match":["overseas"],"mode":"replace","rate":0.02,"type":"category"},"sc_smart_base":{"desc":"åŸºæœ¬ 0.55%","rate":0.0055,"type":"always"},"sc_smart_designated":{"cap_key":"sc_smart_cap","cap_limit":60000,"desc":"æŒ‡å®šå•†æˆ¶ 5%","match":["smart_designated"],"mode":"replace","rate":0.05,"type":"category"},"sim_base":{"desc":"åŸºæœ¬ 0.4%","rate":0.004,"type":"always"},"sim_online":{"cap_key":"sim_online_cap","cap_limit":200,"cap_mode":"reward","desc":"ç¶²è³¼ +7.6% (8%)","match":["online"],"mode":"add","rate":0.076,"req_mission_key":"sim_non_online_spend","req_mission_spend":500,"setting_key":"sim_promo_enabled","type":"category"},"student_tuition_bonus":{"cap_key":"student_tuition_cap","cap_limit":200,"cap_mode":"reward","desc":"å­¸ç”Ÿå¡å­¸è²»å›è´ˆ (2.4%)","last_verified_at":"2026-02-06","match":["tuition"],"promo_end":"2026-03-31","rate":0.024,"source_url":"https://www.hsbc.com.hk/content/dam/hsbc/hk/docs/credit-cards/tc/tuition-fee-payment-tcs1.pdf","type":"category","valid_from":"2025-10-01","valid_to":"2026-03-31"},"travel_guru_v2":{"category":"overseas","config":{"1":{"cap_rc":500,"desc":"GOç´š (+3%)","rate":0.03},"2":{"cap_rc":1200,"desc":"GINGç´š (+4%)","rate":0.04},"3":{"cap_rc":2200,"desc":"GURUç´š (+6%)","rate":0.06}},"last_verified_at":"2026-02-05","type":"guru_capped","usage_key":"guru_rc_used"},"travel_plus_dining_bonus":{"cap_key":"travel_plus_reward_cap","cap_limit":500,"cap_mode":"reward","desc":"T+é¤é£² (4.6%)","match":["dining"],"mode":"add","rate":0.046,"req_mission_key":"spend_hangseng_travel_plus","req_mission_spend":6000,"setting_key":"travel_plus_promo_enabled","type":"category"},"travel_plus_tier1_bonus":{"cap_key":"travel_plus_reward_cap","cap_limit":500,"cap_mode":"reward","desc":"T+æŒ‡å®šå¤–å¹£ (6.6%)","match":["travel_plus_tier1"],"mode":"add","rate":0.066,"req_mission_key":"spend_hangseng_travel_plus","req_mission_spend":6000,"setting_key":"travel_plus_promo_enabled","type":"category"},"travel_plus_tier2_bonus":{"cap_key":"travel_plus_reward_cap","cap_limit":500,"cap_mode":"reward","desc":"T+å…¶ä»–å¤–å¹£ (4.6%)","match":["overseas"],"mode":"add","rate":0.046,"req_mission_key":"spend_hangseng_travel_plus","req_mission_spend":6000,"setting_key":"travel_plus_promo_enabled","type":"category"},"university_tuition":{"cap_key":"university_tuition_cap","cap_limit":8333,"desc":"å¤§å­¸å­¸è²» (2%)","match":["tuition"],"rate":0.02,"type":"category"},"vs_base":{"desc":"åŸºæœ¬ (0.4%)","last_verified_at":"2026-02-06","rate":0.004,"type":"always"},"vs_red_hot_bonus":{"cap_key":"vs_red_hot_bonus_cap","cap_limit":100000,"cap_mode":"spending","desc":"Visa Signature ç‰¹åˆ¥çè³ (1.2%)","last_verified_at":"2026-02-05","multiplier":3,"promo_end":"2026-12-31","rate_per_x":0.004,"type":"red_hot_fixed_bonus","valid_from":"2026-01-01","valid_to":"2026-12-31"},"wewa_base":{"desc":"åŸºæœ¬ 0.4%","rate":0.004,"type":"always"},"wewa_bonus":{"cap_key":"wewa_annual_cap","cap_limit":2000,"cap_mode":"reward","desc":"æ—…éŠ/ç©æ¨‚ +3.6% (4%)","match":["travel","entertainment","apparel"],"mode":"add","rate":0.036,"type":"category"},"wewa_mobile_pay":{"cap":{"key":"wewa_mobile_pay_cap","period":"month"},"cap_key":"wewa_mobile_pay_cap","cap_limit":5556,"cap_mode":"spending","desc":"æ‰‹æ©Ÿæ”¯ä»˜ 4%","eligible_check":"[Function]","mode":"replace","rate":0.04,"req_mission_key":"wewa_mobile_mission","req_mission_spend":1500,"type":"category"}},"trackers":{"bea_goal_mission":{"counter":{"key":"bea_goal_mission","period":"month"},"desc":"BEA GOAL æœˆç°½é–€æª»","mission_id":"bea_goal","req_mission_key":"bea_goal_mission","type":"mission_tracker"},"bea_ititanium_mission":{"counter":{"key":"bea_ititanium_mission","period":"month"},"desc":"BEA i-Titanium æœˆç°½é–€æª»","mission_id":"bea_ititanium","req_mission_key":"bea_ititanium_mission","type":"mission_tracker"},"bea_world_mission":{"counter":{"key":"bea_world_mission","period":"month"},"desc":"BEA World æœˆç°½é–€æª»","mission_id":"bea_world","req_mission_key":"bea_world_mission","type":"mission_tracker"},"em_overseas_mission":{"desc":"ğŸŒ EveryMile å¤–å¹£ç°½å¸³å„ªæƒ ","effects_on_eligible":[{"amount":"tx_amount","key":"em_q1_eligible"}],"effects_on_match":[{"amount":"tx_amount","key":"em_q1_total"}],"match":["overseas"],"mission_id":"em_promo","promo_end":"2026-03-31","setting_key":"em_promo_enabled","type":"mission_tracker","valid_to":"2026-03-31"},"sc_cathay_cxuo_tracker":{"counter":{"key":"sc_cathay_cxuo_spend","period":{"startDay":1,"startMonth":1,"type":"quarter"}},"desc":"âœˆï¸ CX/UO ç´¯ç©ç°½è³¬","effects_on_eligible":[{"amount":"tx_amount","key":"sc_cathay_cxuo_spend"}],"hide_in_equation":true,"match":["cathay_hkexpress"],"mission_id":"sc_cathay_cxuo_bonus","promo_end":"2026-06-30","type":"mission_tracker","valid_from":"2026-01-01","valid_to":"2026-06-30"},"sim_non_online_tracker":{"desc":"Sim Credit éç¶²è³¼ ($500)","eligible_check":"[Function]","match":["general","dining","nfc_payment","overseas","alipay","wechat","payme","oepay","grocery","sportswear","medical","transport","travel","entertainment","apparel","health_beauty","telecom","other","moneyback_merchant","moneyback_pns_watsons","moneyback_fortress","tuition","chill_merchant","go_merchant"],"mission_id":"sim_non_online","req_mission_key":"sim_non_online_spend","type":"mission_tracker"},"wewa_mobile_mission":{"counter":{"key":"wewa_mobile_mission","period":"month"},"desc":"WeWa æ¯æœˆç°½è³¬é–€æª»","eligible_check":"[Function]","mission_id":"wewa_mobile","req_mission_key":"wewa_mobile_mission","type":"mission_tracker"},"winter_tracker":{"desc":"â„ï¸ æœ€ç´…å†¬æ—¥è³","effects_on_eligible":[{"amount":"tx_amount","key":"winter_total"},{"amount":"tx_amount","key":"winter_eligible"}],"eligible_check":"[Function]","match":["dining","overseas"],"mission_id":"winter_promo","promo_end":"2026-02-28","setting_key":"winter_promo_enabled","type":"mission_tracker","valid_to":"2026-02-28"}}}},"offers":[{"cards":["boc_cheers_vi","boc_cheers_vs"],"editBucket":"campaigns","editId":"boc_amazing","id":"boc_amazing","moduleRefs":["boc_amazing_weekday","boc_amazing_holiday","boc_amazing_online_weekday","boc_amazing_online_holiday"],"offerType":"mission_multi_cap","renderType":"campaign_sections","sections":5,"settingKey":"boc_amazing_enabled","sourceType":"campaign","title":"ç‹‚è³æ´¾"},{"cards":["boc_cheers_vi","boc_cheers_vs"],"editBucket":"campaigns","editId":"boc_amazing_fly","id":"boc_amazing_fly","moduleRefs":["boc_amazing_fly_cn","boc_amazing_fly_cn_vs","boc_amazing_fly_other"],"offerType":"mission_multi_cap","renderType":"campaign_sections","sections":3,"settingKey":"boc_amazing_enabled","sourceType":"campaign","title":"ç‹‚è³é£› (å¤–å¹£) å­£åº¦ä»»å‹™"},{"cards":["dbs_black"],"editBucket":"campaigns","editId":"dbs_black_promo","id":"dbs_black_promo","moduleRefs":["dbs_black_overseas_promo"],"offerType":"mission_uncapped","renderType":"campaign_sections","sections":2,"settingKey":"dbs_black_promo_enabled","sourceType":"campaign","title":"DBS Black $2/é‡Œæ¨å»£"},{"cards":["hsbc_everymile"],"editBucket":"campaigns","editId":"em_promo","id":"em_promo","moduleRefs":["em_overseas_bonus"],"offerType":"mission_cap_rate","renderType":"campaign_sections","sections":2,"settingKey":"em_promo_enabled","sourceType":"campaign","title":"EveryMile å¤–å¹£ç°½å¸³å„ªæƒ "},{"cards":["fubon_in_platinum"],"editBucket":"campaigns","editId":"fubon_in_promo","id":"fubon_in_promo","moduleRefs":["fubon_in_online"],"offerType":"mission_cap","renderType":"campaign_sections","sections":2,"settingKey":"fubon_in_promo_enabled","sourceType":"campaign","title":"Fubon iN ç¶²è³¼20X"},{"cards":["hangseng_mmpower"],"editBucket":"campaigns","editId":"mmpower_promo","id":"mmpower_promo","moduleRefs":["mmpower_overseas_bonus"],"offerType":"mission_cap","renderType":"campaign_sections","sections":2,"settingKey":"mmpower_promo_enabled","sourceType":"campaign","title":"MMPower +FUN Dollars"},{"cards":["ae_blue_cash"],"editBucket":"modules","editId":"ae_blue_cash_base","id":"rule:ae_blue_cash_base","moduleRefs":["ae_blue_cash_base"],"offerType":"module_rule","renderType":"engine_only","sections":0,"settingKey":"","sourceType":"module_rule","title":"å›è´ˆ 1.2%"},{"cards":["ae_explorer"],"editBucket":"modules","editId":"ae_explorer_base","id":"rule:ae_explorer_base","moduleRefs":["ae_explorer_base"],"offerType":"module_rule","renderType":"engine_only","sections":0,"settingKey":"","sourceType":"module_rule","title":"åŸºæœ¬ 3X"},{"cards":["ae_explorer"],"editBucket":"modules","editId":"ae_explorer_overseas","id":"rule:ae_explorer_overseas","moduleRefs":["ae_explorer_overseas"],"offerType":"module_rule","renderType":"engine_only","sections":0,"settingKey":"","sourceType":"module_rule","title":"æµ·å¤–/ç¶²ä¸Š/æ—…éŠ ($3.6/é‡Œ)"},{"cards":["ae_explorer"],"editBucket":"modules","editId":"ae_explorer_selected","id":"rule:ae_explorer_selected","moduleRefs":["ae_explorer_selected"],"offerType":"module_rule","renderType":"engine_only","sections":0,"settingKey":"","sourceType":"module_rule","title":"æŒ‡å®š +9X"},{"cards":["ae_platinum_credit"],"editBucket":"modules","editId":"ae_pcc_base","id":"rule:ae_pcc_base","moduleRefs":["ae_pcc_base"],"offerType":"module_rule","renderType":"engine_only","sections":0,"settingKey":"","sourceType":"module_rule","title":"åŸºæœ¬ 1X"},{"cards":["ae_platinum_credit"],"editBucket":"modules","editId":"ae_pcc_special","id":"rule:ae_pcc_special","moduleRefs":["ae_pcc_special"],"offerType":"module_rule","renderType":"engine_only","sections":0,"settingKey":"","sourceType":"module_rule","title":"è¶…å¸‚/æ²¹ç«™ +5X"},{"cards":["ae_platinum"],"editBucket":"modules","editId":"ae_plat_base","id":"rule:ae_plat_base","moduleRefs":["ae_plat_base"],"offerType":"module_rule","renderType":"engine_only","sections":0,"settingKey":"","sourceType":"module_rule","title":"Turbo 2X"},{"cards":["ae_platinum"],"editBucket":"modules","editId":"ae_plat_daily","id":"rule:ae_plat_daily","moduleRefs":["ae_plat_daily"],"offerType":"module_rule","renderType":"engine_only","sections":0,"settingKey":"","sourceType":"module_rule","title":"æ—¥å¸¸ +7X"},{"cards":["ae_platinum"],"editBucket":"modules","editId":"ae_plat_overseas","id":"rule:ae_plat_overseas","moduleRefs":["ae_plat_overseas"],"offerType":"module_rule","renderType":"engine_only","sections":0,"settingKey":"","sourceType":"module_rule","title":"æµ·å¤– +6X"},{"cards":["ae_platinum"],"editBucket":"modules","editId":"ae_plat_travel","id":"rule:ae_plat_travel","moduleRefs":["ae_plat_travel"],"offerType":"module_rule","renderType":"engine_only","sections":0,"settingKey":"","sourceType":"module_rule","title":"æ—…éŠ +7X"},{"cards":["aeon_wakuwaku"],"editBucket":"modules","editId":"aeon_waku_base","id":"rule:aeon_waku_base","moduleRefs":["aeon_waku_base"],"offerType":"module_rule","renderType":"engine_only","sections":0,"settingKey":"","sourceType":"module_rule","title":"åŸºæœ¬ 0.5%"},{"cards":["aeon_wakuwaku"],"editBucket":"modules","editId":"aeon_waku_japan","id":"rule:aeon_waku_japan","moduleRefs":["aeon_waku_japan"],"offerType":"module_rule","renderType":"engine_only","sections":0,"settingKey":"","sourceType":"module_rule","title":"æ—¥æœ¬ +2.5% (3%)"},{"cards":["aeon_wakuwaku"],"editBucket":"modules","editId":"aeon_waku_online","id":"rule:aeon_waku_online","moduleRefs":["aeon_waku_online"],"offerType":"module_rule","renderType":"engine_only","sections":0,"settingKey":"","sourceType":"module_rule","title":"ç¶²è³¼ +5.5% (6%)"},{"cards":["bea_goal"],"editBucket":"modules","editId":"bea_goal_base","id":"rule:bea_goal_base","moduleRefs":["bea_goal_base"],"offerType":"module_rule","renderType":"engine_only","sections":0,"settingKey":"","sourceType":"module_rule","title":"åŸºæœ¬ 0.4%"},{"cards":["bea_goal"],"editBucket":"modules","editId":"bea_goal_entertainment","id":"rule:bea_goal_entertainment","moduleRefs":["bea_goal_entertainment"],"offerType":"module_rule","renderType":"engine_only","sections":0,"settingKey":"","sourceType":"module_rule","title":"å¨›æ¨‚ 5%"},{"cards":["bea_goal"],"editBucket":"modules","editId":"bea_goal_online_mobile","id":"rule:bea_goal_online_mobile","moduleRefs":["bea_goal_online_mobile"],"offerType":"module_rule","renderType":"engine_only","sections":0,"settingKey":"","sourceType":"module_rule","title":"æ‰‹æ©Ÿæ”¯ä»˜ 4.4%"},{"cards":["bea_goal"],"editBucket":"modules","editId":"bea_goal_travel_transport","id":"rule:bea_goal_travel_transport","moduleRefs":["bea_goal_travel_transport"],"offerType":"module_rule","renderType":"engine_only","sections":0,"settingKey":"","sourceType":"module_rule","title":"æ—…éŠ/äº¤é€š 6%"},{"cards":["bea_ititanium"],"editBucket":"modules","editId":"bea_ititanium_base","id":"rule:bea_ititanium_base","moduleRefs":["bea_ititanium_base"],"offerType":"module_rule","renderType":"engine_only","sections":0,"settingKey":"","sourceType":"module_rule","title":"åŸºæœ¬ 0.4%"},{"cards":["bea_ititanium"],"editBucket":"modules","editId":"bea_ititanium_online_mobile","id":"rule:bea_ititanium_online_mobile","moduleRefs":["bea_ititanium_online_mobile"],"offerType":"module_rule","renderType":"engine_only","sections":0,"settingKey":"","sourceType":"module_rule","title":"ç¶²è³¼/æ‰‹æ©Ÿæ”¯ä»˜ 3.6%"},{"cards":["bea_unionpay_diamond"],"editBucket":"modules","editId":"bea_unionpay_base","id":"rule:bea_unionpay_base","moduleRefs":["bea_unionpay_base"],"offerType":"module_rule","renderType":"engine_only","sections":0,"settingKey":"","sourceType":"module_rule","title":"åŸºæœ¬ 1X"},{"cards":["bea_unionpay_diamond"],"editBucket":"modules","editId":"bea_unionpay_dining","id":"rule:bea_unionpay_dining","moduleRefs":["bea_unionpay_dining"],"offerType":"module_rule","renderType":"engine_only","sections":0,"settingKey":"","sourceType":"module_rule","title":"æœ¬åœ°é£Ÿè‚† 3X"},{"cards":["bea_unionpay_diamond"],"editBucket":"modules","editId":"bea_unionpay_fx","id":"rule:bea_unionpay_fx","moduleRefs":["bea_unionpay_fx"],"offerType":"module_rule","renderType":"engine_only","sections":0,"settingKey":"","sourceType":"module_rule","title":"å¤–å¹£ç°½è³¬ 10X"},{"cards":["bea_unionpay_diamond"],"editBucket":"modules","editId":"bea_unionpay_local","id":"rule:bea_unionpay_local","moduleRefs":["bea_unionpay_local"],"offerType":"module_rule","renderType":"engine_only","sections":0,"settingKey":"","sourceType":"module_rule","title":"æœ¬åœ°é›¶å”® 2X"},{"cards":["bea_unionpay_diamond"],"editBucket":"modules","editId":"bea_unionpay_rmb","id":"rule:bea_unionpay_rmb","moduleRefs":["bea_unionpay_rmb"],"offerType":"module_rule","renderType":"engine_only","sections":0,"settingKey":"","sourceType":"module_rule","title":"äººæ°‘å¹£ç°½è³¬ 12X"},{"cards":["bea_world","bea_world_privilege"],"editBucket":"modules","editId":"bea_world_base","id":"rule:bea_world_base","moduleRefs":["bea_world_base"],"offerType":"module_rule","renderType":"engine_only","sections":0,"settingKey":"","sourceType":"module_rule","title":"åŸºæœ¬ 1X"},{"cards":["bea_world","bea_world_privilege"],"editBucket":"modules","editId":"bea_world_bonus","id":"rule:bea_world_bonus","moduleRefs":["bea_world_bonus"],"offerType":"module_rule","renderType":"engine_only","sections":0,"settingKey":"","sourceType":"module_rule","title":"æŒ‡å®šé¡åˆ¥ 12.5X"},{"cards":["boc_cheers_vi"],"editBucket":"modules","editId":"boc_amazing_fly_cn","id":"rule:boc_amazing_fly_cn","moduleRefs":["boc_amazing_fly_cn"],"offerType":"module_rule","renderType":"engine_only","sections":0,"settingKey":"boc_amazing_enabled","sourceType":"module_rule","title":"âœˆï¸ ç‹‚è³é£› - ä¸­æ¾³ (+12Xç©åˆ†)"},{"cards":["boc_cheers_vs"],"editBucket":"modules","editId":"boc_amazing_fly_cn_vs","id":"rule:boc_amazing_fly_cn_vs","moduleRefs":["boc_amazing_fly_cn_vs"],"offerType":"module_rule","renderType":"engine_only","sections":0,"settingKey":"boc_amazing_enabled","sourceType":"module_rule","title":"âœˆï¸ ç‹‚è³é£› - ä¸­æ¾³ (+12Xç©åˆ†)"},{"cards":["boc_cheers_vi"],"editBucket":"modules","editId":"boc_amazing_fly_other","id":"rule:boc_amazing_fly_other","moduleRefs":["boc_amazing_fly_other"],"offerType":"module_rule","renderType":"engine_only","sections":0,"settingKey":"boc_amazing_enabled","sourceType":"module_rule","title":"âœˆï¸ ç‹‚è³é£› - å…¶ä»– (+6Xç©åˆ†)"},{"cards":["boc_cheers_vs"],"editBucket":"modules","editId":"boc_amazing_fly_other_vs","id":"rule:boc_amazing_fly_other_vs","moduleRefs":["boc_amazing_fly_other_vs"],"offerType":"module_rule","renderType":"engine_only","sections":0,"settingKey":"boc_amazing_enabled","sourceType":"module_rule","title":"âœˆï¸ ç‹‚è³é£› - å…¶ä»– (+6Xç©åˆ†)"},{"cards":["boc_cheers_vi"],"editBucket":"modules","editId":"boc_amazing_holiday","id":"rule:boc_amazing_holiday","moduleRefs":["boc_amazing_holiday"],"offerType":"module_rule","renderType":"engine_only","sections":0,"settingKey":"boc_amazing_enabled","sourceType":"module_rule","title":"ğŸ”¥ ç‹‚è³æ´¾ (ç´…æ—¥/æ˜ŸæœŸæ—¥ 5%)"},{"cards":["boc_cheers_vs"],"editBucket":"modules","editId":"boc_amazing_holiday_vs","id":"rule:boc_amazing_holiday_vs","moduleRefs":["boc_amazing_holiday_vs"],"offerType":"module_rule","renderType":"engine_only","sections":0,"settingKey":"boc_amazing_enabled","sourceType":"module_rule","title":"ğŸ”¥ ç‹‚è³æ´¾ (ç´…æ—¥/æ˜ŸæœŸæ—¥ 5%)"},{"cards":["boc_cheers_vi"],"editBucket":"modules","editId":"boc_amazing_online_holiday","id":"rule:boc_amazing_online_holiday","moduleRefs":["boc_amazing_online_holiday"],"offerType":"module_rule","renderType":"engine_only","sections":0,"settingKey":"boc_amazing_enabled","sourceType":"module_rule","title":"ğŸ”¥ ç‹‚è³æ´¾ç¶²è³¼ (ç´…æ—¥/æ˜ŸæœŸæ—¥ 5%)"},{"cards":["boc_cheers_vs"],"editBucket":"modules","editId":"boc_amazing_online_holiday_vs","id":"rule:boc_amazing_online_holiday_vs","moduleRefs":["boc_amazing_online_holiday_vs"],"offerType":"module_rule","renderType":"engine_only","sections":0,"settingKey":"boc_amazing_enabled","sourceType":"module_rule","title":"ğŸ”¥ ç‹‚è³æ´¾ç¶²è³¼ (ç´…æ—¥/æ˜ŸæœŸæ—¥ 5%)"},{"cards":["boc_cheers_vi"],"editBucket":"modules","editId":"boc_amazing_online_weekday","id":"rule:boc_amazing_online_weekday","moduleRefs":["boc_amazing_online_weekday"],"offerType":"module_rule","renderType":"engine_only","sections":0,"settingKey":"boc_amazing_enabled","sourceType":"module_rule","title":"ğŸ”¥ ç‹‚è³æ´¾ç¶²è³¼ (å¹³æ—¥ 2%)"},{"cards":["boc_cheers_vs"],"editBucket":"modules","editId":"boc_amazing_online_weekday_vs","id":"rule:boc_amazing_online_weekday_vs","moduleRefs":["boc_amazing_online_weekday_vs"],"offerType":"module_rule","renderType":"engine_only","sections":0,"settingKey":"boc_amazing_enabled","sourceType":"module_rule","title":"ğŸ”¥ ç‹‚è³æ´¾ç¶²è³¼ (å¹³æ—¥ 2%)"},{"cards":["boc_cheers_vi"],"editBucket":"modules","editId":"boc_amazing_weekday","id":"rule:boc_amazing_weekday","moduleRefs":["boc_amazing_weekday"],"offerType":"module_rule","renderType":"engine_only","sections":0,"settingKey":"boc_amazing_enabled","sourceType":"module_rule","title":"ğŸ”¥ ç‹‚è³æ´¾ (å¹³æ—¥ 2%)"},{"cards":["boc_cheers_vs"],"editBucket":"modules","editId":"boc_amazing_weekday_vs","id":"rule:boc_amazing_weekday_vs","moduleRefs":["boc_amazing_weekday_vs"],"offerType":"module_rule","renderType":"engine_only","sections":0,"settingKey":"boc_amazing_enabled","sourceType":"module_rule","title":"ğŸ”¥ ç‹‚è³æ´¾ (å¹³æ—¥ 2%)"},{"cards":["boc_cheers_vi","boc_cheers_vs"],"editBucket":"modules","editId":"boc_cheers_base","id":"rule:boc_cheers_base","moduleRefs":["boc_cheers_base"],"offerType":"module_rule","renderType":"engine_only","sections":0,"settingKey":"","sourceType":"module_rule","title":"åŸºæœ¬ (1Xç©åˆ†)"},{"cards":["boc_cheers_vi"],"editBucket":"modules","editId":"boc_cheers_dining","id":"rule:boc_cheers_dining","moduleRefs":["boc_cheers_dining"],"offerType":"module_rule","renderType":"engine_only","sections":0,"settingKey":"boc_amazing_enabled","sourceType":"module_rule","title":"é¤é£² 10Xç©åˆ†"},{"cards":["boc_cheers_vs"],"editBucket":"modules","editId":"boc_cheers_dining_vs","id":"rule:boc_cheers_dining_vs","moduleRefs":["boc_cheers_dining_vs"],"offerType":"module_rule","renderType":"engine_only","sections":0,"settingKey":"boc_amazing_enabled","sourceType":"module_rule","title":"é¤é£² 8Xç©åˆ†"},{"cards":["boc_cheers_vi"],"editBucket":"modules","editId":"boc_cheers_overseas","id":"rule:boc_cheers_overseas","moduleRefs":["boc_cheers_overseas"],"offerType":"module_rule","renderType":"engine_only","sections":0,"settingKey":"","sourceType":"module_rule","title":"å¤–å¹£ +9Xç©åˆ†"},{"cards":["boc_cheers_vs"],"editBucket":"modules","editId":"boc_cheers_overseas_vs","id":"rule:boc_cheers_overseas_vs","moduleRefs":["boc_cheers_overseas_vs"],"offerType":"module_rule","renderType":"engine_only","sections":0,"settingKey":"","sourceType":"module_rule","title":"å¤–å¹£ +9Xç©åˆ†"},{"cards":["boc_cheers_vi"],"editBucket":"modules","editId":"boc_cheers_travel","id":"rule:boc_cheers_travel","moduleRefs":["boc_cheers_travel"],"offerType":"module_rule","renderType":"engine_only","sections":0,"settingKey":"boc_amazing_enabled","sourceType":"module_rule","title":"æ—…éŠ 10Xç©åˆ†"},{"cards":["boc_cheers_vs"],"editBucket":"modules","editId":"boc_cheers_travel_vs","id":"rule:boc_cheers_travel_vs","moduleRefs":["boc_cheers_travel_vs"],"offerType":"module_rule","renderType":"engine_only","sections":0,"settingKey":"boc_amazing_enabled","sourceType":"module_rule","title":"æ—…éŠ 8Xç©åˆ†"},{"cards":["boc_chill"],"editBucket":"modules","editId":"boc_chill_base","id":"rule:boc_chill_base","moduleRefs":["boc_chill_base"],"offerType":"module_rule","renderType":"engine_only","sections":0,"settingKey":"","sourceType":"module_rule","title":"åŸºæœ¬ (0.5Xç©åˆ†)"},{"cards":["boc_chill"],"editBucket":"modules","editId":"boc_chill_merchant","id":"rule:boc_chill_merchant","moduleRefs":["boc_chill_merchant"],"offerType":"module_rule","renderType":"engine_only","sections":0,"settingKey":"boc_amazing_enabled","sourceType":"module_rule","title":"Chillå•†æˆ¶ 10Xç©åˆ† (10%) âš ï¸ éœ€å¯¦é«”é›¶å”®$1,500"},{"cards":["boc_chill"],"editBucket":"modules","editId":"boc_chill_online_overseas","id":"rule:boc_chill_online_overseas","moduleRefs":["boc_chill_online_overseas"],"offerType":"module_rule","renderType":"engine_only","sections":0,"settingKey":"","sourceType":"module_rule","title":"ç¶²è³¼/æµ·å¤– 5Xç©åˆ† (5%)"},{"cards":["boc_go_diamond"],"editBucket":"modules","editId":"boc_go_base","id":"rule:boc_go_base","moduleRefs":["boc_go_base"],"offerType":"module_rule","renderType":"engine_only","sections":0,"settingKey":"","sourceType":"module_rule","title":"åŸºæœ¬ (0.5Xç©åˆ†)"},{"cards":["boc_go_diamond"],"editBucket":"modules","editId":"boc_go_merchant","id":"rule:boc_go_merchant","moduleRefs":["boc_go_merchant"],"offerType":"module_rule","renderType":"engine_only","sections":0,"settingKey":"","sourceType":"module_rule","title":"Goå•†æˆ¶ 5Xç©åˆ† (5%)"},{"cards":["boc_go_diamond"],"editBucket":"modules","editId":"boc_go_mobile","id":"rule:boc_go_mobile","moduleRefs":["boc_go_mobile"],"offerType":"module_rule","renderType":"engine_only","sections":0,"settingKey":"","sourceType":"module_rule","title":"æ‰‹æ©Ÿæ”¯ä»˜ 4Xç©åˆ† (4%)"},{"cards":["boc_sogo"],"editBucket":"modules","editId":"boc_sogo_mobile_pay","id":"rule:boc_sogo_mobile_pay","moduleRefs":["boc_sogo_mobile_pay"],"offerType":"module_rule","renderType":"engine_only","sections":0,"settingKey":"","sourceType":"module_rule","title":"æ‰‹æ©Ÿæ”¯ä»˜ 5.4%"},{"cards":["citi_cashback"],"editBucket":"modules","editId":"citi_cb_base","id":"rule:citi_cb_base","moduleRefs":["citi_cb_base"],"offerType":"module_rule","renderType":"engine_only","sections":0,"settingKey":"","sourceType":"module_rule","title":"åŸºæœ¬ (1%)"},{"cards":["citi_cashback"],"editBucket":"modules","editId":"citi_cb_special","id":"rule:citi_cb_special","moduleRefs":["citi_cb_special"],"offerType":"module_rule","renderType":"engine_only","sections":0,"settingKey":"","sourceType":"module_rule","title":"ç‰¹é¸é¡åˆ¥ (2%)"},{"cards":["citi_club"],"editBucket":"modules","editId":"citi_club_base","id":"rule:citi_club_base","moduleRefs":["citi_club_base"],"offerType":"module_rule","renderType":"engine_only","sections":0,"settingKey":"","sourceType":"module_rule","title":"åŸºæœ¬ 1%"},{"cards":["citi_club"],"editBucket":"modules","editId":"citi_club_designated","id":"rule:citi_club_designated","moduleRefs":["citi_club_designated"],"offerType":"module_rule","renderType":"engine_only","sections":0,"settingKey":"","sourceType":"module_rule","title":"Clubå•†æˆ¶ 4%"},{"cards":["citi_octopus"],"editBucket":"modules","editId":"citi_octopus_base","id":"rule:citi_octopus_base","moduleRefs":["citi_octopus_base"],"offerType":"module_rule","renderType":"engine_only","sections":0,"settingKey":"","sourceType":"module_rule","title":"åŸºæœ¬ 0.5%"},{"cards":["citi_octopus"],"editBucket":"modules","editId":"citi_octopus_transport","id":"rule:citi_octopus_transport","moduleRefs":["citi_octopus_transport"],"offerType":"module_rule","renderType":"engine_only","sections":0,"settingKey":"","sourceType":"module_rule","title":"äº¤é€š 15% (éœ€æœˆç°½$4k*)"},{"cards":["citi_octopus"],"editBucket":"modules","editId":"citi_octopus_tunnel","id":"rule:citi_octopus_tunnel","moduleRefs":["citi_octopus_tunnel"],"offerType":"module_rule","renderType":"engine_only","sections":0,"settingKey":"","sourceType":"module_rule","title":"éš§é“/æ³Šè»Š 5% (éœ€æœˆç°½$10k)"},{"cards":["citi_pm"],"editBucket":"modules","editId":"citi_pm_base","id":"rule:citi_pm_base","moduleRefs":["citi_pm_base"],"offerType":"module_rule","renderType":"engine_only","sections":0,"settingKey":"","sourceType":"module_rule","title":"åŸºæœ¬ 1.5X ($8/é‡Œ)"},{"cards":["citi_pm"],"editBucket":"modules","editId":"citi_pm_overseas","id":"rule:citi_pm_overseas","moduleRefs":["citi_pm_overseas"],"offerType":"module_rule","renderType":"engine_only","sections":0,"settingKey":"","sourceType":"module_rule","title":"æµ·å¤– 3X ($4/é‡Œ)"},{"cards":["citi_prestige"],"editBucket":"modules","editId":"citi_prestige_base","id":"rule:citi_prestige_base","moduleRefs":["citi_prestige_base"],"offerType":"module_rule","renderType":"engine_only","sections":0,"settingKey":"","sourceType":"module_rule","title":"åŸºæœ¬ 2X ($6/é‡Œ)"},{"cards":["citi_prestige"],"editBucket":"modules","editId":"citi_prestige_overseas","id":"rule:citi_prestige_overseas","moduleRefs":["citi_prestige_overseas"],"offerType":"module_rule","renderType":"engine_only","sections":0,"settingKey":"","sourceType":"module_rule","title":"æµ·å¤– 3X ($4/é‡Œ)"},{"cards":["citi_rewards"],"editBucket":"modules","editId":"citi_rewards_base","id":"rule:citi_rewards_base","moduleRefs":["citi_rewards_base"],"offerType":"module_rule","renderType":"engine_only","sections":0,"settingKey":"","sourceType":"module_rule","title":"åŸºæœ¬ 1Xç©åˆ†"},{"cards":["citi_rewards"],"editBucket":"modules","editId":"citi_rewards_mobile","id":"rule:citi_rewards_mobile","moduleRefs":["citi_rewards_mobile"],"offerType":"module_rule","renderType":"engine_only","sections":0,"settingKey":"","sourceType":"module_rule","title":"æ‰‹æ©Ÿæ”¯ä»˜ 2.7X (HK$5.5/é‡Œ)"},{"cards":["citi_rewards"],"editBucket":"modules","editId":"citi_rewards_shopping","id":"rule:citi_rewards_shopping","moduleRefs":["citi_rewards_shopping"],"offerType":"module_rule","renderType":"engine_only","sections":0,"settingKey":"","sourceType":"module_rule","title":"è³¼ç‰©/å¨›æ¨‚ 8.1X (HK$1.85/é‡Œ!)"},{"cards":["dbs_black"],"editBucket":"modules","editId":"dbs_black_base","id":"rule:dbs_black_base","moduleRefs":["dbs_black_base"],"offerType":"module_rule","renderType":"engine_only","sections":0,"settingKey":"","sourceType":"module_rule","title":"æœ¬åœ° ($6/é‡Œ)"},{"cards":["dbs_black"],"editBucket":"modules","editId":"dbs_black_overseas_promo","id":"rule:dbs_black_overseas_promo","moduleRefs":["dbs_black_overseas_promo"],"offerType":"module_rule","renderType":"engine_only","sections":0,"settingKey":"dbs_black_promo_enabled","sourceType":"module_rule","title":"æµ·å¤– ($2/é‡Œ)"},{"cards":["dbs_black"],"editBucket":"modules","editId":"dbs_black_overseas_std","id":"rule:dbs_black_overseas_std","moduleRefs":["dbs_black_overseas_std"],"offerType":"module_rule","renderType":"engine_only","sections":0,"settingKey":"","sourceType":"module_rule","title":"æµ·å¤– ($4/é‡Œ)"},{"cards":["dbs_compass"],"editBucket":"modules","editId":"dbs_compass_base","id":"rule:dbs_compass_base","moduleRefs":["dbs_compass_base"],"offerType":"module_rule","renderType":"engine_only","sections":0,"settingKey":"","sourceType":"module_rule","title":"åŸºæœ¬ (0.4%)"},{"cards":["dbs_compass"],"editBucket":"modules","editId":"dbs_compass_ewallet","id":"rule:dbs_compass_ewallet","moduleRefs":["dbs_compass_ewallet"],"offerType":"module_rule","renderType":"engine_only","sections":0,"settingKey":"","sourceType":"module_rule","title":"é›»å­éŒ¢åŒ… (3%)"},{"cards":["dbs_compass"],"editBucket":"modules","editId":"dbs_compass_grocery_wed","id":"rule:dbs_compass_grocery_wed","moduleRefs":["dbs_compass_grocery_wed"],"offerType":"module_rule","renderType":"engine_only","sections":0,"settingKey":"","sourceType":"module_rule","title":"è¶…å¸‚ (8% åªé™é€±ä¸‰)"},{"cards":["dbs_eminent"],"editBucket":"modules","editId":"dbs_eminent_base","id":"rule:dbs_eminent_base","moduleRefs":["dbs_eminent_base"],"offerType":"module_rule","renderType":"engine_only","sections":0,"settingKey":"","sourceType":"module_rule","title":"å…¶ä»–é›¶å”® (1%)"},{"cards":["dbs_eminent"],"editBucket":"modules","editId":"dbs_eminent_bonus","id":"rule:dbs_eminent_bonus","moduleRefs":["dbs_eminent_bonus"],"offerType":"module_rule","renderType":"engine_only","sections":0,"settingKey":"","sourceType":"module_rule","title":"æŒ‡å®šé¡åˆ¥ (5%)"},{"cards":["dbs_live_fresh"],"editBucket":"modules","editId":"dbs_live_fresh_base","id":"rule:dbs_live_fresh_base","moduleRefs":["dbs_live_fresh_base"],"offerType":"module_rule","renderType":"engine_only","sections":0,"settingKey":"","sourceType":"module_rule","title":"åŸºæœ¬ (0.4%)"},{"cards":["dbs_live_fresh"],"editBucket":"modules","editId":"dbs_live_fresh_online_foreign","id":"rule:dbs_live_fresh_online_foreign","moduleRefs":["dbs_live_fresh_online_foreign"],"offerType":"module_rule","renderType":"engine_only","sections":0,"settingKey":"","sourceType":"module_rule","title":"ç¶²ä¸Šå¤–å¹£ (1%)"},{"cards":["dbs_live_fresh"],"editBucket":"modules","editId":"dbs_live_fresh_selected","id":"rule:dbs_live_fresh_selected","moduleRefs":["dbs_live_fresh_selected"],"offerType":"module_rule","renderType":"engine_only","sections":0,"settingKey":"","sourceType":"module_rule","title":"è‡ªé¸é¡åˆ¥ (5%) âš ï¸ åªé™ç¶²ä¸Š"},{"cards":["earnmore"],"editBucket":"modules","editId":"earnmore_base","id":"rule:earnmore_base","moduleRefs":["earnmore_base"],"offerType":"module_rule","renderType":"engine_only","sections":0,"settingKey":"","sourceType":"module_rule","title":"å…¨ç·š 2%"},{"cards":["hsbc_easy"],"editBucket":"modules","editId":"easy_moneyback_bonus","id":"rule:easy_moneyback_bonus","moduleRefs":["easy_moneyback_bonus"],"offerType":"module_rule","renderType":"engine_only","sections":0,"settingKey":"","sourceType":"module_rule","title":"Easy Card æ˜“è³éŒ¢6å€ (2.4%)"},{"cards":["hsbc_easy"],"editBucket":"modules","editId":"easy_moneyback_fortress_6x","id":"rule:easy_moneyback_fortress_6x","moduleRefs":["easy_moneyback_fortress_6x"],"offerType":"module_rule","renderType":"engine_only","sections":0,"settingKey":"","sourceType":"module_rule","title":"æ˜“è³éŒ¢ï¼šè±æ¾¤ 6å€ (1.2%)"},{"cards":["hsbc_easy"],"editBucket":"modules","editId":"easy_moneyback_pns_watsons_6x","id":"rule:easy_moneyback_pns_watsons_6x","moduleRefs":["easy_moneyback_pns_watsons_6x"],"offerType":"module_rule","renderType":"engine_only","sections":0,"settingKey":"","sourceType":"module_rule","title":"æ˜“è³éŒ¢ï¼šç™¾ä½³/å±ˆè‡£æ° 6å€ (2.4%)"},{"cards":["hsbc_everymile"],"editBucket":"modules","editId":"em_base","id":"rule:em_base","moduleRefs":["em_base"],"offerType":"module_rule","renderType":"engine_only","sections":0,"settingKey":"","sourceType":"module_rule","title":"åŸºæœ¬ (1%)"},{"cards":["hsbc_everymile"],"editBucket":"modules","editId":"em_designated","id":"rule:em_designated","moduleRefs":["em_designated"],"offerType":"module_rule","renderType":"engine_only","sections":0,"settingKey":"","sourceType":"module_rule","title":"EveryMile æŒ‡å®šå•†æˆ¶ (2.5%)"},{"cards":["hsbc_everymile"],"editBucket":"modules","editId":"em_grocery_low","id":"rule:em_grocery_low","moduleRefs":["em_grocery_low"],"offerType":"module_rule","renderType":"engine_only","sections":0,"settingKey":"","sourceType":"module_rule","title":"EveryMile è¶…å¸‚ (0.4%)"},{"cards":["hsbc_everymile"],"editBucket":"modules","editId":"em_overseas_bonus","id":"rule:em_overseas_bonus","moduleRefs":["em_overseas_bonus"],"offerType":"module_rule","renderType":"engine_only","sections":0,"settingKey":"em_promo_enabled","sourceType":"module_rule","title":"EveryMile å¤–å¹£ç°½å¸³å„ªæƒ  (1.5%)"},{"cards":["hangseng_enjoy"],"editBucket":"modules","editId":"enjoy_base","id":"rule:enjoy_base","moduleRefs":["enjoy_base"],"offerType":"module_rule","renderType":"engine_only","sections":0,"settingKey":"","sourceType":"module_rule","title":"åŸºæœ¬ (0.5%)"},{"cards":["hangseng_enjoy"],"editBucket":"modules","editId":"enjoy_dining","id":"rule:enjoy_dining","moduleRefs":["enjoy_dining"],"offerType":"module_rule","renderType":"engine_only","sections":0,"settingKey":"","sourceType":"module_rule","title":"æŒ‡å®šé£Ÿè‚† (+1.5%)"},{"cards":["hangseng_enjoy"],"editBucket":"modules","editId":"enjoy_retail","id":"rule:enjoy_retail","moduleRefs":["enjoy_retail"],"offerType":"module_rule","renderType":"engine_only","sections":0,"settingKey":"","sourceType":"module_rule","title":"æŒ‡å®šé›¶å”® (+1%)"},{"cards":["fubon_in_platinum"],"editBucket":"modules","editId":"fubon_in_base","id":"rule:fubon_in_base","moduleRefs":["fubon_in_base"],"offerType":"module_rule","renderType":"engine_only","sections":0,"settingKey":"","sourceType":"module_rule","title":"åŸºæœ¬ 1X (0.4%)"},{"cards":["fubon_in_platinum"],"editBucket":"modules","editId":"fubon_in_online","id":"rule:fubon_in_online","moduleRefs":["fubon_in_online"],"offerType":"module_rule","renderType":"engine_only","sections":0,"settingKey":"fubon_in_promo_enabled","sourceType":"module_rule","title":"ç¶²è³¼ +19X (8%)"},{"cards":["fubon_travel"],"editBucket":"modules","editId":"fubon_travel_base","id":"rule:fubon_travel_base","moduleRefs":["fubon_travel_base"],"offerType":"module_rule","renderType":"engine_only","sections":0,"settingKey":"","sourceType":"module_rule","title":"åŸºæœ¬ 1X"},{"cards":["fubon_travel"],"editBucket":"modules","editId":"fubon_travel_euro","id":"rule:fubon_travel_euro","moduleRefs":["fubon_travel_euro"],"offerType":"module_rule","renderType":"engine_only","sections":0,"settingKey":"","sourceType":"module_rule","title":"æ­ç¾ +4X (5X)"},{"cards":["fubon_travel"],"editBucket":"modules","editId":"fubon_travel_jpkr","id":"rule:fubon_travel_jpkr","moduleRefs":["fubon_travel_jpkr"],"offerType":"module_rule","renderType":"engine_only","sections":0,"settingKey":"","sourceType":"module_rule","title":"æ—¥éŸ“æ³° +9X (10X)"},{"cards":["fubon_travel"],"editBucket":"modules","editId":"fubon_travel_tw","id":"rule:fubon_travel_tw","moduleRefs":["fubon_travel_tw"],"offerType":"module_rule","renderType":"engine_only","sections":0,"settingKey":"","sourceType":"module_rule","title":"å°ç£ +19X (20X)"},{"cards":["hangseng_mmpower","hangseng_travel_plus","hangseng_university"],"editBucket":"modules","editId":"hangseng_base","id":"rule:hangseng_base","moduleRefs":["hangseng_base"],"offerType":"module_rule","renderType":"engine_only","sections":0,"settingKey":"","sourceType":"module_rule","title":"åŸºæœ¬ (0.4%)"},{"cards":["hsbc_easy","hsbc_gold","hsbc_gold_student","hsbc_premier","hsbc_pulse","hsbc_unionpay_std"],"editBucket":"modules","editId":"hsbc_std_base","id":"rule:hsbc_std_base","moduleRefs":["hsbc_std_base"],"offerType":"module_rule","renderType":"engine_only","sections":0,"settingKey":"","sourceType":"module_rule","title":"åŸºæœ¬ (0.4%)"},{"cards":["hangseng_mmpower"],"editBucket":"modules","editId":"mmpower_online_bonus","id":"rule:mmpower_online_bonus","moduleRefs":["mmpower_online_bonus"],"offerType":"module_rule","renderType":"engine_only","sections":0,"settingKey":"mmpower_promo_enabled","sourceType":"module_rule","title":"MMP+ç¶²è³¼ (4.6%)"},{"cards":["hangseng_mmpower"],"editBucket":"modules","editId":"mmpower_overseas_bonus","id":"rule:mmpower_overseas_bonus","moduleRefs":["mmpower_overseas_bonus"],"offerType":"module_rule","renderType":"engine_only","sections":0,"settingKey":"mmpower_promo_enabled","sourceType":"module_rule","title":"MMP+æµ·å¤– (5.6%)"},{"cards":["hangseng_mmpower"],"editBucket":"modules","editId":"mmpower_selected_bonus","id":"rule:mmpower_selected_bonus","moduleRefs":["mmpower_selected_bonus"],"offerType":"module_rule","renderType":"engine_only","sections":0,"settingKey":"mmpower_promo_enabled","sourceType":"module_rule","title":"MMP+è‡ªé¸ (0.6%)"},{"cards":["mox_credit"],"editBucket":"modules","editId":"mox_base","id":"rule:mox_base","moduleRefs":["mox_base"],"offerType":"module_rule","renderType":"engine_only","sections":0,"settingKey":"","sourceType":"module_rule","title":"åŸºæœ¬ 1%"},{"cards":["mox_credit"],"editBucket":"modules","editId":"mox_supermarket","id":"rule:mox_supermarket","moduleRefs":["mox_supermarket"],"offerType":"module_rule","renderType":"engine_only","sections":0,"settingKey":"","sourceType":"module_rule","title":"è¶…å¸‚ 3%"},{"cards":["mox_credit"],"editBucket":"modules","editId":"mox_task_bonus","id":"rule:mox_task_bonus","moduleRefs":["mox_task_bonus"],"offerType":"module_rule","renderType":"engine_only","sections":0,"settingKey":"mox_deposit_task_enabled","sourceType":"module_rule","title":"+1% (æ´»æœŸä»»å‹™)"},{"cards":["hsbc_pulse"],"editBucket":"modules","editId":"pulse_china_bonus","id":"rule:pulse_china_bonus","moduleRefs":["pulse_china_bonus"],"offerType":"module_rule","renderType":"engine_only","sections":0,"settingKey":"","sourceType":"module_rule","title":"ä¸­åœ‹å…§åœ°/æ¾³é–€æµå‹•æ”¯ä»˜ (2%)"},{"cards":["hsbc_red"],"editBucket":"modules","editId":"red_base","id":"rule:red_base","moduleRefs":["red_base"],"offerType":"module_rule","renderType":"engine_only","sections":0,"settingKey":"","sourceType":"module_rule","title":"åŸºæœ¬ (0.4%)"},{"cards":["hsbc_red"],"editBucket":"modules","editId":"red_designated_bonus","id":"rule:red_designated_bonus","moduleRefs":["red_designated_bonus"],"offerType":"module_rule","renderType":"engine_only","sections":0,"settingKey":"","sourceType":"module_rule","title":"Red Card æŒ‡å®šå•†æˆ¶ (7.6%)"},{"cards":["hsbc_easy","hsbc_gold","hsbc_gold_student","hsbc_premier","hsbc_pulse","hsbc_unionpay_std","hsbc_vs"],"editBucket":"modules","editId":"red_hot_variable","id":"rule:red_hot_variable","moduleRefs":["red_hot_variable"],"offerType":"module_rule","renderType":"engine_only","sections":0,"settingKey":"red_hot_rewards_enabled","sourceType":"module_rule","title":"HSBC æœ€ç´…è‡ªä¸»çè³"},{"cards":["hsbc_red"],"editBucket":"modules","editId":"red_online","id":"rule:red_online","moduleRefs":["red_online"],"offerType":"module_rule","renderType":"engine_only","sections":0,"settingKey":"","sourceType":"module_rule","title":"Red Card ç¶²ä¸Šè³¼ç‰© (3.6%)"},{"cards":["sc_cathay_priority","sc_cathay_private","sc_cathay_std"],"editBucket":"modules","editId":"sc_cathay_airlines","id":"rule:sc_cathay_airlines","moduleRefs":["sc_cathay_airlines"],"offerType":"module_rule","renderType":"engine_only","sections":0,"settingKey":"","sourceType":"module_rule","title":"æ¸£æ‰“åœ‹æ³°Mastercard åœ‹æ³°/é¦™æ¸¯å¿«é‹é¡å¤–é‡Œæ•¸"},{"cards":["sc_cathay_priority","sc_cathay_private","sc_cathay_std"],"editBucket":"modules","editId":"sc_cathay_base","id":"rule:sc_cathay_base","moduleRefs":["sc_cathay_base"],"offerType":"module_rule","renderType":"engine_only","sections":0,"settingKey":"","sourceType":"module_rule","title":"åŸºæœ¬ $6/é‡Œ"},{"cards":["sc_cathay_priority","sc_cathay_private","sc_cathay_std"],"editBucket":"modules","editId":"sc_cathay_dining_hotel","id":"rule:sc_cathay_dining_hotel","moduleRefs":["sc_cathay_dining_hotel"],"offerType":"module_rule","renderType":"engine_only","sections":0,"settingKey":"","sourceType":"module_rule","title":"é£Ÿè‚†/é…’åº— $4/é‡Œ"},{"cards":["sc_cathay_priority"],"editBucket":"modules","editId":"sc_cathay_overseas_priority","id":"rule:sc_cathay_overseas_priority","moduleRefs":["sc_cathay_overseas_priority"],"offerType":"module_rule","renderType":"engine_only","sections":0,"settingKey":"","sourceType":"module_rule","title":"å„ªå…ˆç†è²¡: æµ·å¤– $3/é‡Œ"},{"cards":["sc_cathay_private"],"editBucket":"modules","editId":"sc_cathay_overseas_private","id":"rule:sc_cathay_overseas_private","moduleRefs":["sc_cathay_overseas_private"],"offerType":"module_rule","renderType":"engine_only","sections":0,"settingKey":"","sourceType":"module_rule","title":"Private: Overseas $2/mi"},{"cards":["sc_cathay_std"],"editBucket":"modules","editId":"sc_cathay_overseas_std","id":"rule:sc_cathay_overseas_std","moduleRefs":["sc_cathay_overseas_std"],"offerType":"module_rule","renderType":"engine_only","sections":0,"settingKey":"","sourceType":"module_rule","title":"æµ·å¤– $4/é‡Œ"},{"cards":[],"editBucket":"modules","editId":"sc_cathay_private","id":"rule:sc_cathay_private","moduleRefs":["sc_cathay_private"],"offerType":"module_rule","renderType":"engine_only","sections":0,"settingKey":"","sourceType":"module_rule","title":"å„ªå…ˆç§äºº: æµ·å¤– $2/é‡Œ"},{"cards":["sc_simply_cash"],"editBucket":"modules","editId":"sc_simply_cash_base","id":"rule:sc_simply_cash_base","moduleRefs":["sc_simply_cash_base"],"offerType":"module_rule","renderType":"engine_only","sections":0,"settingKey":"","sourceType":"module_rule","title":"æœ¬åœ° 1.5%"},{"cards":["sc_simply_cash"],"editBucket":"modules","editId":"sc_simply_cash_foreign","id":"rule:sc_simply_cash_foreign","moduleRefs":["sc_simply_cash_foreign"],"offerType":"module_rule","renderType":"engine_only","sections":0,"settingKey":"","sourceType":"module_rule","title":"å¤–å¹£ 2%"},{"cards":["sc_smart"],"editBucket":"modules","editId":"sc_smart_base","id":"rule:sc_smart_base","moduleRefs":["sc_smart_base"],"offerType":"module_rule","renderType":"engine_only","sections":0,"settingKey":"","sourceType":"module_rule","title":"åŸºæœ¬ 0.55%"},{"cards":["sc_smart"],"editBucket":"modules","editId":"sc_smart_designated","id":"rule:sc_smart_designated","moduleRefs":["sc_smart_designated"],"offerType":"module_rule","renderType":"engine_only","sections":0,"settingKey":"","sourceType":"module_rule","title":"æŒ‡å®šå•†æˆ¶ 5%"},{"cards":["sim_credit"],"editBucket":"modules","editId":"sim_base","id":"rule:sim_base","moduleRefs":["sim_base"],"offerType":"module_rule","renderType":"engine_only","sections":0,"settingKey":"","sourceType":"module_rule","title":"åŸºæœ¬ 0.4%"},{"cards":["sim_credit"],"editBucket":"modules","editId":"sim_online","id":"rule:sim_online","moduleRefs":["sim_online"],"offerType":"module_rule","renderType":"engine_only","sections":0,"settingKey":"sim_promo_enabled","sourceType":"module_rule","title":"ç¶²è³¼ +7.6% (8%)"},{"cards":["hsbc_gold_student"],"editBucket":"modules","editId":"student_tuition_bonus","id":"rule:student_tuition_bonus","moduleRefs":["student_tuition_bonus"],"offerType":"module_rule","renderType":"engine_only","sections":0,"settingKey":"","sourceType":"module_rule","title":"å­¸ç”Ÿå¡å­¸è²»å›è´ˆ (2.4%)"},{"cards":["hsbc_easy","hsbc_everymile","hsbc_gold","hsbc_gold_student","hsbc_premier","hsbc_pulse","hsbc_red","hsbc_unionpay_std","hsbc_vs"],"editBucket":"modules","editId":"travel_guru_v2","id":"rule:travel_guru_v2","moduleRefs":["travel_guru_v2"],"offerType":"module_rule","renderType":"engine_only","sections":0,"settingKey":"","sourceType":"module_rule","title":"travel_guru_v2"},{"cards":["hangseng_travel_plus"],"editBucket":"modules","editId":"travel_plus_dining_bonus","id":"rule:travel_plus_dining_bonus","moduleRefs":["travel_plus_dining_bonus"],"offerType":"module_rule","renderType":"engine_only","sections":0,"settingKey":"travel_plus_promo_enabled","sourceType":"module_rule","title":"T+é¤é£² (4.6%)"},{"cards":["hangseng_travel_plus"],"editBucket":"modules","editId":"travel_plus_tier1_bonus","id":"rule:travel_plus_tier1_bonus","moduleRefs":["travel_plus_tier1_bonus"],"offerType":"module_rule","renderType":"engine_only","sections":0,"settingKey":"travel_plus_promo_enabled","sourceType":"module_rule","title":"T+æŒ‡å®šå¤–å¹£ (6.6%)"},{"cards":["hangseng_travel_plus"],"editBucket":"modules","editId":"travel_plus_tier2_bonus","id":"rule:travel_plus_tier2_bonus","moduleRefs":["travel_plus_tier2_bonus"],"offerType":"module_rule","renderType":"engine_only","sections":0,"settingKey":"travel_plus_promo_enabled","sourceType":"module_rule","title":"T+å…¶ä»–å¤–å¹£ (4.6%)"},{"cards":["hangseng_university"],"editBucket":"modules","editId":"university_tuition","id":"rule:university_tuition","moduleRefs":["university_tuition"],"offerType":"module_rule","renderType":"engine_only","sections":0,"settingKey":"","sourceType":"module_rule","title":"å¤§å­¸å­¸è²» (2%)"},{"cards":["hsbc_vs"],"editBucket":"modules","editId":"vs_base","id":"rule:vs_base","moduleRefs":["vs_base"],"offerType":"module_rule","renderType":"engine_only","sections":0,"settingKey":"","sourceType":"module_rule","title":"åŸºæœ¬ (0.4%)"},{"cards":["hsbc_vs"],"editBucket":"modules","editId":"vs_red_hot_bonus","id":"rule:vs_red_hot_bonus","moduleRefs":["vs_red_hot_bonus"],"offerType":"module_rule","renderType":"engine_only","sections":0,"settingKey":"","sourceType":"module_rule","title":"Visa Signature ç‰¹åˆ¥çè³ (1.2%)"},{"cards":["wewa"],"editBucket":"modules","editId":"wewa_base","id":"rule:wewa_base","moduleRefs":["wewa_base"],"offerType":"module_rule","renderType":"engine_only","sections":0,"settingKey":"","sourceType":"module_rule","title":"åŸºæœ¬ 0.4%"},{"cards":["wewa"],"editBucket":"modules","editId":"wewa_bonus","id":"rule:wewa_bonus","moduleRefs":["wewa_bonus"],"offerType":"module_rule","renderType":"engine_only","sections":0,"settingKey":"","sourceType":"module_rule","title":"æ—…éŠ/ç©æ¨‚ +3.6% (4%)"},{"cards":["wewa"],"editBucket":"modules","editId":"wewa_mobile_pay","id":"rule:wewa_mobile_pay","moduleRefs":["wewa_mobile_pay"],"offerType":"module_rule","renderType":"engine_only","sections":0,"settingKey":"","sourceType":"module_rule","title":"æ‰‹æ©Ÿæ”¯ä»˜ 4%"},{"cards":["sim_credit"],"editBucket":"campaigns","editId":"sim_promo","id":"sim_promo","moduleRefs":["sim_online"],"offerType":"mission_cap","renderType":"campaign_sections","sections":2,"settingKey":"sim_promo_enabled","sourceType":"campaign","title":"sim 8% ç¶²è³¼æ¨å»£"},{"cards":["hsbc_everymile","hsbc_vs","hsbc_red","hsbc_pulse","hsbc_unionpay_std","hsbc_easy","hsbc_gold_student","hsbc_gold","hsbc_premier"],"editBucket":"modules","editId":"travel_guru_v2","id":"travel_guru","moduleRefs":["travel_guru_v2"],"offerType":"level_lifecycle","renderType":"level_lifecycle","sections":0,"settingKey":"guru_level","sourceType":"special_model","title":"travel_guru"},{"cards":["hangseng_travel_plus"],"editBucket":"campaigns","editId":"travel_plus_promo","id":"travel_plus_promo","moduleRefs":["travel_plus_tier1_bonus"],"offerType":"mission_cap","renderType":"campaign_sections","sections":2,"settingKey":"travel_plus_promo_enabled","sourceType":"campaign","title":"Travel+ å¤–å¹£å›è´ˆ"},{"cards":["hsbc_vs","hsbc_red","hsbc_pulse","hsbc_unionpay_std","hsbc_easy","hsbc_gold_student","hsbc_gold","hsbc_premier"],"editBucket":"campaigns","editId":"winter_promo","id":"winter_promo","moduleRefs":[],"offerType":"tiered_cap","renderType":"campaign_sections","sections":2,"settingKey":"winter_promo_enabled","sourceType":"campaign","title":"HSBC æœ€ç´…å†¬æ—¥è³"}],"summary":{"counts":{"campaigns":9,"cards":49,"categories":51,"modules":131,"offers":141,"specialPromoModels":1,"trackers":8},"orphanModules":["sc_cathay_private"],"orphanTrackers":[],"promoTypeIssues":[],"sectionDrift":[],"sectionMissingRefs":[],"specialPromoIssues":[]},"trackers":[{"cards":["bea_goal"],"desc":"BEA GOAL æœˆç°½é–€æª»","id":"bea_goal_mission","match":[],"missionId":"bea_goal","reqMissionKey":"bea_goal_mission"},{"cards":["bea_ititanium"],"desc":"BEA i-Titanium æœˆç°½é–€æª»","id":"bea_ititanium_mission","match":[],"missionId":"bea_ititanium","reqMissionKey":"bea_ititanium_mission"},{"cards":["bea_world","bea_world_privilege"],"desc":"BEA World æœˆç°½é–€æª»","id":"bea_world_mission","match":[],"missionId":"bea_world","reqMissionKey":"bea_world_mission"},{"cards":["hsbc_everymile"],"desc":"ğŸŒ EveryMile å¤–å¹£ç°½å¸³å„ªæƒ ","id":"em_overseas_mission","match":["overseas"],"missionId":"em_promo","reqMissionKey":""},{"cards":["sc_cathay_priority","sc_cathay_private","sc_cathay_std"],"desc":"âœˆï¸ CX/UO ç´¯ç©ç°½è³¬","id":"sc_cathay_cxuo_tracker","match":["cathay_hkexpress"],"missionId":"sc_cathay_cxuo_bonus","reqMissionKey":""},{"cards":["sim_credit"],"desc":"Sim Credit éç¶²è³¼ ($500)","id":"sim_non_online_tracker","match":["general","dining","nfc_payment","overseas","alipay","wechat","payme","oepay","grocery","sportswear","medical","transport","travel","entertainment","apparel","health_beauty","telecom","other","moneyback_merchant","moneyback_pns_watsons","moneyback_fortress","tuition","chill_merchant","go_merchant"],"missionId":"sim_non_online","reqMissionKey":"sim_non_online_spend"},{"cards":["wewa"],"desc":"WeWa æ¯æœˆç°½è³¬é–€æª»","id":"wewa_mobile_mission","match":[],"missionId":"wewa_mobile","reqMissionKey":"wewa_mobile_mission"},{"cards":["hsbc_easy","hsbc_gold","hsbc_gold_student","hsbc_premier","hsbc_pulse","hsbc_red","hsbc_unionpay_std","hsbc_vs"],"desc":"â„ï¸ æœ€ç´…å†¬æ—¥è³","id":"winter_tracker","match":["dining","overseas"],"missionId":"winter_promo","reqMissionKey":""}]};
const generated = new Date();
document.getElementById("generatedAt").textContent = "Generated: " + generated.toLocaleString();
const IS_APP_MODE = (window.location.protocol === "http:" || window.location.protocol === "https:");

function esc(input) {
  return String(input ?? "")
    .replaceAll("&", "&amp;")
    .replaceAll("<", "&lt;")
    .replaceAll(">", "&gt;")
    .replaceAll('"', "&quot;")
    .replaceAll("'", "&#39;");
}
function pills(values) {
  if (!Array.isArray(values) || values.length === 0) return '<span class="small">-</span>';
  return values.map(v => '<span class="pill mono">' + esc(v) + '</span>').join("");
}
function text(v) { return (v === null || v === undefined || v === "") ? '<span class="small">-</span>' : esc(v); }

const sum = WB.summary || {};
const cards = document.getElementById("summaryCards");
[
  ["Cards", sum.counts?.cards ?? 0],
  ["Offers", sum.counts?.offers ?? 0],
  ["Trackers", sum.counts?.trackers ?? 0],
  ["Categories", sum.counts?.categories ?? 0],
  ["Orphan Modules", (sum.orphanModules || []).length],
  ["Binding Drift", (sum.sectionDrift || []).length],
  ["Promo Type Issues", (sum.promoTypeIssues || []).length],
  ["Special Promo Issues", (sum.specialPromoIssues || []).length]
].forEach(([k, v]) => {
  const div = document.createElement("div");
  div.className = "card";
  div.innerHTML = '<div class="k">' + esc(k) + '</div><div class="v mono">' + esc(v) + '</div>';
  cards.appendChild(div);
});

const alerts = [];
if ((sum.orphanModules || []).length > 0) alerts.push("Unused modules: " + sum.orphanModules.join(", "));
if ((sum.orphanTrackers || []).length > 0) alerts.push("Unused trackers: " + sum.orphanTrackers.join(", "));
if ((sum.sectionMissingRefs || []).length > 0) alerts.push(...sum.sectionMissingRefs);
if ((sum.sectionDrift || []).length > 0) alerts.push(...sum.sectionDrift);
if ((sum.promoTypeIssues || []).length > 0) alerts.push(...sum.promoTypeIssues);
if ((sum.specialPromoIssues || []).length > 0) alerts.push(...sum.specialPromoIssues);
const alertUl = document.getElementById("alerts");
if (alerts.length === 0) {
  alertUl.innerHTML = "<li>No findings.</li>";
} else {
  alertUl.innerHTML = alerts.map(a => "<li>" + esc(a) + "</li>").join("");
}

const EDITOR_ALLOWED = (WB.editor && WB.editor.allowedFields) ? WB.editor.allowedFields : {};
const EDITOR_ENTITIES = (WB.editor && WB.editor.entities) ? WB.editor.entities : {};

function makeEmptyPatch() {
  const out = {};
  Object.keys(EDITOR_ALLOWED).forEach((bucket) => { out[bucket] = {}; });
  return out;
}

let PENDING_EDITS = makeEmptyPatch();

function deepClone(obj) {
  return JSON.parse(JSON.stringify(obj));
}

function setEditorStatus(msg, isErr) {
  const el = document.getElementById("editorStatus");
  if (!el) return;
  el.className = "status " + (isErr ? "err" : "ok");
  el.textContent = msg;
}

function initAppModeActions() {
  const saveBtn = document.getElementById("editor-save-repo");
  const saveGoldenBtn = document.getElementById("editor-save-repo-golden");
  if (!saveBtn || !saveGoldenBtn) return;
  if (IS_APP_MODE) return;
  saveBtn.disabled = true;
  saveGoldenBtn.disabled = true;
  saveBtn.title = "Use app mode: node tools/workbench.js serve";
  saveGoldenBtn.title = "Use app mode: node tools/workbench.js serve";
}

function jsStr(input) {
  return "'" + String(input ?? "")
    .replaceAll("\\", "\\\\")
    .replaceAll("'", "\'")
    + "'";
}

function toJsonPreview(value) {
  try {
    return JSON.stringify(value, null, 2);
  } catch (_) {
    return String(value);
  }
}

function ensureBucketPatch(bucket) {
  if (!PENDING_EDITS[bucket] || typeof PENDING_EDITS[bucket] !== "object" || Array.isArray(PENDING_EDITS[bucket])) {
    PENDING_EDITS[bucket] = {};
  }
  return PENDING_EDITS[bucket];
}

function clearEmptyEntry(bucket, id) {
  const bucketPatch = ensureBucketPatch(bucket);
  const patch = bucketPatch[id];
  if (!patch || typeof patch !== "object" || Array.isArray(patch)) {
    delete bucketPatch[id];
    return;
  }
  if (Object.keys(patch).length === 0) delete bucketPatch[id];
}

function buildExportEdits() {
  const out = {};
  Object.keys(EDITOR_ALLOWED).forEach((bucket) => {
    const bucketPatch = PENDING_EDITS[bucket];
    if (!bucketPatch || typeof bucketPatch !== "object" || Array.isArray(bucketPatch)) return;
    const ids = Object.keys(bucketPatch).filter((id) => {
      const patch = bucketPatch[id];
      return patch && typeof patch === "object" && !Array.isArray(patch) && Object.keys(patch).length > 0;
    });
    if (ids.length === 0) return;
    out[bucket] = {};
    ids.forEach((id) => {
      out[bucket][id] = bucketPatch[id];
    });
  });
  return out;
}

function refreshPendingPreview() {
  const pre = document.getElementById("editor-pending");
  const countEl = document.getElementById("editor-patch-count");
  if (!pre || !countEl) return;
  const exported = buildExportEdits();
  let count = 0;
  Object.keys(exported).forEach((bucket) => { count += Object.keys(exported[bucket] || {}).length; });
  countEl.textContent = String(count);
  pre.textContent = count > 0 ? toJsonPreview(exported) : "{}";
}

function getBucketIds(bucket) {
  const entities = EDITOR_ENTITIES[bucket];
  if (!entities || typeof entities !== "object" || Array.isArray(entities)) return [];
  return Object.keys(entities).sort();
}

function getAllowedFields(bucket) {
  const fields = EDITOR_ALLOWED[bucket];
  return Array.isArray(fields) ? fields.slice() : [];
}

function getCurrentEntity(bucket, id) {
  const entities = EDITOR_ENTITIES[bucket];
  if (!entities || typeof entities !== "object") return null;
  const obj = entities[id];
  return (obj && typeof obj === "object") ? obj : null;
}

function refreshEditorCurrentPreview() {
  const pre = document.getElementById("editor-current");
  const bucketSel = document.getElementById("editor-bucket");
  const idSel = document.getElementById("editor-id");
  if (!pre || !bucketSel || !idSel) return;
  const entity = getCurrentEntity(bucketSel.value, idSel.value);
  pre.textContent = entity ? toJsonPreview(entity) : "{}";
}

function formatInlineValue(v) {
  if (v === undefined) return '<span class="small">-</span>';
  if (v === null) return '<span class="mono">null</span>';
  let raw = (typeof v === "string") ? v : toJsonPreview(v);
  raw = raw.replaceAll("\n", " ").replaceAll("\r", " ").replaceAll("\t", " ");
  raw = raw.trim();
  if (raw.length > 90) raw = raw.slice(0, 87) + "...";
  return '<span class="mono">' + esc(raw) + '</span>';
}

function getEntryPatch(bucket, id) {
  const bucketPatch = PENDING_EDITS[bucket];
  if (!bucketPatch || typeof bucketPatch !== "object" || Array.isArray(bucketPatch)) return {};
  const entryPatch = bucketPatch[id];
  if (!entryPatch || typeof entryPatch !== "object" || Array.isArray(entryPatch)) return {};
  return entryPatch;
}

function renderQuickFieldTable() {
  const table = document.getElementById("editor-quick-table");
  const bucketSel = document.getElementById("editor-bucket");
  const idSel = document.getElementById("editor-id");
  if (!table || !bucketSel || !idSel) return;
  const bucket = bucketSel.value;
  const id = idSel.value;
  const fields = getAllowedFields(bucket);
  const entity = getCurrentEntity(bucket, id) || {};
  const entryPatch = getEntryPatch(bucket, id);
  const thead = "<thead><tr><th>Field</th><th>Current</th><th>Pending</th><th>Actions</th></tr></thead>";
  const body = fields.map((field) => {
    const hasPending = Object.prototype.hasOwnProperty.call(entryPatch, field);
    const pendingVal = hasPending ? entryPatch[field] : undefined;
    return "<tr>"
      + '<td><span class="mono">' + esc(field) + "</span></td>"
      + "<td>" + formatInlineValue(entity[field]) + "</td>"
      + "<td>" + formatInlineValue(pendingVal) + "</td>"
      + '<td class="q-actions">'
      + '<button class="edit-btn" onclick="quickSetField(' + jsStr(field) + ')">Set</button> '
      + '<button class="edit-btn" onclick="quickDeleteField(' + jsStr(field) + ')">Delete</button>'
      + "</td>"
      + "</tr>";
  }).join("");
  table.innerHTML = thead + "<tbody>" + body + "</tbody>";
}

function refreshIdOptions(preferredId) {
  const bucketSel = document.getElementById("editor-bucket");
  const idSel = document.getElementById("editor-id");
  if (!bucketSel || !idSel) return;
  const bucket = bucketSel.value;
  const ids = getBucketIds(bucket);
  const nextId = (preferredId && ids.includes(preferredId))
    ? preferredId
    : (ids.includes(idSel.value) ? idSel.value : (ids[0] || ""));
  idSel.innerHTML = ids.map((id) => '<option value="' + esc(id) + '">' + esc(id) + '</option>').join("");
  idSel.value = nextId || "";
}

function refreshFieldOptions(preferredField) {
  const bucketSel = document.getElementById("editor-bucket");
  const fieldSel = document.getElementById("editor-field");
  if (!bucketSel || !fieldSel) return;
  const bucket = bucketSel.value;
  const fields = getAllowedFields(bucket);
  const nextField = (preferredField && fields.includes(preferredField))
    ? preferredField
    : (fields.includes(fieldSel.value) ? fieldSel.value : (fields[0] || ""));
  fieldSel.innerHTML = fields.map((field) => '<option value="' + esc(field) + '">' + esc(field) + '</option>').join("");
  fieldSel.value = nextField || "";
}

function parseEditorValue(rawInput) {
  const raw = String(rawInput ?? "");
  const trimmed = raw.trim();
  if (trimmed === "") return "";
  const jsonLike = /^[\[{"]/.test(trimmed)
    || trimmed === "true"
    || trimmed === "false"
    || trimmed === "null"
    || /^-?\d+(\.\d+)?([eE][+-]?\d+)?$/.test(trimmed);
  if (!jsonLike) return raw;
  try {
    return JSON.parse(trimmed);
  } catch (err) {
    throw new Error("JSON parse failed: " + err.message);
  }
}

function loadCurrentFieldValue() {
  const bucketSel = document.getElementById("editor-bucket");
  const idSel = document.getElementById("editor-id");
  const fieldSel = document.getElementById("editor-field");
  const valueEl = document.getElementById("editor-value");
  if (!bucketSel || !idSel || !fieldSel || !valueEl) return;
  const entity = getCurrentEntity(bucketSel.value, idSel.value);
  const val = entity ? entity[fieldSel.value] : undefined;
  if (val === undefined) {
    valueEl.value = "";
    setEditorStatus("Current value is empty.", false);
    return;
  }
  valueEl.value = (typeof val === "string") ? val : toJsonPreview(val);
  setEditorStatus("Loaded current value.", false);
}

function queueFieldPatch() {
  const bucketSel = document.getElementById("editor-bucket");
  const idSel = document.getElementById("editor-id");
  const fieldSel = document.getElementById("editor-field");
  const valueEl = document.getElementById("editor-value");
  const deleteFieldEl = document.getElementById("editor-delete-field");
  if (!bucketSel || !idSel || !fieldSel || !valueEl || !deleteFieldEl) return;
  const bucket = bucketSel.value;
  const id = idSel.value;
  const field = fieldSel.value;
  if (!bucket || !id || !field) {
    setEditorStatus("Bucket/ID/Field is required.", true);
    return;
  }
  const allowed = getAllowedFields(bucket);
  if (!allowed.includes(field)) {
    setEditorStatus("Field is not allowed for this bucket.", true);
    return;
  }

  const bucketPatch = ensureBucketPatch(bucket);
  if (!bucketPatch[id] || typeof bucketPatch[id] !== "object" || Array.isArray(bucketPatch[id])) {
    bucketPatch[id] = {};
  }
  if (bucketPatch[id].__delete === true) delete bucketPatch[id].__delete;

  if (deleteFieldEl.checked) {
    bucketPatch[id][field] = null;
  } else {
    let parsed;
    try {
      parsed = parseEditorValue(valueEl.value);
    } catch (err) {
      setEditorStatus(String(err.message || err), true);
      return;
    }
    bucketPatch[id][field] = parsed;
  }
  clearEmptyEntry(bucket, id);
  refreshPendingPreview();
  renderQuickFieldTable();
  refreshCardReviewIfVisible();
  setEditorStatus(deleteFieldEl.checked ? "Field delete queued (set to null)." : "Field patch queued.", false);
  deleteFieldEl.checked = false;
}

function queueDeleteFieldPatch() {
  const deleteFieldEl = document.getElementById("editor-delete-field");
  if (!deleteFieldEl) return;
  deleteFieldEl.checked = true;
  queueFieldPatch();
}

function loadEntryPatchJson() {
  const bucketSel = document.getElementById("editor-bucket");
  const idSel = document.getElementById("editor-id");
  const input = document.getElementById("editor-entry-patch");
  if (!bucketSel || !idSel || !input) return;
  const entryPatch = getEntryPatch(bucketSel.value, idSel.value);
  const out = {};
  Object.keys(entryPatch).forEach((field) => {
    if (field === "__delete") return;
    out[field] = entryPatch[field];
  });
  input.value = Object.keys(out).length > 0 ? toJsonPreview(out) : "{}";
  setEditorStatus("Loaded pending entry patch.", false);
}

function queueEntryPatchFromJson() {
  const bucketSel = document.getElementById("editor-bucket");
  const idSel = document.getElementById("editor-id");
  const input = document.getElementById("editor-entry-patch");
  if (!bucketSel || !idSel || !input) return;
  const bucket = bucketSel.value;
  const id = idSel.value;
  if (!bucket || !id) {
    setEditorStatus("Bucket/ID is required.", true);
    return;
  }
  const raw = String(input.value || "").trim();
  if (!raw) {
    setEditorStatus("Bulk patch JSON is empty.", true);
    return;
  }

  let parsed;
  try {
    parsed = JSON.parse(raw);
  } catch (err) {
    setEditorStatus("Bulk patch parse failed: " + (err.message || String(err)), true);
    return;
  }
  if (!parsed || typeof parsed !== "object" || Array.isArray(parsed)) {
    setEditorStatus("Bulk patch must be a JSON object.", true);
    return;
  }

  const allowedSet = new Set(getAllowedFields(bucket));
  const bucketPatch = ensureBucketPatch(bucket);
  if (!bucketPatch[id] || typeof bucketPatch[id] !== "object" || Array.isArray(bucketPatch[id])) {
    bucketPatch[id] = {};
  }
  if (bucketPatch[id].__delete === true) delete bucketPatch[id].__delete;

  let applied = 0;
  const skipped = [];
  Object.keys(parsed).forEach((field) => {
    if (!allowedSet.has(field)) {
      skipped.push(field);
      return;
    }
    bucketPatch[id][field] = parsed[field];
    applied += 1;
  });

  clearEmptyEntry(bucket, id);
  refreshPendingPreview();
  renderQuickFieldTable();
  refreshCardReviewIfVisible();
  refreshEditorCurrentPreview();
  if (applied === 0) {
    setEditorStatus("No allowed fields in bulk patch.", true);
    return;
  }
  if (skipped.length > 0) {
    setEditorStatus("Bulk patch queued: " + applied + " field(s). Skipped: " + skipped.join(", "), false);
    return;
  }
  setEditorStatus("Bulk patch queued: " + applied + " field(s).", false);
}

function clearEntryPatch() {
  const bucketSel = document.getElementById("editor-bucket");
  const idSel = document.getElementById("editor-id");
  if (!bucketSel || !idSel) return;
  const bucketPatch = ensureBucketPatch(bucketSel.value);
  delete bucketPatch[idSel.value];
  refreshPendingPreview();
  renderQuickFieldTable();
  refreshCardReviewIfVisible();
  setEditorStatus("Entry patch cleared.", false);
}

function queueEntryDelete() {
  const bucketSel = document.getElementById("editor-bucket");
  const idSel = document.getElementById("editor-id");
  if (!bucketSel || !idSel) return;
  const bucketPatch = ensureBucketPatch(bucketSel.value);
  bucketPatch[idSel.value] = { __delete: true };
  refreshPendingPreview();
  renderQuickFieldTable();
  refreshCardReviewIfVisible();
  setEditorStatus("Entry delete queued (__delete:true).", false);
}

function undoEntryDelete() {
  const bucketSel = document.getElementById("editor-bucket");
  const idSel = document.getElementById("editor-id");
  if (!bucketSel || !idSel) return;
  const bucketPatch = ensureBucketPatch(bucketSel.value);
  if (!bucketPatch[idSel.value] || typeof bucketPatch[idSel.value] !== "object") {
    setEditorStatus("No queued entry patch to undo.", false);
    return;
  }
  if (bucketPatch[idSel.value].__delete === true) {
    delete bucketPatch[idSel.value].__delete;
    clearEmptyEntry(bucketSel.value, idSel.value);
    refreshPendingPreview();
    renderQuickFieldTable();
    refreshCardReviewIfVisible();
    setEditorStatus("Entry delete removed.", false);
    return;
  }
  setEditorStatus("Selected entry is not marked for delete.", false);
}

function normalizeImportedPatch(raw) {
  const base = makeEmptyPatch();
  if (!raw || typeof raw !== "object" || Array.isArray(raw)) return base;
  Object.keys(EDITOR_ALLOWED).forEach((bucket) => {
    const srcBucket = raw[bucket];
    if (!srcBucket || typeof srcBucket !== "object" || Array.isArray(srcBucket)) return;
    base[bucket] = {};
    Object.keys(srcBucket).forEach((id) => {
      const srcPatch = srcBucket[id];
      if (!srcPatch || typeof srcPatch !== "object" || Array.isArray(srcPatch)) return;
      const nextPatch = {};
      if (srcPatch.__delete === true) {
        nextPatch.__delete = true;
      } else {
        const allowedSet = new Set(getAllowedFields(bucket));
        Object.keys(srcPatch).forEach((field) => {
          if (!allowedSet.has(field)) return;
          nextPatch[field] = srcPatch[field];
        });
      }
      if (Object.keys(nextPatch).length > 0) {
        base[bucket][id] = nextPatch;
      }
    });
  });
  return base;
}

function downloadEditsJson() {
  const data = buildExportEdits();
  const text = toJsonPreview(data);
  const blob = new Blob([text + "\\n"], { type: "application/json" });
  const url = URL.createObjectURL(blob);
  const a = document.createElement("a");
  a.href = url;
  a.download = "workbench_edits.json";
  document.body.appendChild(a);
  a.click();
  document.body.removeChild(a);
  URL.revokeObjectURL(url);
  setEditorStatus("Downloaded workbench_edits.json.", false);
}

async function copyEditsJson() {
  const data = buildExportEdits();
  const text = toJsonPreview(data);
  try {
    if (navigator.clipboard && navigator.clipboard.writeText) {
      await navigator.clipboard.writeText(text);
      setEditorStatus("Copied edits JSON to clipboard.", false);
      return;
    }
  } catch (_) {}
  setEditorStatus("Clipboard API unavailable. Please use Download.", true);
}

async function copyApplyCommand() {
  const cmd = "pbpaste | node tools/workbench.js apply --edits - && node tools/run_golden_cases.js";
  try {
    if (navigator.clipboard && navigator.clipboard.writeText) {
      await navigator.clipboard.writeText(cmd);
      setEditorStatus("Copied apply command for macOS.", false);
      return;
    }
  } catch (_) {}
  setEditorStatus("Clipboard API unavailable. Copy command manually.", true);
}

async function saveToRepo(runGolden) {
  if (!IS_APP_MODE) {
    setEditorStatus("Save To Repo requires app mode: node tools/workbench.js serve", true);
    return;
  }
  const edits = buildExportEdits();
  const saveBtn = document.getElementById("editor-save-repo");
  const saveGoldenBtn = document.getElementById("editor-save-repo-golden");
  if (saveBtn) saveBtn.disabled = true;
  if (saveGoldenBtn) saveGoldenBtn.disabled = true;
  setEditorStatus("Saving to repo...", false);
  try {
    const resp = await fetch("/api/apply", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ edits, runGolden: !!runGolden })
    });
    const payload = await resp.json();
    if (!resp.ok || !payload || payload.ok !== true) {
      const errMsg = (payload && payload.error) ? payload.error : "Unknown save failure";
      setEditorStatus("Save failed: " + errMsg, true);
      return;
    }
    const warnings = Array.isArray(payload.warnings) ? payload.warnings : [];
    if (payload.golden && payload.golden.ok === false) {
      setEditorStatus("Saved, but golden failed. Check terminal output.", true);
      return;
    }
    if (payload.golden && payload.golden.ok === true) {
      setEditorStatus("Saved (" + payload.touched + " entries) and golden passed.", false);
      return;
    }
    if (warnings.length > 0) {
      setEditorStatus("Saved (" + payload.touched + " entries) with " + warnings.length + " warning(s).", false);
      return;
    }
    setEditorStatus("Saved to repo (" + payload.touched + " entries).", false);
  } catch (err) {
    setEditorStatus("Save failed: " + (err && err.message ? err.message : String(err)), true);
  } finally {
    if (saveBtn) saveBtn.disabled = false;
    if (saveGoldenBtn) saveGoldenBtn.disabled = false;
  }
}

function handleImportEditsFile(file) {
  if (!file) return;
  const reader = new FileReader();
  reader.onload = (ev) => {
    try {
      const raw = JSON.parse(String(ev.target && ev.target.result ? ev.target.result : "{}"));
      PENDING_EDITS = normalizeImportedPatch(raw);
      refreshPendingPreview();
      renderQuickFieldTable();
      refreshCardReviewIfVisible();
      setEditorStatus("Imported edits JSON.", false);
    } catch (err) {
      setEditorStatus("Import failed: " + (err.message || String(err)), true);
    }
  };
  reader.onerror = () => {
    setEditorStatus("Import failed: unable to read file.", true);
  };
  reader.readAsText(file);
}

function resetPendingEdits() {
  PENDING_EDITS = makeEmptyPatch();
  refreshPendingPreview();
  renderQuickFieldTable();
  refreshCardReviewIfVisible();
  setEditorStatus("Pending edits reset.", false);
}

window.quickSetField = function (field) {
  const fieldSel = document.getElementById("editor-field");
  const valueEl = document.getElementById("editor-value");
  const deleteFieldEl = document.getElementById("editor-delete-field");
  if (!fieldSel || !valueEl || !deleteFieldEl) return;
  fieldSel.value = String(field || "");
  loadCurrentFieldValue();
  const next = window.prompt("Set value for " + field + " (text or JSON)", valueEl.value);
  if (next === null) {
    setEditorStatus("Quick edit cancelled.", false);
    return;
  }
  valueEl.value = next;
  deleteFieldEl.checked = false;
  queueFieldPatch();
};

window.quickDeleteField = function (field) {
  const fieldSel = document.getElementById("editor-field");
  if (!fieldSel) return;
  fieldSel.value = String(field || "");
  queueDeleteFieldPatch();
};

function setEditorTarget(bucket, id, field) {
  const bucketSel = document.getElementById("editor-bucket");
  if (!bucketSel) return false;
  const bucketKey = String(bucket || "");
  if (!EDITOR_ALLOWED[bucketKey]) {
    setEditorStatus("Unknown bucket: " + bucketKey, true);
    return false;
  }
  bucketSel.value = bucketKey;
  refreshIdOptions(String(id || ""));
  refreshFieldOptions(field ? String(field) : undefined);
  refreshEditorCurrentPreview();
  loadCurrentFieldValue();
  renderQuickFieldTable();
  return true;
}

window.reviewSetField = function (bucket, id, field) {
  if (!setEditorTarget(bucket, id, field)) return;
  const valueEl = document.getElementById("editor-value");
  const deleteFieldEl = document.getElementById("editor-delete-field");
  if (!valueEl || !deleteFieldEl) return;
  const next = window.prompt(
    "Set " + String(field || "") + " (" + String(bucket || "") + ":" + String(id || "") + ")",
    valueEl.value
  );
  if (next === null) {
    setEditorStatus("Review edit cancelled.", false);
    return;
  }
  valueEl.value = next;
  deleteFieldEl.checked = false;
  queueFieldPatch();
};

window.reviewDeleteField = function (bucket, id, field) {
  if (!setEditorTarget(bucket, id, field)) return;
  const deleteFieldEl = document.getElementById("editor-delete-field");
  if (!deleteFieldEl) return;
  const ok = window.confirm("Delete field " + String(field || "") + " from " + String(bucket || "") + ":" + String(id || "") + "?");
  if (!ok) return;
  deleteFieldEl.checked = true;
  queueFieldPatch();
};

window.openEditor = function (bucket, id, shouldScroll) {
  const bucketSel = document.getElementById("editor-bucket");
  if (!bucketSel) return;
  const bucketKey = String(bucket || "");
  if (!EDITOR_ALLOWED[bucketKey]) {
    setEditorStatus("Unknown bucket: " + bucketKey, true);
    return;
  }
  bucketSel.value = bucketKey;
  refreshIdOptions(String(id || ""));
  refreshFieldOptions();
  refreshEditorCurrentPreview();
  loadCurrentFieldValue();
  renderQuickFieldTable();
  setEditorStatus("Selected " + bucketKey + ":" + id + ".", false);
  const idSel = document.getElementById("editor-id");
  if (shouldScroll !== false && idSel) idSel.scrollIntoView({ behavior: "smooth", block: "center" });
};

function initEditor() {
  const bucketSel = document.getElementById("editor-bucket");
  if (!bucketSel) return;
  const buckets = Object.keys(EDITOR_ALLOWED);
  bucketSel.innerHTML = buckets.map((bucket) => '<option value="' + esc(bucket) + '">' + esc(bucket) + "</option>").join("");
  if (buckets.length > 0) bucketSel.value = buckets[0];
  refreshIdOptions();
  refreshFieldOptions();
  refreshEditorCurrentPreview();
  loadCurrentFieldValue();
  refreshPendingPreview();
  renderQuickFieldTable();
  initAppModeActions();

  bucketSel.addEventListener("change", () => {
    refreshIdOptions();
    refreshFieldOptions();
    refreshEditorCurrentPreview();
    loadCurrentFieldValue();
    renderQuickFieldTable();
  });
  document.getElementById("editor-id").addEventListener("change", () => {
    refreshEditorCurrentPreview();
    loadCurrentFieldValue();
    renderQuickFieldTable();
  });
  document.getElementById("editor-field").addEventListener("change", () => {
    loadCurrentFieldValue();
  });
  document.getElementById("editor-load").addEventListener("click", loadCurrentFieldValue);
  document.getElementById("editor-set").addEventListener("click", queueFieldPatch);
  document.getElementById("editor-delete-field-btn").addEventListener("click", queueDeleteFieldPatch);
  document.getElementById("editor-clear-entry").addEventListener("click", clearEntryPatch);
  document.getElementById("editor-save-repo").addEventListener("click", () => saveToRepo(false));
  document.getElementById("editor-save-repo-golden").addEventListener("click", () => saveToRepo(true));
  document.getElementById("editor-load-entry").addEventListener("click", loadEntryPatchJson);
  document.getElementById("editor-merge-entry").addEventListener("click", queueEntryPatchFromJson);
  document.getElementById("editor-reset").addEventListener("click", resetPendingEdits);
}

function toArray(input) {
  return Array.isArray(input) ? input : [];
}

function cardLabel(card) {
  if (!card) return "";
  const name = String(card.name || card.id || "");
  const bank = String(card.bank || "");
  return bank ? (name + " (" + bank + ")") : name;
}

function renderReviewEntityFieldTable(bucket, id) {
  const allowed = getAllowedFields(bucket);
  const entity = getCurrentEntity(bucket, id) || {};
  const entryPatch = getEntryPatch(bucket, id);
  if (!Array.isArray(allowed) || allowed.length === 0) {
    return '<div class="review-empty">No editable fields.</div>';
  }
  const rows = allowed.map((field) => {
    const hasPending = Object.prototype.hasOwnProperty.call(entryPatch, field);
    const pendingVal = hasPending ? entryPatch[field] : undefined;
    return "<tr>"
      + '<td><span class="mono">' + esc(field) + "</span></td>"
      + "<td>" + formatInlineValue(entity[field]) + "</td>"
      + "<td>" + formatInlineValue(pendingVal) + "</td>"
      + '<td class="review-actions">'
      + '<button class="edit-btn" onclick="reviewSetField(' + jsStr(bucket) + ',' + jsStr(id) + ',' + jsStr(field) + ')">Set</button> '
      + '<button class="edit-btn" onclick="reviewDeleteField(' + jsStr(bucket) + ',' + jsStr(id) + ',' + jsStr(field) + ')">Delete</button>'
      + "</td>"
      + "</tr>";
  }).join("");
  return '<div class="table-wrap"><table class="review-table">'
    + "<thead><tr><th>Field</th><th>Current</th><th>Pending</th><th>Actions</th></tr></thead>"
    + "<tbody>" + rows + "</tbody>"
    + "</table></div>";
}

function buildCardReviewGroups(card, offers) {
  const moduleEntities = (WB.editor && WB.editor.entities && WB.editor.entities.modules) ? WB.editor.entities.modules : {};
  const trackerEntities = (WB.editor && WB.editor.entities && WB.editor.entities.trackers) ? WB.editor.entities.trackers : {};
  const trackerMap = {};
  toArray(WB.trackers).forEach((t) => { if (t && t.id) trackerMap[t.id] = t; });

  const groups = {
    card: [],
    modules: [],
    trackers: [],
    offerSources: []
  };
  const seen = {};
  const pushEntity = (groupKey, bucket, id, title, subtitle) => {
    if (!bucket || !id || !EDITOR_ALLOWED[bucket]) return;
    const key = bucket + ":" + id;
    if (seen[key]) return;
    seen[key] = true;
    groups[groupKey].push({
      bucket,
      id,
      title: title || id,
      subtitle: subtitle || ""
    });
  };

  pushEntity("card", "cards", card.id, card.id, cardLabel(card));

  toArray(card.rewardModules).forEach((id) => {
    const mod = moduleEntities[id] || {};
    const rate = Number.isFinite(Number(mod.rate)) ? ("rate=" + mod.rate)
      : (Number.isFinite(Number(mod.rate_per_x)) ? ("rate_per_x=" + mod.rate_per_x)
        : (Number.isFinite(Number(mod.multiplier)) ? ("multiplier=" + mod.multiplier) : ""));
    const cap = Number.isFinite(Number(mod.cap_limit)) ? ("cap=" + mod.cap_limit) : "";
    const mission = mod.req_mission_key
      ? (mod.req_mission_key + (Number.isFinite(Number(mod.req_mission_spend)) ? (">=" + mod.req_mission_spend) : ""))
      : "";
    const subtitle = [mod.desc || "", rate, cap, mission].filter(Boolean).join(" | ");
    pushEntity("modules", "modules", id, id, subtitle);
  });

  toArray(card.trackers).forEach((id) => {
    const t = trackerMap[id] || trackerEntities[id] || {};
    const subtitle = [t.desc || "", t.reqMissionKey || t.req_mission_key || "", t.missionId || t.mission_id || ""].filter(Boolean).join(" | ");
    pushEntity("trackers", "trackers", id, id, subtitle);
  });

  toArray(offers).forEach((offer) => {
    const bucket = offer.editBucket || "";
    const id = offer.editId || "";
    if (!bucket || !id) return;
    const subtitle = [offer.id || "", offer.title || "", offer.sourceType || "", offer.offerType || ""].filter(Boolean).join(" | ");
    pushEntity("offerSources", bucket, id, (offer.id || (bucket + ":" + id)) + " -> " + bucket + ":" + id, subtitle);
  });

  return groups;
}

function renderReviewEntityItem(entity) {
  const head = '<summary><div class="review-item-top">'
    + '<span class="review-item-title mono">' + esc(entity.title) + "</span>"
    + '<button class="edit-btn" onclick="openEditor(' + jsStr(entity.bucket) + ',' + jsStr(entity.id) + ')">Open Editor</button>'
    + "</div>"
    + '<div class="review-item-sub">' + esc(entity.subtitle || (entity.bucket + ":" + entity.id)) + "</div>"
    + "</summary>";
  const body = '<div class="review-entity-body">' + renderReviewEntityFieldTable(entity.bucket, entity.id) + "</div>";
  return '<details class="review-entity" open>' + head + body + "</details>";
}

function renderReviewGroup(title, entities) {
  const body = (!Array.isArray(entities) || entities.length === 0)
    ? '<div class="review-empty">None</div>'
    : entities.map((entity) => renderReviewEntityItem(entity)).join("");
  return '<div class="review-block">'
    + '<h4 class="review-group-title">' + esc(title) + ' <span class="small">(' + esc((entities || []).length) + ")</span></h4>"
    + body
    + "</div>";
}

function renderCardReviewSections(card) {
  const contentEl = document.getElementById("card-review-content");
  if (!contentEl) return;
  if (!card) {
    contentEl.innerHTML = '<div class="review-empty">No card selected.</div>';
    return;
  }

  const offers = toArray(WB.offers).filter((offer) => toArray(offer.cards).includes(card.id));
  const groups = buildCardReviewGroups(card, offers);
  contentEl.innerHTML = [
    renderReviewGroup("Card", groups.card),
    renderReviewGroup("Modules", groups.modules),
    renderReviewGroup("Trackers", groups.trackers),
    renderReviewGroup("Offer Sources", groups.offerSources)
  ].join("");
}

function renderCardReviewMeta(card) {
  const metaEl = document.getElementById("card-review-meta");
  if (!metaEl) return;
  if (!card) {
    metaEl.innerHTML = "No card selected.";
    return;
  }
  const modulesCount = toArray(card.rewardModules).length;
  const trackersCount = toArray(card.trackers).length;
  const offersCount = toArray(WB.offers).filter((offer) => toArray(offer.cards).includes(card.id)).length;
  metaEl.innerHTML = 'Card <span class="mono">' + esc(card.id) + '</span> | Modules: <span class="mono">' +
    esc(modulesCount) + '</span> | Trackers: <span class="mono">' + esc(trackersCount) +
    '</span> | Related Offers: <span class="mono">' + esc(offersCount) + '</span>';
}

function getSelectedCardId() {
  const sel = document.getElementById("card-review-select");
  return sel ? String(sel.value || "") : "";
}

function refreshCardReviewIfVisible() {
  const sel = document.getElementById("card-review-select");
  if (!sel || !sel.value) return;
  renderCardReview(sel.value);
}

function getCardById(cardId) {
  return toArray(WB.cards).find((c) => c && c.id === cardId) || null;
}

function renderCardReview(cardId) {
  const sel = document.getElementById("card-review-select");
  if (!sel) return;
  const id = cardId || getSelectedCardId();
  if (id) sel.value = id;
  const card = getCardById(sel.value);
  renderCardReviewMeta(card);
  renderCardReviewSections(card);
}

window.reviewCard = function (cardId) {
  const sel = document.getElementById("card-review-select");
  if (!sel) return;
  if (cardId) sel.value = cardId;
  renderCardReview(sel.value);
  sel.scrollIntoView({ behavior: "smooth", block: "center" });
};

function stepCardReview(delta) {
  const sel = document.getElementById("card-review-select");
  if (!sel) return;
  const opts = toArray(Array.from(sel.options || []));
  const cur = opts.findIndex((o) => o.value === sel.value);
  if (cur < 0 || opts.length === 0) return;
  const next = Math.max(0, Math.min(opts.length - 1, cur + delta));
  sel.value = opts[next].value;
  renderCardReview(sel.value);
}

function initCardReview() {
  const sel = document.getElementById("card-review-select");
  if (!sel) return;
  const cards = toArray(WB.cards);
  sel.innerHTML = cards
    .map((card) => '<option value="' + esc(card.id) + '">' + esc(cardLabel(card)) + '</option>')
    .join("");
  if (cards.length > 0) sel.value = cards[0].id;

  sel.addEventListener("change", () => renderCardReview(sel.value));
  document.getElementById("card-review-prev").addEventListener("click", () => stepCardReview(-1));
  document.getElementById("card-review-next").addEventListener("click", () => stepCardReview(1));
  document.getElementById("card-review-edit-card").addEventListener("click", () => {
    const id = getSelectedCardId();
    if (!id) return;
    openEditor("cards", id);
  });
  renderCardReview(sel.value);
}

function setupTable({ inputId, tableId, countId, rows, columns, toSearch }) {
  const input = document.getElementById(inputId);
  const table = document.getElementById(tableId);
  const count = document.getElementById(countId);
  if (!input || !table || !count) return;
  const thead = "<thead><tr>" + columns.map(c => "<th>" + esc(c.title) + "</th>").join("") + "</tr></thead>";
  const render = () => {
    const q = (input.value || "").trim().toLowerCase();
    const filtered = rows.filter(r => toSearch(r).includes(q));
    const body = filtered.map((r) => "<tr>" + columns.map(c => "<td>" + c.render(r) + "</td>").join("") + "</tr>").join("");
    table.innerHTML = thead + "<tbody>" + body + "</tbody>";
    count.textContent = filtered.length + " / " + rows.length;
  };
  input.addEventListener("input", render);
  render();
}

setupTable({
  inputId: "q-offers",
  tableId: "table-offers",
  countId: "count-offers",
  rows: WB.offers || [],
  columns: [
    { title: "Offer", render: r => '<span class="mono">' + esc(r.id) + "</span>" },
    { title: "Edit", render: r => (r.editBucket && r.editId) ? ('<button class="edit-btn" onclick="openEditor(' + jsStr(r.editBucket) + ',' + jsStr(r.editId) + ')">Edit</button>') : '<span class="small">-</span>' },
    { title: "Title", render: r => text(r.title) },
    { title: "Source", render: r => text(r.sourceType) },
    { title: "Render", render: r => text(r.renderType) },
    { title: "Type", render: r => text(r.offerType) },
    { title: "Setting Key", render: r => text(r.settingKey) },
    { title: "Cards", render: r => pills(r.cards) },
    { title: "Module Refs", render: r => pills(r.moduleRefs) },
    { title: "Sections", render: r => text(r.sections) }
  ],
  toSearch: r => [
    r.id, r.title, r.sourceType, r.renderType, r.offerType, r.settingKey, r.sections,
    (r.cards || []).join(" "), (r.moduleRefs || []).join(" ")
  ].join(" ").toLowerCase()
});

setupTable({
  inputId: "q-cards",
  tableId: "table-cards",
  countId: "count-cards",
  rows: WB.cards || [],
  columns: [
    { title: "Card", render: r => '<span class="mono">' + esc(r.id) + "</span>" },
    { title: "Edit", render: r => '<button class="edit-btn" onclick="openEditor(' + jsStr("cards") + ',' + jsStr(r.id) + ')">Edit</button>' },
    { title: "Review", render: r => '<button class="ghost" onclick="reviewCard(' + jsStr(r.id) + ')">Review</button>' },
    { title: "Name", render: r => text(r.name) },
    { title: "Bank", render: r => text(r.bank) },
    { title: "Currency", render: r => text(r.currency) },
    { title: "Modules", render: r => pills(r.rewardModules) },
    { title: "Trackers", render: r => pills(r.trackers) }
  ],
  toSearch: r => [
    r.id, r.name, r.bank, r.currency, (r.rewardModules || []).join(" "), (r.trackers || []).join(" ")
  ].join(" ").toLowerCase()
});

setupTable({
  inputId: "q-categories",
  tableId: "table-categories",
  countId: "count-categories",
  rows: WB.categories || [],
  columns: [
    { title: "Category", render: r => '<span class="mono">' + esc(r.id) + "</span>" },
    { title: "Edit", render: r => '<button class="edit-btn" onclick="openEditor(' + jsStr("categories") + ',' + jsStr(r.id) + ')">Edit</button>' },
    { title: "Label", render: r => text(r.label) },
    { title: "Parent", render: r => text(r.parent) },
    { title: "Hidden", render: r => text(r.hidden ? "true" : "") }
  ],
  toSearch: r => [
    r.id, r.label, r.parent, r.hidden ? "true" : ""
  ].join(" ").toLowerCase()
});

setupTable({
  inputId: "q-trackers",
  tableId: "table-trackers",
  countId: "count-trackers",
  rows: WB.trackers || [],
  columns: [
    { title: "Tracker", render: r => '<span class="mono">' + esc(r.id) + "</span>" },
    { title: "Edit", render: r => '<button class="edit-btn" onclick="openEditor(' + jsStr("trackers") + ',' + jsStr(r.id) + ')">Edit</button>' },
    { title: "Desc", render: r => text(r.desc) },
    { title: "Req Mission Key", render: r => text(r.reqMissionKey) },
    { title: "Mission ID", render: r => text(r.missionId) },
    { title: "Cards", render: r => pills(r.cards) },
    { title: "Match", render: r => pills(r.match) }
  ],
  toSearch: r => [
    r.id, r.desc, r.reqMissionKey, r.missionId, (r.cards || []).join(" "), (r.match || []).join(" ")
  ].join(" ").toLowerCase()
});

initEditor();
initCardReview();
</script>
</body>
</html>
